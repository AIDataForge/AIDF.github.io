<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>AI NAS 技术博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="AI NAS (Artificial Intelligence Data Forge) 技术文档、架构说明、API 接口文档">
<meta property="og:type" content="website">
<meta property="og:title" content="AI NAS 技术博客">
<meta property="og:url" content="https://1660479817.github.io/AIDF.github.io/index.html">
<meta property="og:site_name" content="AI NAS 技术博客">
<meta property="og:description" content="AI NAS (Artificial Intelligence Data Forge) 技术文档、架构说明、API 接口文档">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="AI NAS Team">
<meta property="article:tag" content="AI NAS, 文档管理, 智能系统, 技术文档">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/AIDF.github.io/atom.xml" title="AI NAS 技术博客" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/AIDF.github.io/favicon.png">
  
  
  
<link rel="stylesheet" href="/AIDF.github.io/css/style.css">

  
    
<link rel="stylesheet" href="/AIDF.github.io/fancybox/jquery.fancybox.min.css">

  
  
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fork-awesome@1.2.0/css/fork-awesome.min.css">

<meta name="generator" content="Hexo 7.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/AIDF.github.io/" id="logo">AI NAS 技术博客</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/AIDF.github.io/" id="subtitle">AI NAS 系统技术文档与分享</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/AIDF.github.io/">Home</a>
        
          <a class="main-nav-link" href="/AIDF.github.io/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/AIDF.github.io/atom.xml" title="RSS 订阅"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="搜索"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="搜索"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://1660479817.github.io/AIDF.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-README" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/AIDF.github.io/2025/12/30/README/" class="article-date">
  <time class="dt-published" datetime="2025-12-30T07:15:42.000Z" itemprop="datePublished">2025-12-30</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/AIDF.github.io/categories/AI-NAS/">AI NAS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/AIDF.github.io/2025/12/30/README/">AI NAS 文档中心</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="AI-NAS-文档中心"><a href="#AI-NAS-文档中心" class="headerlink" title="AI NAS 文档中心"></a>AI NAS 文档中心</h1><h2 id="文档结构"><a href="#文档结构" class="headerlink" title="文档结构"></a>文档结构</h2><p>本文档中心按照系统页面模块组织，每个模块包含架构说明和API接口文档。</p>
<h2 id="文档目录"><a href="#文档目录" class="headerlink" title="文档目录"></a>文档目录</h2><h3 id="系统总览"><a href="#系统总览" class="headerlink" title="系统总览"></a>系统总览</h3><ul>
<li><a href="./architecture.md">系统架构说明</a> - 系统整体架构说明</li>
<li><a href="./api.md">API接口总览</a> - 所有API接口汇总</li>
</ul>
<h3 id="模块文档"><a href="#模块文档" class="headerlink" title="模块文档"></a>模块文档</h3><h4 id="1-系统首页"><a href="#1-系统首页" class="headerlink" title="1. 系统首页"></a>1. 系统首页</h4><ul>
<li><a href="./modules/home/architecture.md">架构说明</a> - 系统首页模块架构</li>
<li><a href="./modules/home/api.md">API接口</a> - 系统首页API接口</li>
</ul>
<p><strong>功能</strong>：系统入口、功能导航、系统概览</p>
<h4 id="2-文档中心"><a href="#2-文档中心" class="headerlink" title="2. 文档中心"></a>2. 文档中心</h4><ul>
<li><a href="./modules/workspace/architecture.md">架构说明</a> - 文档中心模块架构</li>
<li><a href="./modules/workspace/api.md">API接口</a> - 文档中心API接口</li>
</ul>
<p><strong>功能</strong>：文档搜索、文档浏览、文档管理、文档上传</p>
<h4 id="3-Smart-Chat"><a href="#3-Smart-Chat" class="headerlink" title="3. Smart Chat"></a>3. Smart Chat</h4><ul>
<li><a href="./modules/smart_chat/architecture.md">架构说明</a> - Smart Chat模块架构</li>
<li><a href="./modules/smart_chat/api.md">API接口</a> - Smart Chat API接口</li>
</ul>
<p><strong>功能</strong>：智能对话、文档检索、问题分析、知识解释</p>
<h4 id="4-项目中心"><a href="#4-项目中心" class="headerlink" title="4. 项目中心"></a>4. 项目中心</h4><ul>
<li><a href="./modules/project_center/architecture.md">架构说明</a> - 项目中心模块架构</li>
<li><a href="./modules/project_center/api.md">API接口</a> - 项目中心API接口</li>
</ul>
<p><strong>功能</strong>：项目管理、成员管理、记录管理、文档关联</p>
<h4 id="5-数据工场"><a href="#5-数据工场" class="headerlink" title="5. 数据工场"></a>5. 数据工场</h4><ul>
<li><a href="./modules/data_factory/architecture.md">架构说明</a> - 数据工场模块架构</li>
<li><a href="./modules/data_factory/api.md">API接口</a> - 数据工场API接口</li>
</ul>
<p><strong>功能</strong>：处理监控、队列管理、处理统计、异常处理</p>
<h4 id="6-管理中心"><a href="#6-管理中心" class="headerlink" title="6. 管理中心"></a>6. 管理中心</h4><ul>
<li><a href="./modules/management/architecture.md">架构说明</a> - 管理中心模块架构</li>
<li><a href="./modules/management/api.md">API接口</a> - 管理中心API接口</li>
</ul>
<p><strong>功能</strong>：用户管理、权限管理、系统设置、系统监控、数据仓库</p>
<h2 id="快速导航"><a href="#快速导航" class="headerlink" title="快速导航"></a>快速导航</h2><h3 id="按功能查找"><a href="#按功能查找" class="headerlink" title="按功能查找"></a>按功能查找</h3><ul>
<li><strong>文档管理</strong> → <a href="./modules/workspace/">文档中心</a></li>
<li><strong>智能对话</strong> → <a href="./modules/smart_chat/">Smart Chat</a></li>
<li><strong>项目管理</strong> → <a href="./modules/project_center/">项目中心</a></li>
<li><strong>处理监控</strong> → <a href="./modules/data_factory/">数据工场</a></li>
<li><strong>系统管理</strong> → <a href="./modules/management/">管理中心</a></li>
</ul>
<h3 id="按角色查找"><a href="#按角色查找" class="headerlink" title="按角色查找"></a>按角色查找</h3><ul>
<li><strong>普通用户</strong> → 系统首页、文档中心、Smart Chat、项目中心</li>
<li><strong>管理员</strong> → 所有模块 + 管理中心</li>
</ul>
<h2 id="文档说明"><a href="#文档说明" class="headerlink" title="文档说明"></a>文档说明</h2><p>每个模块文档包含：</p>
<ol>
<li><p><strong>架构说明</strong> (<code>architecture.md</code>)</p>
<ul>
<li>模块概述</li>
<li>模块架构图</li>
<li>核心组件说明</li>
<li>数据流说明</li>
<li>技术实现</li>
<li>性能优化</li>
<li>扩展性设计</li>
<li>安全设计</li>
</ul>
</li>
<li><p><strong>API接口文档</strong> (<code>api.md</code>)</p>
<ul>
<li>API概述</li>
<li>接口列表</li>
<li>请求&#x2F;响应示例</li>
<li>使用示例</li>
<li>错误处理</li>
</ul>
</li>
</ol>
<h2 id="更新日志"><a href="#更新日志" class="headerlink" title="更新日志"></a>更新日志</h2><ul>
<li>2025-10-19：初始版本，按页面模块组织文档</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://1660479817.github.io/AIDF.github.io/2025/12/30/README/" data-id="cmjs96wqh0000ci1w5gdkdc1w" data-title="AI NAS 文档中心" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/AIDF.github.io/tags/%E6%80%BB%E8%A7%88/" rel="tag">总览</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/AIDF.github.io/tags/%E6%96%87%E6%A1%A3%E4%B8%AD%E5%BF%83/" rel="tag">文档中心</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-api" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/AIDF.github.io/2025/12/30/api/" class="article-date">
  <time class="dt-published" datetime="2025-12-30T07:15:42.000Z" itemprop="datePublished">2025-12-30</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/AIDF.github.io/categories/AI-NAS/">AI NAS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/AIDF.github.io/2025/12/30/api/">API接口说明文档</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="API接口说明文档"><a href="#API接口说明文档" class="headerlink" title="API接口说明文档"></a>API接口说明文档</h1><h2 id="文档导航"><a href="#文档导航" class="headerlink" title="文档导航"></a>文档导航</h2><p>本文档提供所有API接口的汇总说明。各模块的详细API接口请参考：</p>
<ul>
<li><a href="./modules/home/api.md">系统首页API</a></li>
<li><a href="./modules/workspace/api.md">文档中心API</a></li>
<li><a href="./modules/smart_chat/api.md">Smart Chat API</a></li>
<li><a href="./modules/project_center/api.md">项目中心API</a></li>
<li><a href="./modules/data_factory/api.md">数据工场API</a></li>
<li><a href="./modules/management/api.md">管理中心API</a></li>
</ul>
<h2 id="1-概述"><a href="#1-概述" class="headerlink" title="1. 概述"></a>1. 概述</h2><p>AI NAS 提供完整的 RESTful API 接口，基于 FastAPI 框架实现。所有 API 接口都支持异步处理，返回 JSON 格式数据。</p>
<h3 id="1-1-基础信息"><a href="#1-1-基础信息" class="headerlink" title="1.1 基础信息"></a>1.1 基础信息</h3><ul>
<li><strong>Base URL</strong>：<code>http://localhost:8000</code>（开发环境）</li>
<li><strong>API前缀</strong>：<code>/api/v1</code></li>
<li><strong>Content-Type</strong>：<code>application/json</code></li>
<li><strong>响应格式</strong>：统一使用 JSON 格式</li>
</ul>
<h3 id="1-2-统一响应格式"><a href="#1-2-统一响应格式" class="headerlink" title="1.2 统一响应格式"></a>1.2 统一响应格式</h3><p>所有 API 接口遵循统一的响应格式：</p>
<p><strong>成功响应（数据响应）</strong>：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;success&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;message&quot;</span><span class="punctuation">:</span> <span class="string">&quot;操作成功&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span>...<span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;timestamp&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2025-10-19T10:00:00&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;response_time_ms&quot;</span><span class="punctuation">:</span> <span class="number">123</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p><strong>成功响应（列表响应）</strong>：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;success&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;message&quot;</span><span class="punctuation">:</span> <span class="string">&quot;操作成功&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;items&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span>...<span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;total&quot;</span><span class="punctuation">:</span> <span class="number">100</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;page&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;page_size&quot;</span><span class="punctuation">:</span> <span class="number">20</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;total_pages&quot;</span><span class="punctuation">:</span> <span class="number">5</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;timestamp&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2025-10-19T10:00:00&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;response_time_ms&quot;</span><span class="punctuation">:</span> <span class="number">123</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p><strong>错误响应</strong>：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;success&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;error&quot;</span><span class="punctuation">:</span> <span class="string">&quot;错误信息&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;error_code&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ERROR_CODE&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;details&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span>...<span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;timestamp&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2025-10-19T10:00:00&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;response_time_ms&quot;</span><span class="punctuation">:</span> <span class="number">123</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="1-3-状态码"><a href="#1-3-状态码" class="headerlink" title="1.3 状态码"></a>1.3 状态码</h3><ul>
<li><code>200</code>：成功</li>
<li><code>400</code>：请求参数错误</li>
<li><code>401</code>：未授权</li>
<li><code>403</code>：禁止访问</li>
<li><code>404</code>：资源不存在</li>
<li><code>500</code>：服务器内部错误</li>
</ul>
<h3 id="1-4-认证"><a href="#1-4-认证" class="headerlink" title="1.4 认证"></a>1.4 认证</h3><p>大部分API需要认证，使用Bearer Token方式：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Authorization: Bearer &lt;token&gt;</span><br></pre></td></tr></table></figure>

<p>或者通过Cookie传递：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Cookie: auth_token=&lt;token&gt;</span><br></pre></td></tr></table></figure>

<h2 id="2-认证API"><a href="#2-认证API" class="headerlink" title="2. 认证API"></a>2. 认证API</h2><h3 id="2-1-用户注册"><a href="#2-1-用户注册" class="headerlink" title="2.1 用户注册"></a>2.1 用户注册</h3><p><strong>接口</strong>：<code>POST /api/v1/auth/register</code></p>
<p><strong>请求体</strong>：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;username&quot;</span><span class="punctuation">:</span> <span class="string">&quot;user123&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;email&quot;</span><span class="punctuation">:</span> <span class="string">&quot;user@example.com&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;password&quot;</span><span class="punctuation">:</span> <span class="string">&quot;password123&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;display_name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;显示名称&quot;</span>  <span class="comment">// 可选</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p><strong>响应示例</strong>：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;success&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;message&quot;</span><span class="punctuation">:</span> <span class="string">&quot;注册成功&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;user_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;uuid&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;username&quot;</span><span class="punctuation">:</span> <span class="string">&quot;user123&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;email&quot;</span><span class="punctuation">:</span> <span class="string">&quot;user@example.com&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;timestamp&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2025-10-19T10:00:00&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;response_time_ms&quot;</span><span class="punctuation">:</span> <span class="number">123</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-2-用户登录"><a href="#2-2-用户登录" class="headerlink" title="2.2 用户登录"></a>2.2 用户登录</h3><p><strong>接口</strong>：<code>POST /api/v1/auth/login</code></p>
<p><strong>请求体</strong>：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;username&quot;</span><span class="punctuation">:</span> <span class="string">&quot;user123&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;password&quot;</span><span class="punctuation">:</span> <span class="string">&quot;password123&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p><strong>响应示例</strong>：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;access_token&quot;</span><span class="punctuation">:</span> <span class="string">&quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;token_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;bearer&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;expires_in&quot;</span><span class="punctuation">:</span> <span class="number">86400</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;user&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;uuid&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;username&quot;</span><span class="punctuation">:</span> <span class="string">&quot;user123&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;email&quot;</span><span class="punctuation">:</span> <span class="string">&quot;user@example.com&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;role&quot;</span><span class="punctuation">:</span> <span class="string">&quot;user&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;display_name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;显示名称&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;is_active&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;is_verified&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-3-用户登出"><a href="#2-3-用户登出" class="headerlink" title="2.3 用户登出"></a>2.3 用户登出</h3><p><strong>接口</strong>：<code>POST /api/v1/auth/logout</code></p>
<p><strong>说明</strong>：需要认证</p>
<p><strong>响应示例</strong>：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;success&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;message&quot;</span><span class="punctuation">:</span> <span class="string">&quot;登出成功&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-4-获取当前用户信息"><a href="#2-4-获取当前用户信息" class="headerlink" title="2.4 获取当前用户信息"></a>2.4 获取当前用户信息</h3><p><strong>接口</strong>：<code>GET /api/v1/auth/me</code></p>
<p><strong>说明</strong>：需要认证</p>
<p><strong>响应示例</strong>：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;success&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;uuid&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;username&quot;</span><span class="punctuation">:</span> <span class="string">&quot;user123&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;email&quot;</span><span class="punctuation">:</span> <span class="string">&quot;user@example.com&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;role&quot;</span><span class="punctuation">:</span> <span class="string">&quot;user&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;display_name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;显示名称&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;is_active&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;is_verified&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;created_at&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2025-10-19T10:00:00&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;last_login_at&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2025-10-19T10:00:00&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;timestamp&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2025-10-19T10:00:00&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;response_time_ms&quot;</span><span class="punctuation">:</span> <span class="number">123</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-5-获取用户权限"><a href="#2-5-获取用户权限" class="headerlink" title="2.5 获取用户权限"></a>2.5 获取用户权限</h3><p><strong>接口</strong>：<code>GET /api/v1/auth/permissions</code></p>
<p><strong>说明</strong>：需要认证</p>
<h3 id="2-6-修改密码"><a href="#2-6-修改密码" class="headerlink" title="2.6 修改密码"></a>2.6 修改密码</h3><p><strong>接口</strong>：<code>POST /api/v1/auth/change-password</code></p>
<p><strong>说明</strong>：需要认证</p>
<p><strong>请求体</strong>：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;old_password&quot;</span><span class="punctuation">:</span> <span class="string">&quot;old_password123&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;new_password&quot;</span><span class="punctuation">:</span> <span class="string">&quot;new_password123&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-7-验证Token"><a href="#2-7-验证Token" class="headerlink" title="2.7 验证Token"></a>2.7 验证Token</h3><p><strong>接口</strong>：<code>POST /api/v1/auth/verify-token</code></p>
<p><strong>请求体</strong>：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;token&quot;</span><span class="punctuation">:</span> <span class="string">&quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="3-文件管理API"><a href="#3-文件管理API" class="headerlink" title="3. 文件管理API"></a>3. 文件管理API</h2><h3 id="3-1-上传文件"><a href="#3-1-上传文件" class="headerlink" title="3.1 上传文件"></a>3.1 上传文件</h3><p><strong>接口</strong>：<code>POST /api/v1/files/upload</code></p>
<p><strong>请求</strong>：<code>multipart/form-data</code></p>
<p><strong>参数</strong>：</p>
<ul>
<li><code>file</code> (file, 必需)：要上传的文件</li>
</ul>
<p><strong>响应示例</strong>：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;success&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;file_id&quot;</span><span class="punctuation">:</span> <span class="number">123</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;message&quot;</span><span class="punctuation">:</span> <span class="string">&quot;文件上传成功，已加入自动处理队列&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;processing_status&quot;</span><span class="punctuation">:</span> <span class="string">&quot;queued&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;duplicate_info&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p><strong>说明</strong>：</p>
<ul>
<li>前5个文件会自动加入处理队列（状态为<code>queued</code>）</li>
<li>超过5个的文件状态为<code>unanalyzed</code>，需要手动触发处理</li>
<li>如果文件已存在，返回<code>already_exists</code>状态</li>
</ul>
<h3 id="3-2-获取文件列表"><a href="#3-2-获取文件列表" class="headerlink" title="3.2 获取文件列表"></a>3.2 获取文件列表</h3><p><strong>接口</strong>：<code>GET /api/v1/files/</code></p>
<p><strong>参数</strong>：</p>
<ul>
<li><code>skip</code> (int, 可选)：跳过的记录数，默认0</li>
<li><code>limit</code> (int, 可选)：返回的记录数，默认20，最大100</li>
<li><code>directory</code> (string, 可选)：目录过滤</li>
<li><code>search</code> (string, 可选)：搜索关键词（搜索文件名）</li>
<li><code>status</code> (string, 可选)：状态过滤（queued&#x2F;processing&#x2F;completed&#x2F;failed&#x2F;unanalyzed）</li>
<li><code>sort_by</code> (string, 可选)：排序字段（created_at&#x2F;file_size&#x2F;title），默认created_at</li>
<li><code>sort_order</code> (string, 可选)：排序顺序（asc&#x2F;desc），默认desc</li>
</ul>
<p><strong>响应示例</strong>：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;success&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;items&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">123</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;示例文档.pdf&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;original_filename&quot;</span><span class="punctuation">:</span> <span class="string">&quot;example.pdf&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;file_size&quot;</span><span class="punctuation">:</span> <span class="number">1024000</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;mime_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;application/pdf&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;status&quot;</span><span class="punctuation">:</span> <span class="string">&quot;completed&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;created_at&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2025-10-19T10:00:00&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;access_count&quot;</span><span class="punctuation">:</span> <span class="number">5</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;last_accessed_at&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2025-10-19T11:00:00&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;processing_completed_at&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2025-10-19T10:05:00&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;summary&quot;</span><span class="punctuation">:</span> <span class="string">&quot;文档摘要&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;directory_name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;documents&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;file_path&quot;</span><span class="punctuation">:</span> <span class="string">&quot;documents/example.pdf&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;md_path&quot;</span><span class="punctuation">:</span> <span class="string">&quot;documents/example.md&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;total&quot;</span><span class="punctuation">:</span> <span class="number">100</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;page&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;page_size&quot;</span><span class="punctuation">:</span> <span class="number">20</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;total_pages&quot;</span><span class="punctuation">:</span> <span class="number">5</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;timestamp&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2025-10-19T10:00:00&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;response_time_ms&quot;</span><span class="punctuation">:</span> <span class="number">123</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="3-3-按状态获取文件列表"><a href="#3-3-按状态获取文件列表" class="headerlink" title="3.3 按状态获取文件列表"></a>3.3 按状态获取文件列表</h3><p><strong>接口</strong>：<code>GET /api/v1/files/by-status</code></p>
<p><strong>参数</strong>：</p>
<ul>
<li><code>status</code> (string, 必需)：状态（queued&#x2F;processing&#x2F;completed&#x2F;failed&#x2F;unanalyzed）</li>
<li><code>skip</code> (int, 可选)：跳过的记录数，默认0</li>
<li><code>limit</code> (int, 可选)：返回的记录数，默认20</li>
</ul>
<h3 id="3-4-获取文件详情"><a href="#3-4-获取文件详情" class="headerlink" title="3.4 获取文件详情"></a>3.4 获取文件详情</h3><p><strong>接口</strong>：<code>GET /api/v1/files/&#123;file_id&#125;</code></p>
<p><strong>路径参数</strong>：</p>
<ul>
<li><code>file_id</code> (int, 必需)：文件ID</li>
</ul>
<p><strong>响应示例</strong>：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;success&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">123</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;示例文档.pdf&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;original_filename&quot;</span><span class="punctuation">:</span> <span class="string">&quot;example.pdf&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;file_size&quot;</span><span class="punctuation">:</span> <span class="number">1024000</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;mime_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;application/pdf&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;status&quot;</span><span class="punctuation">:</span> <span class="string">&quot;completed&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;created_at&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2025-10-19T10:00:00&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;access_count&quot;</span><span class="punctuation">:</span> <span class="number">5</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;last_accessed_at&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2025-10-19T11:00:00&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;processing_completed_at&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2025-10-19T10:05:00&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;summary&quot;</span><span class="punctuation">:</span> <span class="string">&quot;文档摘要&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;keywords&quot;</span><span class="punctuation">:</span> <span class="string">&quot;关键词1,关键词2&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;directory_name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;documents&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;file_path&quot;</span><span class="punctuation">:</span> <span class="string">&quot;documents/example.pdf&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;md_path&quot;</span><span class="punctuation">:</span> <span class="string">&quot;documents/example.md&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;notes&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;tags&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;timestamp&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2025-10-19T10:00:00&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;response_time_ms&quot;</span><span class="punctuation">:</span> <span class="number">123</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="3-5-获取文件Markdown内容"><a href="#3-5-获取文件Markdown内容" class="headerlink" title="3.5 获取文件Markdown内容"></a>3.5 获取文件Markdown内容</h3><p><strong>接口</strong>：<code>GET /api/v1/files/&#123;file_id&#125;/markdown</code></p>
<p><strong>路径参数</strong>：</p>
<ul>
<li><code>file_id</code> (int, 必需)：文件ID</li>
</ul>
<p><strong>响应示例</strong>：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;success&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;file_id&quot;</span><span class="punctuation">:</span> <span class="number">123</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;markdown_content&quot;</span><span class="punctuation">:</span> <span class="string">&quot;# 文档标题\n\n文档内容...&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;file_path&quot;</span><span class="punctuation">:</span> <span class="string">&quot;documents/example.md&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;timestamp&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2025-10-19T10:00:00&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;response_time_ms&quot;</span><span class="punctuation">:</span> <span class="number">123</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="3-6-更新文件Markdown内容"><a href="#3-6-更新文件Markdown内容" class="headerlink" title="3.6 更新文件Markdown内容"></a>3.6 更新文件Markdown内容</h3><p><strong>接口</strong>：<code>PUT /api/v1/files/&#123;file_id&#125;/markdown</code></p>
<p><strong>路径参数</strong>：</p>
<ul>
<li><code>file_id</code> (int, 必需)：文件ID</li>
</ul>
<p><strong>请求体</strong>：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;markdown_content&quot;</span><span class="punctuation">:</span> <span class="string">&quot;# 更新后的文档内容&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;update_vector&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span>  <span class="comment">// 是否更新向量索引，默认true</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="3-7-更新文件元数据"><a href="#3-7-更新文件元数据" class="headerlink" title="3.7 更新文件元数据"></a>3.7 更新文件元数据</h3><p><strong>接口</strong>：<code>PATCH /api/v1/files/&#123;file_id&#125;/metadata</code></p>
<p><strong>路径参数</strong>：</p>
<ul>
<li><code>file_id</code> (int, 必需)：文件ID</li>
</ul>
<p><strong>请求体</strong>：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;summary&quot;</span><span class="punctuation">:</span> <span class="string">&quot;更新后的摘要&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;keywords&quot;</span><span class="punctuation">:</span> <span class="string">&quot;关键词1,关键词2&quot;</span>  <span class="comment">// 可选</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="3-8-获取文件状态"><a href="#3-8-获取文件状态" class="headerlink" title="3.8 获取文件状态"></a>3.8 获取文件状态</h3><p><strong>接口</strong>：<code>GET /api/v1/files/&#123;file_id&#125;/status</code></p>
<p><strong>路径参数</strong>：</p>
<ul>
<li><code>file_id</code> (int, 必需)：文件ID</li>
</ul>
<p><strong>响应示例</strong>：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;success&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;file_id&quot;</span><span class="punctuation">:</span> <span class="number">123</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;status&quot;</span><span class="punctuation">:</span> <span class="string">&quot;completed&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;progress_data&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;stage&quot;</span><span class="punctuation">:</span> <span class="string">&quot;completed&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;progress&quot;</span><span class="punctuation">:</span> <span class="number">100</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;message&quot;</span><span class="punctuation">:</span> <span class="string">&quot;处理完成&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;timestamp&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2025-10-19T10:00:00&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;response_time_ms&quot;</span><span class="punctuation">:</span> <span class="number">123</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="3-9-获取文件处理进度"><a href="#3-9-获取文件处理进度" class="headerlink" title="3.9 获取文件处理进度"></a>3.9 获取文件处理进度</h3><p><strong>接口</strong>：<code>GET /api/v1/files/&#123;file_id&#125;/processing-progress</code></p>
<p><strong>路径参数</strong>：</p>
<ul>
<li><code>file_id</code> (int, 必需)：文件ID</li>
</ul>
<h3 id="3-10-下载文件"><a href="#3-10-下载文件" class="headerlink" title="3.10 下载文件"></a>3.10 下载文件</h3><p><strong>接口</strong>：<code>GET /api/v1/files/&#123;file_id&#125;/download</code></p>
<p><strong>路径参数</strong>：</p>
<ul>
<li><code>file_id</code> (int, 必需)：文件ID</li>
</ul>
<p><strong>响应</strong>：返回文件流</p>
<h3 id="3-11-查看文件"><a href="#3-11-查看文件" class="headerlink" title="3.11 查看文件"></a>3.11 查看文件</h3><p><strong>接口</strong>：<code>GET /api/v1/files/&#123;file_id&#125;/view</code></p>
<p><strong>路径参数</strong>：</p>
<ul>
<li><code>file_id</code> (int, 必需)：文件ID</li>
</ul>
<p><strong>说明</strong>：返回文件的HTML预览页面</p>
<h3 id="3-12-获取文件关键词"><a href="#3-12-获取文件关键词" class="headerlink" title="3.12 获取文件关键词"></a>3.12 获取文件关键词</h3><p><strong>接口</strong>：<code>GET /api/v1/files/&#123;file_id&#125;/keywords</code></p>
<p><strong>路径参数</strong>：</p>
<ul>
<li><code>file_id</code> (int, 必需)：文件ID</li>
</ul>
<h3 id="3-13-删除文件"><a href="#3-13-删除文件" class="headerlink" title="3.13 删除文件"></a>3.13 删除文件</h3><p><strong>接口</strong>：<code>DELETE /api/v1/files/&#123;file_id&#125;</code></p>
<p><strong>路径参数</strong>：</p>
<ul>
<li><code>file_id</code> (int, 必需)：文件ID</li>
</ul>
<h3 id="3-14-恢复处理"><a href="#3-14-恢复处理" class="headerlink" title="3.14 恢复处理"></a>3.14 恢复处理</h3><p><strong>接口</strong>：<code>POST /api/v1/files/&#123;file_id&#125;/resume</code></p>
<p><strong>路径参数</strong>：</p>
<ul>
<li><code>file_id</code> (int, 必需)：文件ID</li>
</ul>
<p><strong>说明</strong>：恢复失败的文件处理</p>
<h3 id="3-15-重新处理"><a href="#3-15-重新处理" class="headerlink" title="3.15 重新处理"></a>3.15 重新处理</h3><p><strong>接口</strong>：<code>POST /api/v1/files/&#123;file_id&#125;/reprocess</code></p>
<p><strong>路径参数</strong>：</p>
<ul>
<li><code>file_id</code> (int, 必需)：文件ID</li>
</ul>
<p><strong>说明</strong>：重新处理文件</p>
<h3 id="3-16-开始处理"><a href="#3-16-开始处理" class="headerlink" title="3.16 开始处理"></a>3.16 开始处理</h3><p><strong>接口</strong>：<code>POST /api/v1/files/&#123;file_id&#125;/start-processing</code></p>
<p><strong>路径参数</strong>：</p>
<ul>
<li><code>file_id</code> (int, 必需)：文件ID</li>
</ul>
<p><strong>说明</strong>：手动触发文件处理</p>
<h3 id="3-17-人工处理"><a href="#3-17-人工处理" class="headerlink" title="3.17 人工处理"></a>3.17 人工处理</h3><p><strong>接口</strong>：<code>POST /api/v1/files/&#123;file_id&#125;/manual-processing</code></p>
<p><strong>路径参数</strong>：</p>
<ul>
<li><code>file_id</code> (int, 必需)：文件ID</li>
</ul>
<p><strong>请求体</strong>：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;content&quot;</span><span class="punctuation">:</span> <span class="string">&quot;文档内容（Markdown格式）&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;summary&quot;</span><span class="punctuation">:</span> <span class="string">&quot;文档摘要&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;keywords&quot;</span><span class="punctuation">:</span> <span class="string">&quot;关键词1,关键词2&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="3-18-批量向量化"><a href="#3-18-批量向量化" class="headerlink" title="3.18 批量向量化"></a>3.18 批量向量化</h3><p><strong>接口</strong>：<code>POST /api/v1/files/batch-vectorize</code></p>
<p><strong>请求体</strong>：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;file_ids&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">,</span> <span class="number">2</span><span class="punctuation">,</span> <span class="number">3</span><span class="punctuation">]</span>  <span class="comment">// 文件ID列表</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="3-19-获取目录列表"><a href="#3-19-获取目录列表" class="headerlink" title="3.19 获取目录列表"></a>3.19 获取目录列表</h3><p><strong>接口</strong>：<code>GET /api/v1/files/directories</code></p>
<p><strong>响应示例</strong>：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;success&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;directories&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;documents&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;path&quot;</span><span class="punctuation">:</span> <span class="string">&quot;documents&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;file_count&quot;</span><span class="punctuation">:</span> <span class="number">10</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;timestamp&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2025-10-19T10:00:00&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;response_time_ms&quot;</span><span class="punctuation">:</span> <span class="number">123</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="3-20-获取状态列表"><a href="#3-20-获取状态列表" class="headerlink" title="3.20 获取状态列表"></a>3.20 获取状态列表</h3><p><strong>接口</strong>：<code>GET /api/v1/files/statuses</code></p>
<p><strong>响应示例</strong>：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;success&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;statuses&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="punctuation">&#123;</span><span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;queued&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;label&quot;</span><span class="punctuation">:</span> <span class="string">&quot;排队中&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;count&quot;</span><span class="punctuation">:</span> <span class="number">5</span><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span><span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;processing&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;label&quot;</span><span class="punctuation">:</span> <span class="string">&quot;处理中&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;count&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span><span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;completed&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;label&quot;</span><span class="punctuation">:</span> <span class="string">&quot;已完成&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;count&quot;</span><span class="punctuation">:</span> <span class="number">100</span><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span><span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;failed&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;label&quot;</span><span class="punctuation">:</span> <span class="string">&quot;失败&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;count&quot;</span><span class="punctuation">:</span> <span class="number">3</span><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span><span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;unanalyzed&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;label&quot;</span><span class="punctuation">:</span> <span class="string">&quot;未分析&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;count&quot;</span><span class="punctuation">:</span> <span class="number">10</span><span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;timestamp&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2025-10-19T10:00:00&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;response_time_ms&quot;</span><span class="punctuation">:</span> <span class="number">123</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="3-21-工作区API"><a href="#3-21-工作区API" class="headerlink" title="3.21 工作区API"></a>3.21 工作区API</h3><h4 id="3-21-1-获取热门文档"><a href="#3-21-1-获取热门文档" class="headerlink" title="3.21.1 获取热门文档"></a>3.21.1 获取热门文档</h4><p><strong>接口</strong>：<code>GET /api/v1/files/workspace/hot-documents</code></p>
<p><strong>参数</strong>：</p>
<ul>
<li><code>limit</code> (int, 可选)：返回数量，默认10</li>
</ul>
<h4 id="3-21-2-获取最近访问"><a href="#3-21-2-获取最近访问" class="headerlink" title="3.21.2 获取最近访问"></a>3.21.2 获取最近访问</h4><p><strong>接口</strong>：<code>GET /api/v1/files/workspace/recent-access</code></p>
<p><strong>参数</strong>：</p>
<ul>
<li><code>limit</code> (int, 可选)：返回数量，默认10</li>
</ul>
<h4 id="3-21-3-获取最新上传"><a href="#3-21-3-获取最新上传" class="headerlink" title="3.21.3 获取最新上传"></a>3.21.3 获取最新上传</h4><p><strong>接口</strong>：<code>GET /api/v1/files/workspace/latest-upload</code></p>
<p><strong>参数</strong>：</p>
<ul>
<li><code>limit</code> (int, 可选)：返回数量，默认10</li>
</ul>
<h4 id="3-21-4-获取最新处理"><a href="#3-21-4-获取最新处理" class="headerlink" title="3.21.4 获取最新处理"></a>3.21.4 获取最新处理</h4><p><strong>接口</strong>：<code>GET /api/v1/files/workspace/latest-processed</code></p>
<p><strong>参数</strong>：</p>
<ul>
<li><code>limit</code> (int, 可选)：返回数量，默认10</li>
</ul>
<h3 id="3-22-获取文件内容"><a href="#3-22-获取文件内容" class="headerlink" title="3.22 获取文件内容"></a>3.22 获取文件内容</h3><p><strong>接口</strong>：<code>GET /api/v1/files/content</code></p>
<p><strong>参数</strong>：</p>
<ul>
<li><code>file_id</code> (int, 可选)：文件ID</li>
<li><code>file_path</code> (string, 可选)：文件路径</li>
</ul>
<p><strong>说明</strong>：获取文件的原始内容或Markdown内容</p>
<h3 id="3-23-Mermaid修复"><a href="#3-23-Mermaid修复" class="headerlink" title="3.23 Mermaid修复"></a>3.23 Mermaid修复</h3><p><strong>接口</strong>：<code>POST /api/v1/files/&#123;file_id&#125;/markdown/mermaid/repair</code></p>
<p><strong>路径参数</strong>：</p>
<ul>
<li><code>file_id</code> (int, 必需)：文件ID</li>
</ul>
<p><strong>请求体</strong>：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;block_index&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;mermaid_code&quot;</span><span class="punctuation">:</span> <span class="string">&quot;graph TD\n    A--&gt;B&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;error_message&quot;</span><span class="punctuation">:</span> <span class="string">&quot;错误信息&quot;</span>  <span class="comment">// 可选</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="3-24-更新MIME类型"><a href="#3-24-更新MIME类型" class="headerlink" title="3.24 更新MIME类型"></a>3.24 更新MIME类型</h3><p><strong>接口</strong>：<code>PATCH /api/v1/files/&#123;file_id&#125;/mime-type</code></p>
<p><strong>路径参数</strong>：</p>
<ul>
<li><code>file_id</code> (int, 必需)：文件ID</li>
</ul>
<p><strong>请求体</strong>：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;mime_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;application/pdf&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="3-25-优化分类"><a href="#3-25-优化分类" class="headerlink" title="3.25 优化分类"></a>3.25 优化分类</h3><p><strong>接口</strong>：<code>POST /api/v1/files/&#123;file_id&#125;/optimize-classification</code></p>
<p><strong>路径参数</strong>：</p>
<ul>
<li><code>file_id</code> (int, 必需)：文件ID</li>
</ul>
<p><strong>说明</strong>：使用AI优化文件分类</p>
<h3 id="3-26-获取文件日志"><a href="#3-26-获取文件日志" class="headerlink" title="3.26 获取文件日志"></a>3.26 获取文件日志</h3><p><strong>接口</strong>：<code>GET /api/v1/files/&#123;file_id&#125;/logs</code></p>
<p><strong>路径参数</strong>：</p>
<ul>
<li><code>file_id</code> (int, 必需)：文件ID</li>
</ul>
<h2 id="4-文档处理API"><a href="#4-文档处理API" class="headerlink" title="4. 文档处理API"></a>4. 文档处理API</h2><h3 id="4-1-获取处理状态"><a href="#4-1-获取处理状态" class="headerlink" title="4.1 获取处理状态"></a>4.1 获取处理状态</h3><p><strong>接口</strong>：<code>GET /api/v1/processing/status</code></p>
<p><strong>响应示例</strong>：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;success&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;total_files&quot;</span><span class="punctuation">:</span> <span class="number">100</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;queued&quot;</span><span class="punctuation">:</span> <span class="number">5</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;processing&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;completed&quot;</span><span class="punctuation">:</span> <span class="number">90</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;failed&quot;</span><span class="punctuation">:</span> <span class="number">3</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;timestamp&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2025-10-19T10:00:00&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;response_time_ms&quot;</span><span class="punctuation">:</span> <span class="number">123</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="4-2-获取处理进度"><a href="#4-2-获取处理进度" class="headerlink" title="4.2 获取处理进度"></a>4.2 获取处理进度</h3><p><strong>接口</strong>：<code>GET /api/v1/processing/progress/&#123;file_id&#125;</code></p>
<p><strong>路径参数</strong>：</p>
<ul>
<li><code>file_id</code> (int, 必需)：文件ID</li>
</ul>
<h3 id="4-3-获取处理队列"><a href="#4-3-获取处理队列" class="headerlink" title="4.3 获取处理队列"></a>4.3 获取处理队列</h3><p><strong>接口</strong>：<code>GET /api/v1/processing/queue</code></p>
<p><strong>响应示例</strong>：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;success&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;queued&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;file_id&quot;</span><span class="punctuation">:</span> <span class="number">123</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;filename&quot;</span><span class="punctuation">:</span> <span class="string">&quot;example.pdf&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;status&quot;</span><span class="punctuation">:</span> <span class="string">&quot;queued&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;queued_at&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2025-10-19T10:00:00&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;processing&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;file_id&quot;</span><span class="punctuation">:</span> <span class="number">124</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;filename&quot;</span><span class="punctuation">:</span> <span class="string">&quot;example2.pdf&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;status&quot;</span><span class="punctuation">:</span> <span class="string">&quot;processing&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;started_at&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2025-10-19T10:05:00&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;timestamp&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2025-10-19T10:00:00&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;response_time_ms&quot;</span><span class="punctuation">:</span> <span class="number">123</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="4-4-获取处理统计"><a href="#4-4-获取处理统计" class="headerlink" title="4.4 获取处理统计"></a>4.4 获取处理统计</h3><p><strong>接口</strong>：<code>GET /api/v1/processing/stats</code></p>
<h3 id="4-5-获取监控快照"><a href="#4-5-获取监控快照" class="headerlink" title="4.5 获取监控快照"></a>4.5 获取监控快照</h3><p><strong>接口</strong>：<code>GET /api/v1/processing/monitor-snapshot</code></p>
<h3 id="4-6-获取处理任务列表"><a href="#4-6-获取处理任务列表" class="headerlink" title="4.6 获取处理任务列表"></a>4.6 获取处理任务列表</h3><p><strong>接口</strong>：<code>GET /api/v1/processing/tasks</code></p>
<p><strong>参数</strong>：</p>
<ul>
<li><code>status</code> (string, 可选)：任务状态过滤</li>
<li><code>limit</code> (int, 可选)：返回数量，默认50</li>
</ul>
<h3 id="4-7-获取任务详情"><a href="#4-7-获取任务详情" class="headerlink" title="4.7 获取任务详情"></a>4.7 获取任务详情</h3><p><strong>接口</strong>：<code>GET /api/v1/processing/tasks/&#123;task_id&#125;</code></p>
<p><strong>路径参数</strong>：</p>
<ul>
<li><code>task_id</code> (string, 必需)：任务ID</li>
</ul>
<h3 id="4-8-删除任务"><a href="#4-8-删除任务" class="headerlink" title="4.8 删除任务"></a>4.8 删除任务</h3><p><strong>接口</strong>：<code>DELETE /api/v1/processing/tasks/&#123;task_id&#125;</code></p>
<p><strong>路径参数</strong>：</p>
<ul>
<li><code>task_id</code> (string, 必需)：任务ID</li>
</ul>
<h3 id="4-9-状态流（SSE）"><a href="#4-9-状态流（SSE）" class="headerlink" title="4.9 状态流（SSE）"></a>4.9 状态流（SSE）</h3><p><strong>接口</strong>：<code>GET /api/v1/processing/status-stream</code></p>
<p><strong>说明</strong>：使用 Server-Sent Events (SSE) 实时推送处理状态更新</p>
<h2 id="5-处理详情API"><a href="#5-处理详情API" class="headerlink" title="5. 处理详情API"></a>5. 处理详情API</h2><h3 id="5-1-获取文件处理详情"><a href="#5-1-获取文件处理详情" class="headerlink" title="5.1 获取文件处理详情"></a>5.1 获取文件处理详情</h3><p><strong>接口</strong>：<code>GET /api/v1/processing-detail/files/&#123;file_id&#125;</code></p>
<p><strong>路径参数</strong>：</p>
<ul>
<li><code>file_id</code> (int, 必需)：文件ID</li>
</ul>
<h3 id="5-2-获取活跃处理"><a href="#5-2-获取活跃处理" class="headerlink" title="5.2 获取活跃处理"></a>5.2 获取活跃处理</h3><p><strong>接口</strong>：<code>GET /api/v1/processing-detail/active</code></p>
<h3 id="5-3-获取缓存统计"><a href="#5-3-获取缓存统计" class="headerlink" title="5.3 获取缓存统计"></a>5.3 获取缓存统计</h3><p><strong>接口</strong>：<code>GET /api/v1/processing-detail/cache/stats</code></p>
<h3 id="5-4-获取诊断信息"><a href="#5-4-获取诊断信息" class="headerlink" title="5.4 获取诊断信息"></a>5.4 获取诊断信息</h3><p><strong>接口</strong>：<code>GET /api/v1/processing-detail/diagnostic</code></p>
<h3 id="5-5-修复状态"><a href="#5-5-修复状态" class="headerlink" title="5.5 修复状态"></a>5.5 修复状态</h3><p><strong>接口</strong>：<code>POST /api/v1/processing-detail/fix-status</code></p>
<p><strong>请求体</strong>：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;file_id&quot;</span><span class="punctuation">:</span> <span class="number">123</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;target_status&quot;</span><span class="punctuation">:</span> <span class="string">&quot;completed&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="6-文档对话API-Chat2Doc"><a href="#6-文档对话API-Chat2Doc" class="headerlink" title="6. 文档对话API (Chat2Doc)"></a>6. 文档对话API (Chat2Doc)</h2><h3 id="6-1-搜索文档"><a href="#6-1-搜索文档" class="headerlink" title="6.1 搜索文档"></a>6.1 搜索文档</h3><p><strong>接口</strong>：<code>POST /api/v1/chat2doc/search</code></p>
<p><strong>请求体</strong>：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;query&quot;</span><span class="punctuation">:</span> <span class="string">&quot;自然语言查询&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;mode&quot;</span><span class="punctuation">:</span> <span class="string">&quot;auto&quot;</span><span class="punctuation">,</span>  <span class="comment">// fast/smart/vector/auto</span></span><br><span class="line">  <span class="attr">&quot;output_format&quot;</span><span class="punctuation">:</span> <span class="string">&quot;standard&quot;</span><span class="punctuation">,</span>  <span class="comment">// standard/card/list/custom</span></span><br><span class="line">  <span class="attr">&quot;user_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;uuid&quot;</span><span class="punctuation">,</span>  <span class="comment">// 可选，用于访问统计</span></span><br><span class="line">  <span class="attr">&quot;page&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;page_size&quot;</span><span class="punctuation">:</span> <span class="number">20</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;similarity_threshold&quot;</span><span class="punctuation">:</span> <span class="number">0.7</span><span class="punctuation">,</span>  <span class="comment">// 可选，仅vector模式</span></span><br><span class="line">  <span class="attr">&quot;allow_fallback&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span>  <span class="comment">// 可选，仅vector模式</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p><strong>响应示例</strong>：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;success&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;query&quot;</span><span class="punctuation">:</span> <span class="string">&quot;自然语言查询&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;mode&quot;</span><span class="punctuation">:</span> <span class="string">&quot;auto&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;results&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;file_id&quot;</span><span class="punctuation">:</span> <span class="number">123</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;示例文档.pdf&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;relevance_score&quot;</span><span class="punctuation">:</span> <span class="number">0.95</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;snippets&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;相关片段1&quot;</span><span class="punctuation">,</span> <span class="string">&quot;相关片段2&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;file_path&quot;</span><span class="punctuation">:</span> <span class="string">&quot;documents/example.pdf&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;total&quot;</span><span class="punctuation">:</span> <span class="number">10</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;page&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;page_size&quot;</span><span class="punctuation">:</span> <span class="number">20</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;timestamp&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2025-10-19T10:00:00&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;response_time_ms&quot;</span><span class="punctuation">:</span> <span class="number">123</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="6-2-获取搜索模式"><a href="#6-2-获取搜索模式" class="headerlink" title="6.2 获取搜索模式"></a>6.2 获取搜索模式</h3><p><strong>接口</strong>：<code>GET /api/v1/chat2doc/modes</code></p>
<p><strong>响应示例</strong>：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;success&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;modes&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="punctuation">&#123;</span><span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;fast&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;label&quot;</span><span class="punctuation">:</span> <span class="string">&quot;快速搜索&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span><span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;smart&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;label&quot;</span><span class="punctuation">:</span> <span class="string">&quot;智能搜索&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span><span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;vector&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;label&quot;</span><span class="punctuation">:</span> <span class="string">&quot;向量搜索&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span><span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;auto&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;label&quot;</span><span class="punctuation">:</span> <span class="string">&quot;自动选择&quot;</span><span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;timestamp&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2025-10-19T10:00:00&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;response_time_ms&quot;</span><span class="punctuation">:</span> <span class="number">123</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="6-3-获取输出格式"><a href="#6-3-获取输出格式" class="headerlink" title="6.3 获取输出格式"></a>6.3 获取输出格式</h3><p><strong>接口</strong>：<code>GET /api/v1/chat2doc/formats</code></p>
<h3 id="6-4-健康检查"><a href="#6-4-健康检查" class="headerlink" title="6.4 健康检查"></a>6.4 健康检查</h3><p><strong>接口</strong>：<code>GET /api/v1/chat2doc/health</code></p>
<h2 id="7-系统管理API"><a href="#7-系统管理API" class="headerlink" title="7. 系统管理API"></a>7. 系统管理API</h2><h3 id="7-1-获取系统信息"><a href="#7-1-获取系统信息" class="headerlink" title="7.1 获取系统信息"></a>7.1 获取系统信息</h3><p><strong>接口</strong>：<code>GET /api/v1/system/info</code></p>
<p><strong>响应示例</strong>：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;success&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;v5.10.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;AI NAS&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;local_ip&quot;</span><span class="punctuation">:</span> <span class="string">&quot;192.168.1.100&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;port&quot;</span><span class="punctuation">:</span> <span class="number">8000</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;local_url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http://localhost:8000&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;network_url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http://192.168.1.100:8000&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;api_docs_url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http://192.168.1.100:8000/docs&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;data_storage_path&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/path/to/data&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;system_status&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span>...<span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;stats&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span>...<span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;timestamp&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2025-10-19T10:00:00&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;response_time_ms&quot;</span><span class="punctuation">:</span> <span class="number">123</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="7-2-获取系统时间"><a href="#7-2-获取系统时间" class="headerlink" title="7.2 获取系统时间"></a>7.2 获取系统时间</h3><p><strong>接口</strong>：<code>GET /api/v1/system/time</code></p>
<h3 id="7-3-获取系统状态"><a href="#7-3-获取系统状态" class="headerlink" title="7.3 获取系统状态"></a>7.3 获取系统状态</h3><p><strong>接口</strong>：<code>GET /api/v1/system/status</code></p>
<h3 id="7-4-获取查询缓冲统计"><a href="#7-4-获取查询缓冲统计" class="headerlink" title="7.4 获取查询缓冲统计"></a>7.4 获取查询缓冲统计</h3><p><strong>接口</strong>：<code>GET /api/v1/system/query-buffer/stats</code></p>
<h3 id="7-5-获取连接泄漏状态"><a href="#7-5-获取连接泄漏状态" class="headerlink" title="7.5 获取连接泄漏状态"></a>7.5 获取连接泄漏状态</h3><p><strong>接口</strong>：<code>GET /api/v1/system/connection-leak/status</code></p>
<h3 id="7-6-获取连接泄漏报告"><a href="#7-6-获取连接泄漏报告" class="headerlink" title="7.6 获取连接泄漏报告"></a>7.6 获取连接泄漏报告</h3><p><strong>接口</strong>：<code>GET /api/v1/system/connection-leak/report</code></p>
<h3 id="7-7-获取连接泄漏历史"><a href="#7-7-获取连接泄漏历史" class="headerlink" title="7.7 获取连接泄漏历史"></a>7.7 获取连接泄漏历史</h3><p><strong>接口</strong>：<code>GET /api/v1/system/connection-leak/history</code></p>
<h3 id="7-8-获取连接池状态"><a href="#7-8-获取连接池状态" class="headerlink" title="7.8 获取连接池状态"></a>7.8 获取连接池状态</h3><p><strong>接口</strong>：<code>GET /api/v1/system/pool-status</code></p>
<h3 id="7-9-系统关闭"><a href="#7-9-系统关闭" class="headerlink" title="7.9 系统关闭"></a>7.9 系统关闭</h3><p><strong>接口</strong>：<code>POST /api/v1/system/shutdown</code></p>
<p><strong>说明</strong>：需要管理员权限</p>
<h3 id="7-10-系统重启"><a href="#7-10-系统重启" class="headerlink" title="7.10 系统重启"></a>7.10 系统重启</h3><p><strong>接口</strong>：<code>POST /api/v1/system/restart</code></p>
<p><strong>说明</strong>：需要管理员权限</p>
<h2 id="8-健康检查API"><a href="#8-健康检查API" class="headerlink" title="8. 健康检查API"></a>8. 健康检查API</h2><h3 id="8-1-Ping"><a href="#8-1-Ping" class="headerlink" title="8.1 Ping"></a>8.1 Ping</h3><p><strong>接口</strong>：<code>GET /api/v1/health/ping</code></p>
<p><strong>响应示例</strong>：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;success&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;message&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pong&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;timestamp&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2025-10-19T10:00:00&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;response_time_ms&quot;</span><span class="punctuation">:</span> <span class="number">1</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="8-2-健康检查"><a href="#8-2-健康检查" class="headerlink" title="8.2 健康检查"></a>8.2 健康检查</h3><p><strong>接口</strong>：<code>GET /api/v1/health/check</code></p>
<p><strong>响应示例</strong>：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;success&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;status&quot;</span><span class="punctuation">:</span> <span class="string">&quot;healthy&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;checks&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;database&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ok&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;storage&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ok&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;llm&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ok&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;timestamp&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2025-10-19T10:00:00&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;response_time_ms&quot;</span><span class="punctuation">:</span> <span class="number">123</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="8-3-健康摘要"><a href="#8-3-健康摘要" class="headerlink" title="8.3 健康摘要"></a>8.3 健康摘要</h3><p><strong>接口</strong>：<code>GET /api/v1/health/summary</code></p>
<h3 id="8-4-修复健康问题"><a href="#8-4-修复健康问题" class="headerlink" title="8.4 修复健康问题"></a>8.4 修复健康问题</h3><p><strong>接口</strong>：<code>POST /api/v1/health/fix</code></p>
<p><strong>请求体</strong>：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;checker_name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;database&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;action&quot;</span><span class="punctuation">:</span> <span class="string">&quot;repair&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="8-5-获取监控状态"><a href="#8-5-获取监控状态" class="headerlink" title="8.5 获取监控状态"></a>8.5 获取监控状态</h3><p><strong>接口</strong>：<code>GET /api/v1/health/monitor/status</code></p>
<h3 id="8-6-强制检查"><a href="#8-6-强制检查" class="headerlink" title="8.6 强制检查"></a>8.6 强制检查</h3><p><strong>接口</strong>：<code>POST /api/v1/health/monitor/force-check</code></p>
<h3 id="8-7-状态检查"><a href="#8-7-状态检查" class="headerlink" title="8.7 状态检查"></a>8.7 状态检查</h3><p><strong>接口</strong>：<code>GET /api/v1/health/status-check</code></p>
<h3 id="8-8-获取检查器列表"><a href="#8-8-获取检查器列表" class="headerlink" title="8.8 获取检查器列表"></a>8.8 获取检查器列表</h3><p><strong>接口</strong>：<code>GET /api/v1/health/checkers</code></p>
<h3 id="8-9-数据存储检查"><a href="#8-9-数据存储检查" class="headerlink" title="8.9 数据存储检查"></a>8.9 数据存储检查</h3><p><strong>接口</strong>：<code>POST /api/v1/health/check/data-storage</code></p>
<h3 id="8-10-运行检查器"><a href="#8-10-运行检查器" class="headerlink" title="8.10 运行检查器"></a>8.10 运行检查器</h3><p><strong>接口</strong>：<code>POST /api/v1/health/check/&#123;checker_name&#125;</code></p>
<p><strong>路径参数</strong>：</p>
<ul>
<li><code>checker_name</code> (string, 必需)：检查器名称</li>
</ul>
<h3 id="8-11-实时日志"><a href="#8-11-实时日志" class="headerlink" title="8.11 实时日志"></a>8.11 实时日志</h3><p><strong>接口</strong>：<code>GET /api/v1/health/logs/realtime</code></p>
<p><strong>说明</strong>：使用 Server-Sent Events (SSE) 实时推送健康检查日志</p>
<h3 id="8-12-深度分析"><a href="#8-12-深度分析" class="headerlink" title="8.12 深度分析"></a>8.12 深度分析</h3><p><strong>接口</strong>：<code>POST /api/v1/health/deep-analysis/run</code></p>
<h3 id="8-13-获取深度分析状态"><a href="#8-13-获取深度分析状态" class="headerlink" title="8.13 获取深度分析状态"></a>8.13 获取深度分析状态</h3><p><strong>接口</strong>：<code>GET /api/v1/health/deep-analysis/status</code></p>
<h3 id="8-14-维护检查"><a href="#8-14-维护检查" class="headerlink" title="8.14 维护检查"></a>8.14 维护检查</h3><p><strong>接口</strong>：<code>GET /api/v1/health/maintenance/check</code></p>
<h3 id="8-15-数据库维护"><a href="#8-15-数据库维护" class="headerlink" title="8.15 数据库维护"></a>8.15 数据库维护</h3><p><strong>接口</strong>：<code>POST /api/v1/health/maintenance/vacuum</code></p>
<h3 id="8-16-获取维护建议"><a href="#8-16-获取维护建议" class="headerlink" title="8.16 获取维护建议"></a>8.16 获取维护建议</h3><p><strong>接口</strong>：<code>GET /api/v1/health/maintenance/recommendations</code></p>
<h2 id="9-统计API"><a href="#9-统计API" class="headerlink" title="9. 统计API"></a>9. 统计API</h2><h3 id="9-1-获取系统摘要"><a href="#9-1-获取系统摘要" class="headerlink" title="9.1 获取系统摘要"></a>9.1 获取系统摘要</h3><p><strong>接口</strong>：<code>GET /api/v1/stats/summary</code></p>
<p><strong>响应示例</strong>：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;success&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;total_files&quot;</span><span class="punctuation">:</span> <span class="number">100</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;total_size&quot;</span><span class="punctuation">:</span> <span class="number">1024000000</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;completed_files&quot;</span><span class="punctuation">:</span> <span class="number">90</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;failed_files&quot;</span><span class="punctuation">:</span> <span class="number">3</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;processing_files&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;queued_files&quot;</span><span class="punctuation">:</span> <span class="number">5</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;timestamp&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2025-10-19T10:00:00&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;response_time_ms&quot;</span><span class="punctuation">:</span> <span class="number">123</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="9-2-获取Token使用统计"><a href="#9-2-获取Token使用统计" class="headerlink" title="9.2 获取Token使用统计"></a>9.2 获取Token使用统计</h3><p><strong>接口</strong>：<code>GET /api/v1/stats/tokens</code></p>
<p><strong>响应示例</strong>：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;success&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;total_llm_requests&quot;</span><span class="punctuation">:</span> <span class="number">1000</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;total_llm_tokens&quot;</span><span class="punctuation">:</span> <span class="number">500000</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;total_vlm_requests&quot;</span><span class="punctuation">:</span> <span class="number">100</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;total_vlm_tokens&quot;</span><span class="punctuation">:</span> <span class="number">200000</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;timestamp&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2025-10-19T10:00:00&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;response_time_ms&quot;</span><span class="punctuation">:</span> <span class="number">123</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="9-3-获取仪表板数据"><a href="#9-3-获取仪表板数据" class="headerlink" title="9.3 获取仪表板数据"></a>9.3 获取仪表板数据</h3><p><strong>接口</strong>：<code>GET /api/v1/stats/dashboard</code></p>
<h2 id="10-日志API"><a href="#10-日志API" class="headerlink" title="10. 日志API"></a>10. 日志API</h2><h3 id="10-1-创建日志"><a href="#10-1-创建日志" class="headerlink" title="10.1 创建日志"></a>10.1 创建日志</h3><p><strong>接口</strong>：<code>POST /api/v1/logs/</code></p>
<p><strong>请求体</strong>：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;level&quot;</span><span class="punctuation">:</span> <span class="string">&quot;info&quot;</span><span class="punctuation">,</span>  <span class="comment">// debug/info/warning/error/critical</span></span><br><span class="line">  <span class="attr">&quot;category&quot;</span><span class="punctuation">:</span> <span class="string">&quot;system&quot;</span><span class="punctuation">,</span>  <span class="comment">// system/api/upload/processing/user/security/performance/database/external</span></span><br><span class="line">  <span class="attr">&quot;event&quot;</span><span class="punctuation">:</span> <span class="string">&quot;事件名称&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;message&quot;</span><span class="punctuation">:</span> <span class="string">&quot;日志消息&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;details&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span>  <span class="comment">// 可选</span></span><br><span class="line">  <span class="attr">&quot;user_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;uuid&quot;</span><span class="punctuation">,</span>  <span class="comment">// 可选</span></span><br><span class="line">  <span class="attr">&quot;session_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;session_id&quot;</span><span class="punctuation">,</span>  <span class="comment">// 可选</span></span><br><span class="line">  <span class="attr">&quot;duration_ms&quot;</span><span class="punctuation">:</span> <span class="number">123</span><span class="punctuation">,</span>  <span class="comment">// 可选</span></span><br><span class="line">  <span class="attr">&quot;error_code&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ERROR_CODE&quot;</span><span class="punctuation">,</span>  <span class="comment">// 可选</span></span><br><span class="line">  <span class="attr">&quot;stack_trace&quot;</span><span class="punctuation">:</span> <span class="string">&quot;堆栈跟踪&quot;</span>  <span class="comment">// 可选</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="10-2-获取日志列表"><a href="#10-2-获取日志列表" class="headerlink" title="10.2 获取日志列表"></a>10.2 获取日志列表</h3><p><strong>接口</strong>：<code>GET /api/v1/logs/</code></p>
<p><strong>参数</strong>：</p>
<ul>
<li><code>level</code> (string, 可选)：日志级别</li>
<li><code>category</code> (string, 可选)：日志类别</li>
<li><code>start_date</code> (string, 可选)：开始日期</li>
<li><code>end_date</code> (string, 可选)：结束日期</li>
<li><code>page</code> (int, 可选)：页码，默认1</li>
<li><code>page_size</code> (int, 可选)：每页数量，默认20</li>
</ul>
<h3 id="10-3-获取文件日志"><a href="#10-3-获取文件日志" class="headerlink" title="10.3 获取文件日志"></a>10.3 获取文件日志</h3><p><strong>接口</strong>：<code>GET /api/v1/logs/file/&#123;file_id&#125;</code></p>
<p><strong>路径参数</strong>：</p>
<ul>
<li><code>file_id</code> (int, 必需)：文件ID</li>
</ul>
<h3 id="10-4-获取日志详情"><a href="#10-4-获取日志详情" class="headerlink" title="10.4 获取日志详情"></a>10.4 获取日志详情</h3><p><strong>接口</strong>：<code>GET /api/v1/logs/&#123;log_id&#125;</code></p>
<p><strong>路径参数</strong>：</p>
<ul>
<li><code>log_id</code> (int, 必需)：日志ID</li>
</ul>
<h3 id="10-5-获取日志统计摘要"><a href="#10-5-获取日志统计摘要" class="headerlink" title="10.5 获取日志统计摘要"></a>10.5 获取日志统计摘要</h3><p><strong>接口</strong>：<code>GET /api/v1/logs/stats/summary</code></p>
<h3 id="10-6-删除日志"><a href="#10-6-删除日志" class="headerlink" title="10.6 删除日志"></a>10.6 删除日志</h3><p><strong>接口</strong>：<code>DELETE /api/v1/logs/&#123;log_id&#125;</code></p>
<p><strong>路径参数</strong>：</p>
<ul>
<li><code>log_id</code> (int, 必需)：日志ID</li>
</ul>
<h2 id="11-任务管理API"><a href="#11-任务管理API" class="headerlink" title="11. 任务管理API"></a>11. 任务管理API</h2><h3 id="11-1-获取任务状态"><a href="#11-1-获取任务状态" class="headerlink" title="11.1 获取任务状态"></a>11.1 获取任务状态</h3><p><strong>接口</strong>：<code>GET /api/v1/tasks/&#123;task_id&#125;</code></p>
<p><strong>路径参数</strong>：</p>
<ul>
<li><code>task_id</code> (string, 必需)：任务ID</li>
</ul>
<h3 id="11-2-获取任务管理器性能"><a href="#11-2-获取任务管理器性能" class="headerlink" title="11.2 获取任务管理器性能"></a>11.2 获取任务管理器性能</h3><p><strong>接口</strong>：<code>GET /api/v1/tasks/performance</code></p>
<h3 id="11-3-重置性能统计"><a href="#11-3-重置性能统计" class="headerlink" title="11.3 重置性能统计"></a>11.3 重置性能统计</h3><p><strong>接口</strong>：<code>POST /api/v1/tasks/performance/reset</code></p>
<h3 id="11-4-获取任务列表"><a href="#11-4-获取任务列表" class="headerlink" title="11.4 获取任务列表"></a>11.4 获取任务列表</h3><p><strong>接口</strong>：<code>GET /api/v1/tasks/</code></p>
<p><strong>参数</strong>：</p>
<ul>
<li><code>status</code> (string, 可选)：任务状态过滤</li>
<li><code>limit</code> (int, 可选)：返回数量，默认50</li>
</ul>
<h3 id="11-5-删除任务"><a href="#11-5-删除任务" class="headerlink" title="11.5 删除任务"></a>11.5 删除任务</h3><p><strong>接口</strong>：<code>DELETE /api/v1/tasks/&#123;task_id&#125;</code></p>
<p><strong>路径参数</strong>：</p>
<ul>
<li><code>task_id</code> (string, 必需)：任务ID</li>
</ul>
<h3 id="11-6-获取队列统计"><a href="#11-6-获取队列统计" class="headerlink" title="11.6 获取队列统计"></a>11.6 获取队列统计</h3><p><strong>接口</strong>：<code>GET /api/v1/tasks/queue/stats</code></p>
<h2 id="12-处理时间统计API"><a href="#12-处理时间统计API" class="headerlink" title="12. 处理时间统计API"></a>12. 处理时间统计API</h2><h3 id="12-1-获取文件处理时间"><a href="#12-1-获取文件处理时间" class="headerlink" title="12.1 获取文件处理时间"></a>12.1 获取文件处理时间</h3><p><strong>接口</strong>：<code>GET /api/v1/timing/file/&#123;file_id&#125;/timings</code></p>
<p><strong>路径参数</strong>：</p>
<ul>
<li><code>file_id</code> (int, 必需)：文件ID</li>
</ul>
<h3 id="12-2-获取最新处理时间"><a href="#12-2-获取最新处理时间" class="headerlink" title="12.2 获取最新处理时间"></a>12.2 获取最新处理时间</h3><p><strong>接口</strong>：<code>GET /api/v1/timing/file/&#123;file_id&#125;/latest</code></p>
<p><strong>路径参数</strong>：</p>
<ul>
<li><code>file_id</code> (int, 必需)：文件ID</li>
</ul>
<h3 id="12-3-获取处理器统计"><a href="#12-3-获取处理器统计" class="headerlink" title="12.3 获取处理器统计"></a>12.3 获取处理器统计</h3><p><strong>接口</strong>：<code>GET /api/v1/timing/processor/&#123;processor_name&#125;/stats</code></p>
<p><strong>路径参数</strong>：</p>
<ul>
<li><code>processor_name</code> (string, 必需)：处理器名称</li>
</ul>
<h3 id="12-4-获取文件类型统计"><a href="#12-4-获取文件类型统计" class="headerlink" title="12.4 获取文件类型统计"></a>12.4 获取文件类型统计</h3><p><strong>接口</strong>：<code>GET /api/v1/timing/file-type/&#123;file_type&#125;/stats</code></p>
<p><strong>路径参数</strong>：</p>
<ul>
<li><code>file_type</code> (string, 必需)：文件类型</li>
</ul>
<h3 id="12-5-获取概览"><a href="#12-5-获取概览" class="headerlink" title="12.5 获取概览"></a>12.5 获取概览</h3><p><strong>接口</strong>：<code>GET /api/v1/timing/overview</code></p>
<h2 id="13-配置管理API"><a href="#13-配置管理API" class="headerlink" title="13. 配置管理API"></a>13. 配置管理API</h2><h3 id="13-1-获取配置"><a href="#13-1-获取配置" class="headerlink" title="13.1 获取配置"></a>13.1 获取配置</h3><p><strong>接口</strong>：<code>GET /api/v1/config/</code></p>
<h3 id="13-2-获取上传配置"><a href="#13-2-获取上传配置" class="headerlink" title="13.2 获取上传配置"></a>13.2 获取上传配置</h3><p><strong>接口</strong>：<code>GET /api/v1/config/upload</code></p>
<h3 id="13-3-获取状态配置"><a href="#13-3-获取状态配置" class="headerlink" title="13.3 获取状态配置"></a>13.3 获取状态配置</h3><p><strong>接口</strong>：<code>GET /api/v1/config/status</code></p>
<h3 id="13-4-获取日志级别"><a href="#13-4-获取日志级别" class="headerlink" title="13.4 获取日志级别"></a>13.4 获取日志级别</h3><p><strong>接口</strong>：<code>GET /api/v1/config/logging/level</code></p>
<h3 id="13-5-设置日志级别"><a href="#13-5-设置日志级别" class="headerlink" title="13.5 设置日志级别"></a>13.5 设置日志级别</h3><p><strong>接口</strong>：<code>POST /api/v1/config/logging/level</code></p>
<p><strong>请求体</strong>：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;level&quot;</span><span class="punctuation">:</span> <span class="string">&quot;INFO&quot;</span>  <span class="comment">// DEBUG/INFO/WARNING/ERROR/CRITICAL</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="13-6-重新加载日志配置"><a href="#13-6-重新加载日志配置" class="headerlink" title="13.6 重新加载日志配置"></a>13.6 重新加载日志配置</h3><p><strong>接口</strong>：<code>POST /api/v1/config/logging/reload</code></p>
<h2 id="14-用户管理API"><a href="#14-用户管理API" class="headerlink" title="14. 用户管理API"></a>14. 用户管理API</h2><h3 id="14-1-获取用户列表"><a href="#14-1-获取用户列表" class="headerlink" title="14.1 获取用户列表"></a>14.1 获取用户列表</h3><p><strong>接口</strong>：<code>GET /api/v1/user-management/users</code></p>
<p><strong>参数</strong>：</p>
<ul>
<li><code>page</code> (int, 可选)：页码，默认1</li>
<li><code>page_size</code> (int, 可选)：每页数量，默认20</li>
<li><code>search</code> (string, 可选)：搜索关键词</li>
<li><code>role</code> (string, 可选)：角色过滤</li>
<li><code>is_active</code> (bool, 可选)：是否激活过滤</li>
</ul>
<h3 id="14-2-创建用户"><a href="#14-2-创建用户" class="headerlink" title="14.2 创建用户"></a>14.2 创建用户</h3><p><strong>接口</strong>：<code>POST /api/v1/user-management/users</code></p>
<p><strong>请求体</strong>：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;username&quot;</span><span class="punctuation">:</span> <span class="string">&quot;user123&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;email&quot;</span><span class="punctuation">:</span> <span class="string">&quot;user@example.com&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;password&quot;</span><span class="punctuation">:</span> <span class="string">&quot;password123&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;display_name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;显示名称&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;role&quot;</span><span class="punctuation">:</span> <span class="string">&quot;user&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="14-3-更新用户"><a href="#14-3-更新用户" class="headerlink" title="14.3 更新用户"></a>14.3 更新用户</h3><p><strong>接口</strong>：<code>PUT /api/v1/user-management/users/&#123;user_id&#125;</code></p>
<p><strong>路径参数</strong>：</p>
<ul>
<li><code>user_id</code> (string, 必需)：用户ID</li>
</ul>
<p><strong>请求体</strong>：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;display_name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;新显示名称&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;role&quot;</span><span class="punctuation">:</span> <span class="string">&quot;admin&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;is_active&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="14-4-删除用户"><a href="#14-4-删除用户" class="headerlink" title="14.4 删除用户"></a>14.4 删除用户</h3><p><strong>接口</strong>：<code>DELETE /api/v1/user-management/users/&#123;user_id&#125;</code></p>
<p><strong>路径参数</strong>：</p>
<ul>
<li><code>user_id</code> (string, 必需)：用户ID</li>
</ul>
<h3 id="14-5-批准用户"><a href="#14-5-批准用户" class="headerlink" title="14.5 批准用户"></a>14.5 批准用户</h3><p><strong>接口</strong>：<code>POST /api/v1/user-management/users/&#123;user_id&#125;/approve</code></p>
<p><strong>路径参数</strong>：</p>
<ul>
<li><code>user_id</code> (string, 必需)：用户ID</li>
</ul>
<h3 id="14-6-拒绝用户"><a href="#14-6-拒绝用户" class="headerlink" title="14.6 拒绝用户"></a>14.6 拒绝用户</h3><p><strong>接口</strong>：<code>POST /api/v1/user-management/users/&#123;user_id&#125;/reject</code></p>
<p><strong>路径参数</strong>：</p>
<ul>
<li><code>user_id</code> (string, 必需)：用户ID</li>
</ul>
<h3 id="14-7-重置密码"><a href="#14-7-重置密码" class="headerlink" title="14.7 重置密码"></a>14.7 重置密码</h3><p><strong>接口</strong>：<code>POST /api/v1/user-management/users/&#123;user_id&#125;/reset-password</code></p>
<p><strong>路径参数</strong>：</p>
<ul>
<li><code>user_id</code> (string, 必需)：用户ID</li>
</ul>
<p><strong>请求体</strong>：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;new_password&quot;</span><span class="punctuation">:</span> <span class="string">&quot;new_password123&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="14-8-获取用户配置"><a href="#14-8-获取用户配置" class="headerlink" title="14.8 获取用户配置"></a>14.8 获取用户配置</h3><p><strong>接口</strong>：<code>GET /api/v1/user-management/config</code></p>
<h3 id="14-9-更新用户配置"><a href="#14-9-更新用户配置" class="headerlink" title="14.9 更新用户配置"></a>14.9 更新用户配置</h3><p><strong>接口</strong>：<code>PUT /api/v1/user-management/config</code></p>
<h3 id="14-10-获取待审核用户"><a href="#14-10-获取待审核用户" class="headerlink" title="14.10 获取待审核用户"></a>14.10 获取待审核用户</h3><p><strong>接口</strong>：<code>GET /api/v1/user-management/pending-users</code></p>
<h3 id="14-11-获取公开统计"><a href="#14-11-获取公开统计" class="headerlink" title="14.11 获取公开统计"></a>14.11 获取公开统计</h3><p><strong>接口</strong>：<code>GET /api/v1/user-management/public-stats</code></p>
<h3 id="14-12-获取登录失败统计"><a href="#14-12-获取登录失败统计" class="headerlink" title="14.12 获取登录失败统计"></a>14.12 获取登录失败统计</h3><p><strong>接口</strong>：<code>GET /api/v1/user-management/login-failure-stats</code></p>
<h3 id="14-13-获取用户统计"><a href="#14-13-获取用户统计" class="headerlink" title="14.13 获取用户统计"></a>14.13 获取用户统计</h3><p><strong>接口</strong>：<code>GET /api/v1/user-management/stats</code></p>
<h3 id="14-14-获取用户资料"><a href="#14-14-获取用户资料" class="headerlink" title="14.14 获取用户资料"></a>14.14 获取用户资料</h3><p><strong>接口</strong>：<code>GET /api/v1/user-management/users/&#123;user_id&#125;/profile</code></p>
<p><strong>路径参数</strong>：</p>
<ul>
<li><code>user_id</code> (string, 必需)：用户ID</li>
</ul>
<h3 id="14-15-搜索用户"><a href="#14-15-搜索用户" class="headerlink" title="14.15 搜索用户"></a>14.15 搜索用户</h3><p><strong>接口</strong>：<code>GET /api/v1/user-management/search</code></p>
<p><strong>参数</strong>：</p>
<ul>
<li><code>query</code> (string, 必需)：搜索关键词</li>
<li><code>page</code> (int, 可选)：页码，默认1</li>
<li><code>page_size</code> (int, 可选)：每页数量，默认20</li>
</ul>
<h2 id="15-权限管理API"><a href="#15-权限管理API" class="headerlink" title="15. 权限管理API"></a>15. 权限管理API</h2><h3 id="15-1-获取权限列表"><a href="#15-1-获取权限列表" class="headerlink" title="15.1 获取权限列表"></a>15.1 获取权限列表</h3><p><strong>接口</strong>：<code>GET /api/v1/permission-management/permissions</code></p>
<h3 id="15-2-更新权限"><a href="#15-2-更新权限" class="headerlink" title="15.2 更新权限"></a>15.2 更新权限</h3><p><strong>接口</strong>：<code>PUT /api/v1/permission-management/permissions/&#123;permission_id&#125;</code></p>
<p><strong>路径参数</strong>：</p>
<ul>
<li><code>permission_id</code> (string, 必需)：权限ID</li>
</ul>
<h3 id="15-3-删除权限"><a href="#15-3-删除权限" class="headerlink" title="15.3 删除权限"></a>15.3 删除权限</h3><p><strong>接口</strong>：<code>DELETE /api/v1/permission-management/permissions/&#123;permission_id&#125;</code></p>
<p><strong>路径参数</strong>：</p>
<ul>
<li><code>permission_id</code> (string, 必需)：权限ID</li>
</ul>
<h3 id="15-4-获取用户权限"><a href="#15-4-获取用户权限" class="headerlink" title="15.4 获取用户权限"></a>15.4 获取用户权限</h3><p><strong>接口</strong>：<code>GET /api/v1/permission-management/users/&#123;user_id&#125;/permissions</code></p>
<p><strong>路径参数</strong>：</p>
<ul>
<li><code>user_id</code> (string, 必需)：用户ID</li>
</ul>
<h3 id="15-5-分配用户权限"><a href="#15-5-分配用户权限" class="headerlink" title="15.5 分配用户权限"></a>15.5 分配用户权限</h3><p><strong>接口</strong>：<code>POST /api/v1/permission-management/users/&#123;user_id&#125;/permissions</code></p>
<p><strong>路径参数</strong>：</p>
<ul>
<li><code>user_id</code> (string, 必需)：用户ID</li>
</ul>
<p><strong>请求体</strong>：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;permission_ids&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;permission_id1&quot;</span><span class="punctuation">,</span> <span class="string">&quot;permission_id2&quot;</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="15-6-获取权限配置"><a href="#15-6-获取权限配置" class="headerlink" title="15.6 获取权限配置"></a>15.6 获取权限配置</h3><p><strong>接口</strong>：<code>GET /api/v1/permission-management/config</code></p>
<h3 id="15-7-更新权限配置"><a href="#15-7-更新权限配置" class="headerlink" title="15.7 更新权限配置"></a>15.7 更新权限配置</h3><p><strong>接口</strong>：<code>PUT /api/v1/permission-management/config</code></p>
<h3 id="15-8-获取权限统计"><a href="#15-8-获取权限统计" class="headerlink" title="15.8 获取权限统计"></a>15.8 获取权限统计</h3><p><strong>接口</strong>：<code>GET /api/v1/permission-management/stats</code></p>
<h2 id="16-系统清理API"><a href="#16-系统清理API" class="headerlink" title="16. 系统清理API"></a>16. 系统清理API</h2><h3 id="16-1-扫描临时文件"><a href="#16-1-扫描临时文件" class="headerlink" title="16.1 扫描临时文件"></a>16.1 扫描临时文件</h3><p><strong>接口</strong>：<code>GET /api/v1/system-cleanup/scan-temp-files</code></p>
<h3 id="16-2-清理临时文件"><a href="#16-2-清理临时文件" class="headerlink" title="16.2 清理临时文件"></a>16.2 清理临时文件</h3><p><strong>接口</strong>：<code>POST /api/v1/system-cleanup/cleanup-temp-files</code></p>
<p><strong>请求体</strong>：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;file_patterns&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;*.tmp&quot;</span><span class="punctuation">,</span> <span class="string">&quot;*.log&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;older_than_days&quot;</span><span class="punctuation">:</span> <span class="number">7</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="16-3-优化数据库"><a href="#16-3-优化数据库" class="headerlink" title="16.3 优化数据库"></a>16.3 优化数据库</h3><p><strong>接口</strong>：<code>POST /api/v1/system-cleanup/optimize-database</code></p>
<h3 id="16-4-清理日志"><a href="#16-4-清理日志" class="headerlink" title="16.4 清理日志"></a>16.4 清理日志</h3><p><strong>接口</strong>：<code>POST /api/v1/system-cleanup/clear-logs</code></p>
<p><strong>请求体</strong>：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;older_than_days&quot;</span><span class="punctuation">:</span> <span class="number">30</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;log_levels&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;debug&quot;</span><span class="punctuation">,</span> <span class="string">&quot;info&quot;</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="16-5-重启服务"><a href="#16-5-重启服务" class="headerlink" title="16.5 重启服务"></a>16.5 重启服务</h3><p><strong>接口</strong>：<code>POST /api/v1/system-cleanup/restart-services</code></p>
<h2 id="17-数据健康检查API"><a href="#17-数据健康检查API" class="headerlink" title="17. 数据健康检查API"></a>17. 数据健康检查API</h2><h3 id="17-1-扫描数据健康"><a href="#17-1-扫描数据健康" class="headerlink" title="17.1 扫描数据健康"></a>17.1 扫描数据健康</h3><p><strong>接口</strong>：<code>GET /api/v1/data-health/scan</code></p>
<h3 id="17-2-获取失败文件列表"><a href="#17-2-获取失败文件列表" class="headerlink" title="17.2 获取失败文件列表"></a>17.2 获取失败文件列表</h3><p><strong>接口</strong>：<code>GET /api/v1/data-health/failed-files</code></p>
<p><strong>参数</strong>：</p>
<ul>
<li><code>page</code> (int, 可选)：页码，默认1</li>
<li><code>page_size</code> (int, 可选)：每页数量，默认20</li>
</ul>
<h3 id="17-3-获取孤立文件列表"><a href="#17-3-获取孤立文件列表" class="headerlink" title="17.3 获取孤立文件列表"></a>17.3 获取孤立文件列表</h3><p><strong>接口</strong>：<code>GET /api/v1/data-health/orphaned-files</code></p>
<p><strong>参数</strong>：</p>
<ul>
<li><code>page</code> (int, 可选)：页码，默认1</li>
<li><code>page_size</code> (int, 可选)：每页数量，默认20</li>
</ul>
<h3 id="17-4-重新处理失败文件"><a href="#17-4-重新处理失败文件" class="headerlink" title="17.4 重新处理失败文件"></a>17.4 重新处理失败文件</h3><p><strong>接口</strong>：<code>POST /api/v1/data-health/failed-files/&#123;file_id&#125;/reprocess</code></p>
<p><strong>路径参数</strong>：</p>
<ul>
<li><code>file_id</code> (int, 必需)：文件ID</li>
</ul>
<h3 id="17-5-批量重新处理失败文件"><a href="#17-5-批量重新处理失败文件" class="headerlink" title="17.5 批量重新处理失败文件"></a>17.5 批量重新处理失败文件</h3><p><strong>接口</strong>：<code>POST /api/v1/data-health/failed-files/batch-reprocess</code></p>
<p><strong>请求体</strong>：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;file_ids&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">,</span> <span class="number">2</span><span class="punctuation">,</span> <span class="number">3</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="17-6-删除孤立文件"><a href="#17-6-删除孤立文件" class="headerlink" title="17.6 删除孤立文件"></a>17.6 删除孤立文件</h3><p><strong>接口</strong>：<code>DELETE /api/v1/data-health/orphaned-files</code></p>
<p><strong>请求体</strong>：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;file_ids&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">,</span> <span class="number">2</span><span class="punctuation">,</span> <span class="number">3</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="18-导出API"><a href="#18-导出API" class="headerlink" title="18. 导出API"></a>18. 导出API</h2><h3 id="18-1-导出PDF"><a href="#18-1-导出PDF" class="headerlink" title="18.1 导出PDF"></a>18.1 导出PDF</h3><p><strong>接口</strong>：<code>POST /api/v1/export-pdf/export-pdf</code></p>
<p><strong>请求体</strong>：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;file_id&quot;</span><span class="punctuation">:</span> <span class="number">123</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;options&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;page_size&quot;</span><span class="punctuation">:</span> <span class="string">&quot;A4&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;margin&quot;</span><span class="punctuation">:</span> <span class="string">&quot;normal&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="18-2-获取Word格式模板"><a href="#18-2-获取Word格式模板" class="headerlink" title="18.2 获取Word格式模板"></a>18.2 获取Word格式模板</h3><p><strong>接口</strong>：<code>GET /api/v1/export-word/word-format-templates</code></p>
<h3 id="18-3-导出Word"><a href="#18-3-导出Word" class="headerlink" title="18.3 导出Word"></a>18.3 导出Word</h3><p><strong>接口</strong>：<code>POST /api/v1/export-word/export-word</code></p>
<p><strong>请求体</strong>：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;file_id&quot;</span><span class="punctuation">:</span> <span class="number">123</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;template&quot;</span><span class="punctuation">:</span> <span class="string">&quot;default&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;options&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="19-VLM批量处理API"><a href="#19-VLM批量处理API" class="headerlink" title="19. VLM批量处理API"></a>19. VLM批量处理API</h2><h3 id="19-1-分析单张图片"><a href="#19-1-分析单张图片" class="headerlink" title="19.1 分析单张图片"></a>19.1 分析单张图片</h3><p><strong>接口</strong>：<code>POST /api/v1/vlm-batch/analyze-single</code></p>
<p><strong>请求体</strong>：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;image_url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://example.com/image.jpg&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;prompt&quot;</span><span class="punctuation">:</span> <span class="string">&quot;描述这张图片&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="19-2-批量分析图片"><a href="#19-2-批量分析图片" class="headerlink" title="19.2 批量分析图片"></a>19.2 批量分析图片</h3><p><strong>接口</strong>：<code>POST /api/v1/vlm-batch/analyze-batch</code></p>
<p><strong>请求体</strong>：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;images&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;image_url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://example.com/image1.jpg&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;prompt&quot;</span><span class="punctuation">:</span> <span class="string">&quot;描述这张图片&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;image_url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://example.com/image2.jpg&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;prompt&quot;</span><span class="punctuation">:</span> <span class="string">&quot;描述这张图片&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="19-3-获取处理状态"><a href="#19-3-获取处理状态" class="headerlink" title="19.3 获取处理状态"></a>19.3 获取处理状态</h3><p><strong>接口</strong>：<code>GET /api/v1/vlm-batch/status</code></p>
<h2 id="20-Agent配置API"><a href="#20-Agent配置API" class="headerlink" title="20. Agent配置API"></a>20. Agent配置API</h2><h3 id="20-1-获取模块列表"><a href="#20-1-获取模块列表" class="headerlink" title="20.1 获取模块列表"></a>20.1 获取模块列表</h3><p><strong>接口</strong>：<code>GET /api/v1/agent-config/modules</code></p>
<h3 id="20-2-获取配置"><a href="#20-2-获取配置" class="headerlink" title="20.2 获取配置"></a>20.2 获取配置</h3><p><strong>接口</strong>：<code>GET /api/v1/agent-config/config/&#123;module&#125;/&#123;filename:path&#125;</code></p>
<p><strong>路径参数</strong>：</p>
<ul>
<li><code>module</code> (string, 必需)：模块名称</li>
<li><code>filename</code> (string, 必需)：配置文件名（路径格式）</li>
</ul>
<h3 id="20-3-更新配置"><a href="#20-3-更新配置" class="headerlink" title="20.3 更新配置"></a>20.3 更新配置</h3><p><strong>接口</strong>：<code>PUT /api/v1/agent-config/config/&#123;module&#125;/&#123;filename:path&#125;</code></p>
<p><strong>路径参数</strong>：</p>
<ul>
<li><code>module</code> (string, 必需)：模块名称</li>
<li><code>filename</code> (string, 必需)：配置文件名（路径格式）</li>
</ul>
<p><strong>请求体</strong>：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;content&quot;</span><span class="punctuation">:</span> <span class="string">&quot;配置内容&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="20-4-验证配置"><a href="#20-4-验证配置" class="headerlink" title="20.4 验证配置"></a>20.4 验证配置</h3><p><strong>接口</strong>：<code>POST /api/v1/agent-config/config/&#123;module&#125;/&#123;filename:path&#125;/validate</code></p>
<p><strong>路径参数</strong>：</p>
<ul>
<li><code>module</code> (string, 必需)：模块名称</li>
<li><code>filename</code> (string, 必需)：配置文件名（路径格式）</li>
</ul>
<h2 id="21-事件流API"><a href="#21-事件流API" class="headerlink" title="21. 事件流API"></a>21. 事件流API</h2><h3 id="21-1-事件流（SSE）"><a href="#21-1-事件流（SSE）" class="headerlink" title="21.1 事件流（SSE）"></a>21.1 事件流（SSE）</h3><p><strong>接口</strong>：<code>GET /api/v1/events/stream</code></p>
<p><strong>说明</strong>：使用 Server-Sent Events (SSE) 实时推送系统事件</p>
<h2 id="22-开发工具API（仅开发模式）"><a href="#22-开发工具API（仅开发模式）" class="headerlink" title="22. 开发工具API（仅开发模式）"></a>22. 开发工具API（仅开发模式）</h2><h3 id="22-1-获取数据库统计"><a href="#22-1-获取数据库统计" class="headerlink" title="22.1 获取数据库统计"></a>22.1 获取数据库统计</h3><p><strong>接口</strong>：<code>GET /api/v1/db-browse/stats</code></p>
<p><strong>说明</strong>：需要启用开发功能（<code>enable_dev_features=true</code>）</p>
<h3 id="22-2-获取表列表"><a href="#22-2-获取表列表" class="headerlink" title="22.2 获取表列表"></a>22.2 获取表列表</h3><p><strong>接口</strong>：<code>GET /api/v1/db-browse/tables</code></p>
<p><strong>说明</strong>：需要启用开发功能</p>
<h3 id="22-3-获取表详情"><a href="#22-3-获取表详情" class="headerlink" title="22.3 获取表详情"></a>22.3 获取表详情</h3><p><strong>接口</strong>：<code>GET /api/v1/db-browse/tables/&#123;table_name&#125;</code></p>
<p><strong>路径参数</strong>：</p>
<ul>
<li><code>table_name</code> (string, 必需)：表名</li>
</ul>
<p><strong>说明</strong>：需要启用开发功能</p>
<h3 id="22-4-获取目录数据"><a href="#22-4-获取目录数据" class="headerlink" title="22.4 获取目录数据"></a>22.4 获取目录数据</h3><p><strong>接口</strong>：<code>GET /api/v1/db-browse/directories</code></p>
<p><strong>说明</strong>：需要启用开发功能</p>
<h3 id="22-5-获取文件数据"><a href="#22-5-获取文件数据" class="headerlink" title="22.5 获取文件数据"></a>22.5 获取文件数据</h3><p><strong>接口</strong>：<code>GET /api/v1/db-browse/files</code></p>
<p><strong>说明</strong>：需要启用开发功能</p>
<h3 id="22-6-获取关键词数据"><a href="#22-6-获取关键词数据" class="headerlink" title="22.6 获取关键词数据"></a>22.6 获取关键词数据</h3><p><strong>接口</strong>：<code>GET /api/v1/db-browse/keywords</code></p>
<p><strong>说明</strong>：需要启用开发功能</p>
<h3 id="22-7-获取处理日志数据"><a href="#22-7-获取处理日志数据" class="headerlink" title="22.7 获取处理日志数据"></a>22.7 获取处理日志数据</h3><p><strong>接口</strong>：<code>GET /api/v1/db-browse/processing_logs</code></p>
<p><strong>说明</strong>：需要启用开发功能</p>
<h3 id="22-8-执行SQL查询"><a href="#22-8-执行SQL查询" class="headerlink" title="22.8 执行SQL查询"></a>22.8 执行SQL查询</h3><p><strong>接口</strong>：<code>GET /api/v1/db-browse/query</code></p>
<p><strong>参数</strong>：</p>
<ul>
<li><code>sql</code> (string, 必需)：SQL查询语句</li>
</ul>
<p><strong>说明</strong>：需要启用开发功能，仅支持SELECT查询</p>
<h2 id="23-模块API"><a href="#23-模块API" class="headerlink" title="23. 模块API"></a>23. 模块API</h2><h3 id="23-1-Smart-Chat模块"><a href="#23-1-Smart-Chat模块" class="headerlink" title="23.1 Smart Chat模块"></a>23.1 Smart Chat模块</h3><p>Smart Chat模块的API接口请参考 <code>docs/smart_chat/USER_MANUAL.md</code></p>
<h3 id="23-2-合同管理模块"><a href="#23-2-合同管理模块" class="headerlink" title="23.2 合同管理模块"></a>23.2 合同管理模块</h3><p>合同管理模块的API接口请参考模块文档</p>
<h3 id="23-3-企业查询模块"><a href="#23-3-企业查询模块" class="headerlink" title="23.3 企业查询模块"></a>23.3 企业查询模块</h3><p>企业查询模块的API接口请参考模块文档</p>
<h3 id="23-4-项目流程模块"><a href="#23-4-项目流程模块" class="headerlink" title="23.4 项目流程模块"></a>23.4 项目流程模块</h3><p>项目流程模块的API接口请参考 <code>docs/project_flow/README.md</code></p>
<h2 id="24-错误码说明"><a href="#24-错误码说明" class="headerlink" title="24. 错误码说明"></a>24. 错误码说明</h2><h3 id="24-1-通用错误码"><a href="#24-1-通用错误码" class="headerlink" title="24.1 通用错误码"></a>24.1 通用错误码</h3><ul>
<li><code>SUCCESS</code>：操作成功</li>
<li><code>INVALID_PARAMETER</code>：参数错误</li>
<li><code>UNAUTHORIZED</code>：未授权</li>
<li><code>FORBIDDEN</code>：禁止访问</li>
<li><code>NOT_FOUND</code>：资源不存在</li>
<li><code>INTERNAL_ERROR</code>：服务器内部错误</li>
</ul>
<h3 id="24-2-文件相关错误码"><a href="#24-2-文件相关错误码" class="headerlink" title="24.2 文件相关错误码"></a>24.2 文件相关错误码</h3><ul>
<li><code>FILE_NOT_FOUND</code>：文件不存在</li>
<li><code>FILE_UPLOAD_FAILED</code>：文件上传失败</li>
<li><code>FILE_PROCESSING_FAILED</code>：文件处理失败</li>
<li><code>FILE_ALREADY_EXISTS</code>：文件已存在</li>
</ul>
<h3 id="24-3-用户相关错误码"><a href="#24-3-用户相关错误码" class="headerlink" title="24.3 用户相关错误码"></a>24.3 用户相关错误码</h3><ul>
<li><code>USER_NOT_FOUND</code>：用户不存在</li>
<li><code>USER_ALREADY_EXISTS</code>：用户已存在</li>
<li><code>INVALID_CREDENTIALS</code>：凭证无效</li>
<li><code>PASSWORD_TOO_WEAK</code>：密码太弱</li>
</ul>
<h2 id="25-使用示例"><a href="#25-使用示例" class="headerlink" title="25. 使用示例"></a>25. 使用示例</h2><h3 id="25-1-上传文件"><a href="#25-1-上传文件" class="headerlink" title="25.1 上传文件"></a>25.1 上传文件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">curl -X POST <span class="string">&quot;http://localhost:8000/api/v1/files/upload&quot;</span> \</span><br><span class="line">  -H <span class="string">&quot;Authorization: Bearer &lt;token&gt;&quot;</span> \</span><br><span class="line">  -F <span class="string">&quot;file=@example.pdf&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="25-2-获取文件列表"><a href="#25-2-获取文件列表" class="headerlink" title="25.2 获取文件列表"></a>25.2 获取文件列表</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -X GET <span class="string">&quot;http://localhost:8000/api/v1/files/?skip=0&amp;limit=20&quot;</span> \</span><br><span class="line">  -H <span class="string">&quot;Authorization: Bearer &lt;token&gt;&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="25-3-搜索文档"><a href="#25-3-搜索文档" class="headerlink" title="25.3 搜索文档"></a>25.3 搜索文档</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">curl -X POST <span class="string">&quot;http://localhost:8000/api/v1/chat2doc/search&quot;</span> \</span><br><span class="line">  -H <span class="string">&quot;Authorization: Bearer &lt;token&gt;&quot;</span> \</span><br><span class="line">  -H <span class="string">&quot;Content-Type: application/json&quot;</span> \</span><br><span class="line">  -d <span class="string">&#x27;&#123;</span></span><br><span class="line"><span class="string">    &quot;query&quot;: &quot;自然语言查询&quot;,</span></span><br><span class="line"><span class="string">    &quot;mode&quot;: &quot;auto&quot;,</span></span><br><span class="line"><span class="string">    &quot;page&quot;: 1,</span></span><br><span class="line"><span class="string">    &quot;page_size&quot;: 20</span></span><br><span class="line"><span class="string">  &#125;&#x27;</span></span><br></pre></td></tr></table></figure>

<h3 id="25-4-获取处理状态（SSE）"><a href="#25-4-获取处理状态（SSE）" class="headerlink" title="25.4 获取处理状态（SSE）"></a>25.4 获取处理状态（SSE）</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> eventSource = <span class="keyword">new</span> <span class="title class_">EventSource</span>(<span class="string">&#x27;http://localhost:8000/api/v1/processing/status-stream&#x27;</span>);</span><br><span class="line">eventSource.<span class="property">onmessage</span> = <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> data = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(event.<span class="property">data</span>);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;处理状态更新:&#x27;</span>, data);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="26-总结"><a href="#26-总结" class="headerlink" title="26. 总结"></a>26. 总结</h2><p>AI NAS提供了完整的RESTful API接口，涵盖文件管理、文档处理、智能对话、系统管理等各个方面。所有接口都遵循统一的响应格式，支持异步处理，具备良好的扩展性和可维护性。</p>
<p>通过统一的认证机制、错误处理和日志记录，系统提供了稳定可靠的API服务。同时，通过SSE支持实时状态推送，为前端提供了良好的用户体验。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://1660479817.github.io/AIDF.github.io/2025/12/30/api/" data-id="cmjs96wql0001ci1w77obdnkx" data-title="API接口说明文档" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/AIDF.github.io/tags/API/" rel="tag">API</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/AIDF.github.io/tags/%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3/" rel="tag">接口文档</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-architecture" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/AIDF.github.io/2025/12/30/architecture/" class="article-date">
  <time class="dt-published" datetime="2025-12-30T07:15:42.000Z" itemprop="datePublished">2025-12-30</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/AIDF.github.io/categories/AI-NAS/">AI NAS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/AIDF.github.io/2025/12/30/architecture/">AI NAS 系统架构说明文档</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="AI-NAS-系统架构说明文档"><a href="#AI-NAS-系统架构说明文档" class="headerlink" title="AI NAS 系统架构说明文档"></a>AI NAS 系统架构说明文档</h1><h2 id="文档导航"><a href="#文档导航" class="headerlink" title="文档导航"></a>文档导航</h2><p>本文档提供系统整体架构说明。各模块的详细架构说明请参考：</p>
<ul>
<li><a href="./modules/home/architecture.md">系统首页模块</a></li>
<li><a href="./modules/workspace/architecture.md">文档中心模块</a></li>
<li><a href="./modules/smart_chat/architecture.md">Smart Chat模块</a></li>
<li><a href="./modules/project_center/architecture.md">项目中心模块</a></li>
<li><a href="./modules/data_factory/architecture.md">数据工场模块</a></li>
<li><a href="./modules/management/architecture.md">管理中心模块</a></li>
</ul>
<h2 id="1-项目概述"><a href="#1-项目概述" class="headerlink" title="1. 项目概述"></a>1. 项目概述</h2><p>AI NAS (Artificial Intelligence Data Forge) 是一个基于 MAAS (Model as a Service) 的企业级智能文档管理系统，旨在为企业提供文档转换、知识锻造、智能检索、异常恢复与健康监控的完整能力栈。</p>
<h3 id="1-1-核心特点"><a href="#1-1-核心特点" class="headerlink" title="1.1 核心特点"></a>1.1 核心特点</h3><ol>
<li><strong>从”文档存储”到”知识锻造”</strong>：不仅存储文档，还通过AI智能提取结构化知识，将非结构化文档锻造成统一、可信、可检索的知识底座</li>
<li><strong>从”单一处理”到”多模态智能”</strong>：支持文档、图片、音频、视频等多种格式的智能处理和分析</li>
<li><strong>从”数据系统”到”智能平台”</strong>：提供完整的文档管理、智能对话、项目流程管理等企业级能力</li>
</ol>
<h3 id="1-2-技术栈"><a href="#1-2-技术栈" class="headerlink" title="1.2 技术栈"></a>1.2 技术栈</h3><ul>
<li><strong>Web框架</strong>：FastAPI (异步Web框架)</li>
<li><strong>数据库</strong>：PostgreSQL (双数据库架构：ai_nas核心库 + ai_nas_app业务库)</li>
<li><strong>ORM框架</strong>：SQLAlchemy</li>
<li><strong>文档处理</strong>：MarkItDown + 自研解析器</li>
<li><strong>LLM集成</strong>：OpenAI API (支持多种LLM提供商)</li>
<li><strong>VLM集成</strong>：视觉语言模型支持</li>
<li><strong>向量检索</strong>：Embedding + 向量数据库</li>
<li><strong>异步编程</strong>：Python asyncio</li>
<li><strong>任务调度</strong>：后台任务管理器</li>
<li><strong>版本管理</strong>：Alembic (数据库迁移)</li>
</ul>
<h2 id="2-系统架构"><a href="#2-系统架构" class="headerlink" title="2. 系统架构"></a>2. 系统架构</h2><p>系统采用<strong>分层架构设计</strong>，各层职责清晰，便于维护和扩展。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">┌─────────────────────────────────────────────────────────┐</span><br><span class="line">│                     入口层 (main.py)                      │</span><br><span class="line">│  - 系统启动和初始化                                        │</span><br><span class="line">│  - Web服务启动                                            │</span><br><span class="line">│  - 数据库初始化（双库并行）                                │</span><br><span class="line">│  - 后台服务启动                                            │</span><br><span class="line">└─────────────────────────────────────────────────────────┘</span><br><span class="line">                            ↓</span><br><span class="line">┌─────────────────────────────────────────────────────────┐</span><br><span class="line">│                   Web服务层 (app/api/v1/)                 │</span><br><span class="line">│  - FastAPI应用                                            │</span><br><span class="line">│  - API路由 (统一响应模型)                                 │</span><br><span class="line">│  - 认证和权限中间件                                        │</span><br><span class="line">│  - 请求隔离中间件                                          │</span><br><span class="line">│  - 静态文件服务                                            │</span><br><span class="line">└─────────────────────────────────────────────────────────┘</span><br><span class="line">                            ↓</span><br><span class="line">┌─────────────────────────────────────────────────────────┐</span><br><span class="line">│                 业务逻辑层 (app/services/)                │</span><br><span class="line">│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐ │</span><br><span class="line">│  │  Doc2MD      │  │  FileManage  │  │  Chat2Doc    │ │</span><br><span class="line">│  │  (文档转换)   │  │  (文件管理)   │  │  (文档对话)   │ │</span><br><span class="line">│  └──────────────┘  └──────────────┘  └──────────────┘ │</span><br><span class="line">│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐ │</span><br><span class="line">│  │  Background  │  │  System      │  │  Processing  │ │</span><br><span class="line">│  │  (后台服务)   │  │  (系统服务)   │  │  (处理服务)   │ │</span><br><span class="line">│  └──────────────┘  └──────────────┘  └──────────────┘ │</span><br><span class="line">└─────────────────────────────────────────────────────────┘</span><br><span class="line">                            ↓</span><br><span class="line">┌─────────────────────────────────────────────────────────┐</span><br><span class="line">│                 业务模块层 (app/modules/)                 │</span><br><span class="line">│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐ │</span><br><span class="line">│  │ Smart Chat   │  │  Contract    │  │  Enterprise  │ │</span><br><span class="line">│  │ (智能对话)    │  │  Management  │  │  Query      │ │</span><br><span class="line">│  └──────────────┘  └──────────────┘  └──────────────┘ │</span><br><span class="line">│  ┌──────────────┐                                      │</span><br><span class="line">│  │ Project Flow │                                      │</span><br><span class="line">│  │ (项目流程)    │                                      │</span><br><span class="line">│  └──────────────┘                                      │</span><br><span class="line">└─────────────────────────────────────────────────────────┘</span><br><span class="line">                            ↓</span><br><span class="line">┌─────────────────────────────────────────────────────────┐</span><br><span class="line">│                  核心服务层 (app/core/)                   │</span><br><span class="line">│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐ │</span><br><span class="line">│  │  Config      │  │  Database    │  │  PathManager│ │</span><br><span class="line">│  │  (配置管理)   │  │  (数据库管理)  │  │  (路径管理)  │ │</span><br><span class="line">│  └──────────────┘  └──────────────┘  └──────────────┘ │</span><br><span class="line">│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐ │</span><br><span class="line">│  │  StatusUtils │  │  LLM/VLM     │  │  Logging     │ │</span><br><span class="line">│  │  (状态管理)   │  │  (AI客户端)   │  │  (日志系统)   │ │</span><br><span class="line">│  └──────────────┘  └──────────────┘  └──────────────┘ │</span><br><span class="line">└─────────────────────────────────────────────────────────┘</span><br><span class="line">                            ↓</span><br><span class="line">┌─────────────────────────────────────────────────────────┐</span><br><span class="line">│                  数据层 (双数据库架构)                    │</span><br><span class="line">│  ┌────────────────────┐  ┌────────────────────┐        │</span><br><span class="line">│  │  ai_nas (核心库)   │  │  ai_nas_app (业务库)│        │</span><br><span class="line">│  │  - file_meta       │  │  - 业务模块表       │        │</span><br><span class="line">│  │  - processing_logs │  │  - 用户表          │        │</span><br><span class="line">│  │  - directories     │  │  - 权限表          │        │</span><br><span class="line">│  │  - keywords        │  │  - 模块数据        │        │</span><br><span class="line">│  │  - token_usage     │  │                    │        │</span><br><span class="line">│  └────────────────────┘  └────────────────────┘        │</span><br><span class="line">└─────────────────────────────────────────────────────────┘</span><br></pre></td></tr></table></figure>

<h2 id="3-核心模块说明"><a href="#3-核心模块说明" class="headerlink" title="3. 核心模块说明"></a>3. 核心模块说明</h2><h3 id="3-1-入口层-app-main-py"><a href="#3-1-入口层-app-main-py" class="headerlink" title="3.1 入口层 (app&#x2F;main.py)"></a>3.1 入口层 (app&#x2F;main.py)</h3><p><strong>职责</strong>：</p>
<ul>
<li>系统启动和初始化</li>
<li>Web服务启动（使用uvicorn）</li>
<li>双数据库初始化（并行执行）</li>
<li>后台服务启动</li>
<li>优雅关闭处理</li>
</ul>
<p><strong>关键功能</strong>：</p>
<ul>
<li>数据库连接池初始化（ai_nas + ai_nas_app）</li>
<li>系统配置加载（config.yaml）</li>
<li>日志系统初始化</li>
<li>查询缓冲管理器启动</li>
<li>连接泄漏检测器启动</li>
<li>连接池监控器初始化</li>
<li>AI客户端预热（LLM&#x2F;VLM）</li>
<li>模块加载器初始化</li>
<li>后台任务管理器启动</li>
</ul>
<p><strong>启动流程</strong>：</p>
<ol>
<li>注册信号处理器（SIGINT&#x2F;SIGTERM）</li>
<li>清理旧的网络连接</li>
<li>确保目录存在</li>
<li>并行初始化双数据库（ai_nas + ai_nas_app）</li>
<li>初始化查询缓冲管理器</li>
<li>启动连接泄漏检测器</li>
<li>初始化连接池监控器</li>
<li>预热AI客户端（LLM&#x2F;VLM异步预热）</li>
<li>初始化模块加载器</li>
<li>启动后台任务管理器</li>
<li>启动Web应用（阻塞）</li>
</ol>
<h3 id="3-2-Web服务层-app-api-v1"><a href="#3-2-Web服务层-app-api-v1" class="headerlink" title="3.2 Web服务层 (app&#x2F;api&#x2F;v1&#x2F;)"></a>3.2 Web服务层 (app&#x2F;api&#x2F;v1&#x2F;)</h3><p><strong>目录结构</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">app/api/v1/</span><br><span class="line">├── auth.py                    # 认证API</span><br><span class="line">├── user_management.py         # 用户管理API</span><br><span class="line">├── permission_management.py   # 权限管理API</span><br><span class="line">├── files.py                   # 文件管理API</span><br><span class="line">├── processing.py              # 文档处理API</span><br><span class="line">├── processing_detail.py       # 处理详情API</span><br><span class="line">├── chat2doc.py                # 文档对话API</span><br><span class="line">├── config.py                  # 配置管理API</span><br><span class="line">├── health.py                  # 健康检查API</span><br><span class="line">├── stats.py                   # 统计信息API</span><br><span class="line">├── logs.py                    # 日志查询API</span><br><span class="line">├── tasks.py                   # 任务管理API</span><br><span class="line">├── system.py                  # 系统管理API</span><br><span class="line">├── system_cleanup.py          # 系统清理API</span><br><span class="line">├── data_health.py             # 数据健康检查API</span><br><span class="line">├── export_pdf.py              # PDF导出API</span><br><span class="line">├── export_word.py             # Word导出API</span><br><span class="line">├── vlm_batch.py               # VLM批量处理API</span><br><span class="line">├── agent_config.py            # Agent配置API</span><br><span class="line">└── ...                        # 其他API</span><br></pre></td></tr></table></figure>

<p><strong>主要功能</strong>：</p>
<ul>
<li>RESTful API接口（统一响应模型）</li>
<li>认证和权限中间件</li>
<li>请求隔离中间件</li>
<li>API缓存优化</li>
<li>API监控和性能追踪</li>
<li>错误处理和异常捕获</li>
</ul>
<p><strong>统一响应模型</strong>：</p>
<ul>
<li><code>UnifiedBaseResponse</code>：基础响应模型</li>
<li><code>UnifiedDataResponse</code>：数据响应模型</li>
<li><code>UnifiedListResponse</code>：列表响应模型</li>
<li><code>UnifiedErrorResponse</code>：错误响应模型</li>
</ul>
<h3 id="3-3-业务逻辑层-app-services"><a href="#3-3-业务逻辑层-app-services" class="headerlink" title="3.3 业务逻辑层 (app&#x2F;services&#x2F;)"></a>3.3 业务逻辑层 (app&#x2F;services&#x2F;)</h3><h4 id="3-3-1-Doc2MD服务-app-services-doc2md"><a href="#3-3-1-Doc2MD服务-app-services-doc2md" class="headerlink" title="3.3.1 Doc2MD服务 (app&#x2F;services&#x2F;doc2md&#x2F;)"></a>3.3.1 Doc2MD服务 (app&#x2F;services&#x2F;doc2md&#x2F;)</h4><p><strong>职责</strong>：文档转换服务，将各种格式的文档转换为Markdown格式</p>
<p><strong>核心功能</strong>：</p>
<ul>
<li>多格式文档转换（PDF、DOCX、XLSX、PPTX、HTML等）</li>
<li>Markdown生成和增强</li>
<li>质量校验和内容验证</li>
<li>混合解析策略（MarkItDown + 自研解析器）</li>
<li>LLM格式化增强</li>
<li>VLM降级策略（图片文档处理）</li>
</ul>
<p><strong>支持的文档格式</strong>：</p>
<ul>
<li>文档：PDF、DOCX、DOC、RTF</li>
<li>表格：XLSX、XLS、CSV</li>
<li>演示：PPTX、PPT</li>
<li>网页：HTML、HTM</li>
<li>文本：TXT、MD</li>
<li>图片：PNG、JPG、JPEG、GIF、BMP（通过VLM）</li>
</ul>
<h4 id="3-3-2-FileManage服务-app-services-filemanage"><a href="#3-3-2-FileManage服务-app-services-filemanage" class="headerlink" title="3.3.2 FileManage服务 (app&#x2F;services&#x2F;filemanage&#x2F;)"></a>3.3.2 FileManage服务 (app&#x2F;services&#x2F;filemanage&#x2F;)</h4><p><strong>职责</strong>：文件管理服务，管理文件元数据、分类、标签和访问统计</p>
<p><strong>核心功能</strong>：</p>
<ul>
<li>文件元数据管理</li>
<li>多模态文件分类</li>
<li>关键词提取</li>
<li>访问统计和追踪</li>
<li>文件搜索和检索</li>
<li>文件关联管理</li>
</ul>
<p><strong>特点</strong>：</p>
<ul>
<li>使用<code>UnifiedBaseModel</code>作为基类</li>
<li>UUID主键管理</li>
<li>统一的数据模型规范</li>
</ul>
<h4 id="3-3-3-Chat2Doc服务-app-services-chat2doc"><a href="#3-3-3-Chat2Doc服务-app-services-chat2doc" class="headerlink" title="3.3.3 Chat2Doc服务 (app&#x2F;services&#x2F;chat2doc&#x2F;)"></a>3.3.3 Chat2Doc服务 (app&#x2F;services&#x2F;chat2doc&#x2F;)</h4><p><strong>职责</strong>：文档对话服务，基于RAG的智能文档问答</p>
<p><strong>核心功能</strong>：</p>
<ul>
<li>文档检索（向量检索 + 关键词检索）</li>
<li>问答生成</li>
<li>上下文管理</li>
<li>会话记忆</li>
<li>多文档关联查询</li>
</ul>
<h4 id="3-3-4-Background服务-app-services-background"><a href="#3-3-4-Background服务-app-services-background" class="headerlink" title="3.3.4 Background服务 (app&#x2F;services&#x2F;background&#x2F;)"></a>3.3.4 Background服务 (app&#x2F;services&#x2F;background&#x2F;)</h4><p><strong>职责</strong>：后台任务管理服务</p>
<p><strong>核心功能</strong>：</p>
<ul>
<li>异步任务调度</li>
<li>定时任务管理</li>
<li>任务状态追踪</li>
<li>任务重试机制</li>
<li>任务队列管理</li>
</ul>
<h4 id="3-3-5-System服务-app-services-system"><a href="#3-3-5-System服务-app-services-system" class="headerlink" title="3.3.5 System服务 (app&#x2F;services&#x2F;system&#x2F;)"></a>3.3.5 System服务 (app&#x2F;services&#x2F;system&#x2F;)</h4><p><strong>职责</strong>：系统服务，提供系统级功能</p>
<p><strong>核心功能</strong>：</p>
<ul>
<li>健康检查</li>
<li>性能监控</li>
<li>异常恢复</li>
<li>系统清理</li>
<li>资源监控</li>
</ul>
<h4 id="3-3-6-Processing服务-app-services-processing"><a href="#3-3-6-Processing服务-app-services-processing" class="headerlink" title="3.3.6 Processing服务 (app&#x2F;services&#x2F;processing&#x2F;)"></a>3.3.6 Processing服务 (app&#x2F;services&#x2F;processing&#x2F;)</h4><p><strong>职责</strong>：文档处理服务，管理文档处理流程</p>
<p><strong>核心功能</strong>：</p>
<ul>
<li>文档处理任务管理</li>
<li>处理进度追踪</li>
<li>处理检查点管理</li>
<li>处理时间统计</li>
<li>处理日志记录</li>
</ul>
<h3 id="3-4-业务模块层-app-modules"><a href="#3-4-业务模块层-app-modules" class="headerlink" title="3.4 业务模块层 (app&#x2F;modules&#x2F;)"></a>3.4 业务模块层 (app&#x2F;modules&#x2F;)</h3><h4 id="3-4-1-Smart-Chat模块-app-modules-smart-chat"><a href="#3-4-1-Smart-Chat模块-app-modules-smart-chat" class="headerlink" title="3.4.1 Smart Chat模块 (app&#x2F;modules&#x2F;smart_chat&#x2F;)"></a>3.4.1 Smart Chat模块 (app&#x2F;modules&#x2F;smart_chat&#x2F;)</h4><p><strong>职责</strong>：智能对话模块，提供企业级智能对话能力</p>
<p><strong>核心功能</strong>：</p>
<ul>
<li>对话管理</li>
<li>消息处理</li>
<li>执行器框架</li>
<li>11个专业执行器（文档查询、数据分析、代码生成等）</li>
<li>NL→SQL转换</li>
<li>向量检索</li>
<li>会话记忆</li>
</ul>
<p><strong>执行器类型</strong>：</p>
<ul>
<li>文档查询执行器</li>
<li>数据分析执行器</li>
<li>代码生成执行器</li>
<li>任务分解执行器</li>
<li>其他专业执行器</li>
</ul>
<h4 id="3-4-2-Contract-Management模块-app-modules-contract-management"><a href="#3-4-2-Contract-Management模块-app-modules-contract-management" class="headerlink" title="3.4.2 Contract Management模块 (app&#x2F;modules&#x2F;contract_management&#x2F;)"></a>3.4.2 Contract Management模块 (app&#x2F;modules&#x2F;contract_management&#x2F;)</h4><p><strong>职责</strong>：合同管理模块</p>
<p><strong>核心功能</strong>：</p>
<ul>
<li>合同CRUD操作</li>
<li>合同信息提取（AI）</li>
<li>合同对话</li>
<li>合同分析</li>
</ul>
<h4 id="3-4-3-Enterprise-Query模块-app-modules-enterprise-query"><a href="#3-4-3-Enterprise-Query模块-app-modules-enterprise-query" class="headerlink" title="3.4.3 Enterprise Query模块 (app&#x2F;modules&#x2F;enterprise_query&#x2F;)"></a>3.4.3 Enterprise Query模块 (app&#x2F;modules&#x2F;enterprise_query&#x2F;)</h4><p><strong>职责</strong>：企业查询模块</p>
<p><strong>核心功能</strong>：</p>
<ul>
<li>企业信息查询</li>
<li>查询历史管理</li>
<li>账户管理</li>
</ul>
<h4 id="3-4-4-Project-Flow模块-app-modules-project-flow"><a href="#3-4-4-Project-Flow模块-app-modules-project-flow" class="headerlink" title="3.4.4 Project Flow模块 (app&#x2F;modules&#x2F;project_flow&#x2F;)"></a>3.4.4 Project Flow模块 (app&#x2F;modules&#x2F;project_flow&#x2F;)</h4><p><strong>职责</strong>：项目流程管理模块</p>
<p><strong>核心功能</strong>：</p>
<ul>
<li>项目管理</li>
<li>成员管理</li>
<li>记录管理（时间轴）</li>
<li>文档关联</li>
<li>AI生成摘要和总结</li>
<li>统计分析</li>
</ul>
<h3 id="3-5-核心服务层-app-core"><a href="#3-5-核心服务层-app-core" class="headerlink" title="3.5 核心服务层 (app&#x2F;core&#x2F;)"></a>3.5 核心服务层 (app&#x2F;core&#x2F;)</h3><h4 id="3-5-1-Config模块-app-core-config-py"><a href="#3-5-1-Config模块-app-core-config-py" class="headerlink" title="3.5.1 Config模块 (app&#x2F;core&#x2F;config.py)"></a>3.5.1 Config模块 (app&#x2F;core&#x2F;config.py)</h4><p><strong>职责</strong>：统一配置管理</p>
<p><strong>核心功能</strong>：</p>
<ul>
<li>配置加载（YAML配置文件）</li>
<li>环境变量管理</li>
<li>配置验证和默认值</li>
<li>配置缓存</li>
<li>配置热更新</li>
</ul>
<p><strong>配置来源优先级</strong>：</p>
<ol>
<li>环境变量</li>
<li>数据库配置</li>
<li>配置文件（config.yaml）</li>
<li>默认值</li>
</ol>
<h4 id="3-5-2-Database模块-app-core-database-py"><a href="#3-5-2-Database模块-app-core-database-py" class="headerlink" title="3.5.2 Database模块 (app&#x2F;core&#x2F;database.py)"></a>3.5.2 Database模块 (app&#x2F;core&#x2F;database.py)</h4><p><strong>职责</strong>：核心数据库（ai_nas）管理</p>
<p><strong>核心功能</strong>：</p>
<ul>
<li>数据库连接管理</li>
<li>连接池管理</li>
<li>核心表定义（9+1个固定表）</li>
<li>数据库迁移管理（Alembic）</li>
<li>连接泄漏检测</li>
<li>连接池监控和自动调整</li>
</ul>
<p><strong>核心表清单</strong>：</p>
<ol>
<li><code>directories</code> - 目录结构</li>
<li><code>file_meta</code> - 文件元数据</li>
<li><code>garbage_files</code> - 垃圾文件</li>
<li><code>keywords</code> - 关键词</li>
<li><code>processing_checkpoints</code> - 处理进度</li>
<li><code>processing_logs</code> - 处理日志</li>
<li><code>processing_timing</code> - 处理时间</li>
<li><code>system_logs</code> - 系统日志</li>
<li><code>token_usage</code> - Token使用</li>
<li><code>alembic_version</code> - 迁移版本</li>
</ol>
<p><strong>重要约束</strong>：</p>
<ul>
<li>⚠️ <strong>禁止添加任何新表</strong></li>
<li>⚠️ <strong>禁止删除任何核心表</strong></li>
<li>⚠️ <strong>禁止修改表结构（除非通过Alembic迁移）</strong></li>
<li>⚠️ <strong>禁止在此创建业务模块表</strong></li>
</ul>
<h4 id="3-5-3-AppDatabase模块-app-core-app-database-py"><a href="#3-5-3-AppDatabase模块-app-core-app-database-py" class="headerlink" title="3.5.3 AppDatabase模块 (app&#x2F;core&#x2F;app_database.py)"></a>3.5.3 AppDatabase模块 (app&#x2F;core&#x2F;app_database.py)</h4><p><strong>职责</strong>：业务数据库（ai_nas_app）管理</p>
<p><strong>核心功能</strong>：</p>
<ul>
<li>业务数据库连接管理</li>
<li>连接池管理</li>
<li>统一模型基类（UnifiedBaseModel）</li>
<li>UUID主键管理</li>
<li>模块表管理</li>
</ul>
<p><strong>特点</strong>：</p>
<ul>
<li>所有业务模块表使用<code>UnifiedBaseModel</code>作为基类</li>
<li>使用UUID作为主键</li>
<li>支持模块数据隔离</li>
</ul>
<h4 id="3-5-4-PathManager模块-app-core-path-manager-py"><a href="#3-5-4-PathManager模块-app-core-path-manager-py" class="headerlink" title="3.5.4 PathManager模块 (app&#x2F;core&#x2F;path_manager.py)"></a>3.5.4 PathManager模块 (app&#x2F;core&#x2F;path_manager.py)</h4><p><strong>职责</strong>：统一路径管理</p>
<p><strong>核心功能</strong>：</p>
<ul>
<li>相对路径和绝对路径转换</li>
<li>跨平台路径处理</li>
<li>路径验证和规范化</li>
<li>路径计算（统一入口）</li>
</ul>
<p><strong>重要原则</strong>：</p>
<ul>
<li>数据库只存储相对路径</li>
<li>所有路径计算必须通过<code>PathManager</code></li>
<li>禁止硬编码路径</li>
</ul>
<h4 id="3-5-5-StatusUtils模块-app-core-status-utils-py"><a href="#3-5-5-StatusUtils模块-app-core-status-utils-py" class="headerlink" title="3.5.5 StatusUtils模块 (app&#x2F;core&#x2F;status_utils.py)"></a>3.5.5 StatusUtils模块 (app&#x2F;core&#x2F;status_utils.py)</h4><p><strong>职责</strong>：统一状态管理</p>
<p><strong>核心功能</strong>：</p>
<ul>
<li>状态流转管理</li>
<li>状态审计日志</li>
<li>状态回滚和恢复</li>
<li>状态验证</li>
</ul>
<p><strong>重要原则</strong>：</p>
<ul>
<li>所有状态更新必须使用<code>status_utils</code></li>
<li>禁止手写状态流转逻辑</li>
<li>自动记录状态变更审计日志</li>
</ul>
<h4 id="3-5-6-TimeManager模块-app-core-time-manager-py"><a href="#3-5-6-TimeManager模块-app-core-time-manager-py" class="headerlink" title="3.5.6 TimeManager模块 (app&#x2F;core&#x2F;time_manager.py)"></a>3.5.6 TimeManager模块 (app&#x2F;core&#x2F;time_manager.py)</h4><p><strong>职责</strong>：统一时间管理</p>
<p><strong>核心功能</strong>：</p>
<ul>
<li>统一时间获取（<code>get_beijing_time_naive()</code>）</li>
<li>ISO格式时间戳</li>
<li>时区处理</li>
</ul>
<p><strong>重要原则</strong>：</p>
<ul>
<li>统一调用<code>get_beijing_time_naive()</code></li>
<li>禁止使用<code>datetime.now()</code>等本地时间API</li>
<li>时间格式统一为ISO格式</li>
</ul>
<h4 id="3-5-7-LLMClient模块-app-core-llm-client-py"><a href="#3-5-7-LLMClient模块-app-core-llm-client-py" class="headerlink" title="3.5.7 LLMClient模块 (app&#x2F;core&#x2F;llm_client.py)"></a>3.5.7 LLMClient模块 (app&#x2F;core&#x2F;llm_client.py)</h4><p><strong>职责</strong>：大语言模型客户端</p>
<p><strong>核心功能</strong>：</p>
<ul>
<li>LLM服务调用</li>
<li>Token使用跟踪</li>
<li>错误处理和重试</li>
<li>异步调用支持</li>
<li>流式响应支持</li>
</ul>
<h4 id="3-5-8-VLMClient模块-app-core-vlm-client-py"><a href="#3-5-8-VLMClient模块-app-core-vlm-client-py" class="headerlink" title="3.5.8 VLMClient模块 (app&#x2F;core&#x2F;vlm_client.py)"></a>3.5.8 VLMClient模块 (app&#x2F;core&#x2F;vlm_client.py)</h4><p><strong>职责</strong>：视觉语言模型客户端</p>
<p><strong>核心功能</strong>：</p>
<ul>
<li>VLM服务调用</li>
<li>图片内容理解</li>
<li>多模态处理</li>
<li>错误处理和重试</li>
</ul>
<h4 id="3-5-9-EmbeddingClient模块-app-core-embedding-client-py"><a href="#3-5-9-EmbeddingClient模块-app-core-embedding-client-py" class="headerlink" title="3.5.9 EmbeddingClient模块 (app&#x2F;core&#x2F;embedding_client.py)"></a>3.5.9 EmbeddingClient模块 (app&#x2F;core&#x2F;embedding_client.py)</h4><p><strong>职责</strong>：向量嵌入客户端</p>
<p><strong>核心功能</strong>：</p>
<ul>
<li>文本向量化</li>
<li>向量检索</li>
<li>相似度计算</li>
</ul>
<h4 id="3-5-10-LoggingConfig模块-app-core-logging-config-py"><a href="#3-5-10-LoggingConfig模块-app-core-logging-config-py" class="headerlink" title="3.5.10 LoggingConfig模块 (app&#x2F;core&#x2F;logging_config.py)"></a>3.5.10 LoggingConfig模块 (app&#x2F;core&#x2F;logging_config.py)</h4><p><strong>职责</strong>：日志系统配置</p>
<p><strong>核心功能</strong>：</p>
<ul>
<li>日志系统初始化</li>
<li>日志格式配置</li>
<li>日志级别管理</li>
<li>日志文件管理</li>
</ul>
<p><strong>重要原则</strong>：</p>
<ul>
<li>仅使用<code>logging.getLogger(__name__)</code></li>
<li>禁止使用<code>print()</code></li>
<li>所有错误日志必须<code>exc_info=True</code></li>
<li>时间格式统一为ISO格式</li>
</ul>
<h4 id="3-5-11-其他核心模块"><a href="#3-5-11-其他核心模块" class="headerlink" title="3.5.11 其他核心模块"></a>3.5.11 其他核心模块</h4><ul>
<li><strong>AuthMiddleware</strong> (<code>app/core/auth_middleware.py</code>)：认证中间件</li>
<li><strong>RequestIsolation</strong> (<code>app/core/request_isolation.py</code>)：请求隔离中间件</li>
<li><strong>ErrorUtils</strong> (<code>app/core/error_utils.py</code>)：错误处理工具</li>
<li><strong>ExceptionHandler</strong> (<code>app/core/exception_handler.py</code>)：异常处理器</li>
<li><strong>UnifiedModels</strong> (<code>app/core/unified_models.py</code>)：统一数据模型基类</li>
<li><strong>ModuleLoader</strong> (<code>app/core/module_loader.py</code>)：模块加载器</li>
<li><strong>CacheManager</strong> (<code>app/core/cache_manager.py</code>)：缓存管理器</li>
<li><strong>QueryBufferManager</strong> (<code>app/core/query_buffer_manager.py</code>)：查询缓冲管理器</li>
<li><strong>ConnectionLeakDetector</strong> (<code>app/core/connection_leak_detector.py</code>)：连接泄漏检测器</li>
<li><strong>PoolMonitor</strong> (<code>app/core/pool_monitor.py</code>)：连接池监控器</li>
<li><strong>PoolAutoAdjuster</strong> (<code>app/core/pool_auto_adjuster.py</code>)：连接池自动调整器</li>
</ul>
<h2 id="4-双数据库架构"><a href="#4-双数据库架构" class="headerlink" title="4. 双数据库架构"></a>4. 双数据库架构</h2><h3 id="4-1-架构设计"><a href="#4-1-架构设计" class="headerlink" title="4.1 架构设计"></a>4.1 架构设计</h3><p>系统采用<strong>双数据库架构</strong>，实现核心数据和业务数据的完全隔离：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">┌─────────────────────────────────────────────────────────┐</span><br><span class="line">│                    ai_nas (核心数据库)                    │</span><br><span class="line">│  - 用途：存储系统核心数据                                  │</span><br><span class="line">│  - 内容：文件元数据、处理日志、系统配置等                  │</span><br><span class="line">│  - 表数量：固定9+1个核心表                                │</span><br><span class="line">│  - 访问权限：仅系统核心服务可访问                          │</span><br><span class="line">│  - 约束：禁止添加新表、禁止业务模块访问                    │</span><br><span class="line">└─────────────────────────────────────────────────────────┘</span><br><span class="line"></span><br><span class="line">┌─────────────────────────────────────────────────────────┐</span><br><span class="line">│                  ai_nas_app (业务数据库)                  │</span><br><span class="line">│  - 用途：存储业务模块数据                                  │</span><br><span class="line">│  - 内容：用户表、权限表、模块业务表等                      │</span><br><span class="line">│  - 表数量：动态增长（模块表）                              │</span><br><span class="line">│  - 访问权限：各模块可直接操作自己的表                      │</span><br><span class="line">│  - 特点：使用UnifiedBaseModel + UUID主键                  │</span><br><span class="line">└─────────────────────────────────────────────────────────┘</span><br></pre></td></tr></table></figure>

<h3 id="4-2-核心数据库-ai-nas"><a href="#4-2-核心数据库-ai-nas" class="headerlink" title="4.2 核心数据库 (ai_nas)"></a>4.2 核心数据库 (ai_nas)</h3><p><strong>职责</strong>：</p>
<ul>
<li>存储系统核心数据</li>
<li>文档处理核心功能数据</li>
<li>系统配置和日志</li>
</ul>
<p><strong>核心表</strong>：</p>
<ol>
<li><code>directories</code> - 目录结构表</li>
<li><code>file_meta</code> - 文件元数据表</li>
<li><code>garbage_files</code> - 垃圾文件表</li>
<li><code>keywords</code> - 关键词表</li>
<li><code>processing_checkpoints</code> - 处理进度检查点表</li>
<li><code>processing_logs</code> - 处理日志表</li>
<li><code>processing_timing</code> - 处理时间统计表</li>
<li><code>system_logs</code> - 系统日志表</li>
<li><code>token_usage</code> - Token使用统计表</li>
<li><code>alembic_version</code> - Alembic迁移版本表</li>
</ol>
<p><strong>重要约束</strong>：</p>
<ul>
<li>⚠️ <strong>绝对禁止添加任何新表</strong></li>
<li>⚠️ <strong>绝对禁止删除任何核心表</strong></li>
<li>⚠️ <strong>绝对禁止修改表结构（除非通过Alembic迁移）</strong></li>
<li>⚠️ <strong>绝对禁止在此创建业务模块表</strong></li>
</ul>
<h3 id="4-3-业务数据库-ai-nas-app"><a href="#4-3-业务数据库-ai-nas-app" class="headerlink" title="4.3 业务数据库 (ai_nas_app)"></a>4.3 业务数据库 (ai_nas_app)</h3><p><strong>职责</strong>：</p>
<ul>
<li>存储业务模块数据</li>
<li>用户和权限数据</li>
<li>模块业务表</li>
</ul>
<p><strong>特点</strong>：</p>
<ul>
<li>使用<code>UnifiedBaseModel</code>作为统一基类</li>
<li>使用UUID作为主键</li>
<li>支持模块数据隔离</li>
<li>动态表结构（模块可创建自己的表）</li>
</ul>
<p><strong>主要表类型</strong>：</p>
<ul>
<li>用户相关表（users、roles、permissions等）</li>
<li>模块业务表（smart_chat、contract_management、project_flow等）</li>
<li>模块配置表</li>
</ul>
<h3 id="4-4-数据库访问规范"><a href="#4-4-数据库访问规范" class="headerlink" title="4.4 数据库访问规范"></a>4.4 数据库访问规范</h3><p><strong>核心数据库访问</strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> app.core.database <span class="keyword">import</span> get_db</span><br><span class="line"></span><br><span class="line"><span class="comment"># 仅系统核心服务可访问</span></span><br><span class="line"><span class="keyword">with</span> get_db() <span class="keyword">as</span> db:</span><br><span class="line">    <span class="comment"># 访问核心数据库</span></span><br><span class="line">    result = db.query(FileMeta).<span class="built_in">all</span>()</span><br></pre></td></tr></table></figure>

<p><strong>业务数据库访问</strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> app.core.app_database <span class="keyword">import</span> get_app_db</span><br><span class="line"></span><br><span class="line"><span class="comment"># 模块可直接访问业务数据库</span></span><br><span class="line"><span class="keyword">with</span> get_app_db() <span class="keyword">as</span> db:</span><br><span class="line">    <span class="comment"># 访问业务数据库</span></span><br><span class="line">    result = db.query(User).<span class="built_in">all</span>()</span><br></pre></td></tr></table></figure>

<p><strong>重要原则</strong>：</p>
<ul>
<li>禁止跨数据库外键关联</li>
<li>模块不能直接访问核心数据库</li>
<li>核心服务不能直接访问业务数据库（除非必要）</li>
<li>数据库完全隔离，保证部署灵活性</li>
</ul>
<h2 id="5-数据流"><a href="#5-数据流" class="headerlink" title="5. 数据流"></a>5. 数据流</h2><h3 id="5-1-文档上传和处理流程"><a href="#5-1-文档上传和处理流程" class="headerlink" title="5.1 文档上传和处理流程"></a>5.1 文档上传和处理流程</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">用户上传文档</span><br><span class="line">    ↓</span><br><span class="line">Upload API (app/api/v1/files.py)</span><br><span class="line">    ↓</span><br><span class="line">FileManage Service (app/services/filemanage/)</span><br><span class="line">    ↓</span><br><span class="line">Processing Service (app/services/processing/)</span><br><span class="line">    ↓</span><br><span class="line">Doc2MD Service (app/services/doc2md/)</span><br><span class="line">    ├─ MarkItDown解析</span><br><span class="line">    ├─ 自研解析器（降级）</span><br><span class="line">    ├─ LLM格式化增强（可选）</span><br><span class="line">    └─ VLM处理（图片文档）</span><br><span class="line">    ↓</span><br><span class="line">结果处理</span><br><span class="line">    ├─ 保存Markdown文件</span><br><span class="line">    ├─ 提取元数据</span><br><span class="line">    ├─ 提取关键词</span><br><span class="line">    └─ 更新文件元数据</span><br><span class="line">    ↓</span><br><span class="line">数据持久化</span><br><span class="line">    ├─ ai_nas: file_meta, processing_logs</span><br><span class="line">    └─ ai_nas_app: 业务相关表（如需要）</span><br><span class="line">    ↓</span><br><span class="line">返回处理结果</span><br></pre></td></tr></table></figure>

<h3 id="5-2-智能对话流程"><a href="#5-2-智能对话流程" class="headerlink" title="5.2 智能对话流程"></a>5.2 智能对话流程</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">用户发送消息</span><br><span class="line">    ↓</span><br><span class="line">Smart Chat API (app/modules/smart_chat/)</span><br><span class="line">    ↓</span><br><span class="line">Smart Chat Service</span><br><span class="line">    ├─ 指令理解</span><br><span class="line">    ├─ 任务分解</span><br><span class="line">    └─ 执行器选择</span><br><span class="line">    ↓</span><br><span class="line">执行器执行</span><br><span class="line">    ├─ 文档查询执行器</span><br><span class="line">    ├─ 数据分析执行器</span><br><span class="line">    ├─ 代码生成执行器</span><br><span class="line">    └─ 其他执行器</span><br><span class="line">    ↓</span><br><span class="line">结果整合</span><br><span class="line">    ├─ NL→SQL转换（如需要）</span><br><span class="line">    ├─ 向量检索（如需要）</span><br><span class="line">    └─ LLM生成回答</span><br><span class="line">    ↓</span><br><span class="line">返回对话结果</span><br></pre></td></tr></table></figure>

<h3 id="5-3-后台任务流程"><a href="#5-3-后台任务流程" class="headerlink" title="5.3 后台任务流程"></a>5.3 后台任务流程</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">定时任务触发 / 异步任务提交</span><br><span class="line">    ↓</span><br><span class="line">Background Service (app/services/background/)</span><br><span class="line">    ↓</span><br><span class="line">任务队列管理</span><br><span class="line">    ├─ 任务状态更新</span><br><span class="line">    ├─ 任务重试机制</span><br><span class="line">    └─ 任务优先级管理</span><br><span class="line">    ↓</span><br><span class="line">任务执行</span><br><span class="line">    ├─ 文档处理任务</span><br><span class="line">    ├─ 系统清理任务</span><br><span class="line">    └─ 其他后台任务</span><br><span class="line">    ↓</span><br><span class="line">结果记录</span><br><span class="line">    ├─ 更新任务状态</span><br><span class="line">    └─ 记录执行日志</span><br></pre></td></tr></table></figure>

<h2 id="6-异步架构"><a href="#6-异步架构" class="headerlink" title="6. 异步架构"></a>6. 异步架构</h2><h3 id="6-1-异步优先原则"><a href="#6-1-异步优先原则" class="headerlink" title="6.1 异步优先原则"></a>6.1 异步优先原则</h3><p>系统严格遵循异步优先原则：</p>
<ul>
<li><strong>所有I&#x2F;O操作使用async&#x2F;await</strong>：数据库操作、HTTP请求、文件操作</li>
<li><strong>禁止同步阻塞操作</strong>：不使用<code>requests</code>、<code>time.sleep()</code>等</li>
<li><strong>使用异步库</strong>：<ul>
<li>数据库：SQLAlchemy异步模式</li>
<li>HTTP客户端：<code>httpx</code>、<code>aiohttp</code></li>
<li>文件操作：<code>aiofiles</code></li>
<li>LLM调用：异步API调用</li>
</ul>
</li>
</ul>
<h3 id="6-2-并发控制"><a href="#6-2-并发控制" class="headerlink" title="6.2 并发控制"></a>6.2 并发控制</h3><ul>
<li>使用<code>asyncio.gather()</code>、<code>asyncio.create_task()</code>实现并发</li>
<li>使用<code>asyncio.Semaphore</code>控制并发数量</li>
<li>数据库连接池管理连接复用</li>
<li>查询缓冲管理器优化数据库查询</li>
</ul>
<h3 id="6-3-事件循环管理"><a href="#6-3-事件循环管理" class="headerlink" title="6.3 事件循环管理"></a>6.3 事件循环管理</h3><ul>
<li>避免在异步函数中创建新的事件循环</li>
<li>使用<code>asyncio.get_event_loop()</code>或<code>asyncio.get_running_loop()</code></li>
<li>Web应用和后台服务使用独立的事件循环</li>
</ul>
<h2 id="7-扩展性设计"><a href="#7-扩展性设计" class="headerlink" title="7. 扩展性设计"></a>7. 扩展性设计</h2><h3 id="7-1-模块系统"><a href="#7-1-模块系统" class="headerlink" title="7.1 模块系统"></a>7.1 模块系统</h3><p>系统采用模块化架构，支持：</p>
<ul>
<li><strong>独立模块</strong>：每个模块独立开发和部署</li>
<li><strong>统一接口</strong>：模块遵循统一的API规范</li>
<li><strong>数据隔离</strong>：模块数据存储在ai_nas_app数据库</li>
<li><strong>动态加载</strong>：支持模块动态加载和卸载</li>
</ul>
<p><strong>模块开发规范</strong>：</p>
<ul>
<li>使用<code>UnifiedBaseModel</code>作为数据模型基类</li>
<li>使用UUID作为主键</li>
<li>遵循统一的响应模型规范</li>
<li>使用<code>PathManager</code>管理路径</li>
<li>使用<code>status_utils</code>管理状态</li>
</ul>
<h3 id="7-2-服务系统"><a href="#7-2-服务系统" class="headerlink" title="7.2 服务系统"></a>7.2 服务系统</h3><p>系统支持多种服务：</p>
<ul>
<li><strong>Doc2MD服务</strong>：文档转换服务</li>
<li><strong>FileManage服务</strong>：文件管理服务</li>
<li><strong>Chat2Doc服务</strong>：文档对话服务</li>
<li><strong>Background服务</strong>：后台任务服务</li>
<li><strong>System服务</strong>：系统服务</li>
</ul>
<h3 id="7-3-存储系统"><a href="#7-3-存储系统" class="headerlink" title="7.3 存储系统"></a>7.3 存储系统</h3><p>支持多种存储方式：</p>
<ul>
<li><strong>数据库存储</strong>：结构化数据（PostgreSQL）</li>
<li><strong>文件系统存储</strong>：Markdown文件、原始文件</li>
<li><strong>缓存系统</strong>：查询结果缓存、API响应缓存</li>
</ul>
<h2 id="8-错误处理和日志"><a href="#8-错误处理和日志" class="headerlink" title="8. 错误处理和日志"></a>8. 错误处理和日志</h2><h3 id="8-1-错误处理"><a href="#8-1-错误处理" class="headerlink" title="8.1 错误处理"></a>8.1 错误处理</h3><ul>
<li>统一的错误处理机制（<code>UnifiedErrorResponse</code>）</li>
<li>优雅降级策略</li>
<li>错误重试机制</li>
<li>详细的错误日志记录</li>
<li>异常捕获和恢复</li>
</ul>
<h3 id="8-2-日志系统"><a href="#8-2-日志系统" class="headerlink" title="8.2 日志系统"></a>8.2 日志系统</h3><ul>
<li>使用Python <code>logging</code>模块</li>
<li>分级日志（DEBUG、INFO、WARNING、ERROR）</li>
<li>结构化日志记录</li>
<li>日志文件管理</li>
<li>系统日志记录到数据库（<code>system_logs</code>表）</li>
</ul>
<p><strong>日志规范</strong>：</p>
<ul>
<li>仅使用<code>logging.getLogger(__name__)</code></li>
<li>禁止使用<code>print()</code></li>
<li>所有错误日志必须<code>exc_info=True</code></li>
<li>时间格式统一为ISO格式</li>
</ul>
<h2 id="9-性能优化"><a href="#9-性能优化" class="headerlink" title="9. 性能优化"></a>9. 性能优化</h2><h3 id="9-1-数据库优化"><a href="#9-1-数据库优化" class="headerlink" title="9.1 数据库优化"></a>9.1 数据库优化</h3><ul>
<li>连接池管理（自动调整）</li>
<li>查询缓冲管理器</li>
<li>批量操作优先</li>
<li>索引优化</li>
<li>连接泄漏检测</li>
<li>连接池监控</li>
</ul>
<h3 id="9-2-文档处理优化"><a href="#9-2-文档处理优化" class="headerlink" title="9.2 文档处理优化"></a>9.2 文档处理优化</h3><ul>
<li>并发处理</li>
<li>智能重试</li>
<li>处理检查点（断点续传）</li>
<li>处理时间统计和优化</li>
</ul>
<h3 id="9-3-存储优化"><a href="#9-3-存储优化" class="headerlink" title="9.3 存储优化"></a>9.3 存储优化</h3><ul>
<li>文件路径存储（而非内容存储）</li>
<li>缓存系统（查询结果、API响应）</li>
<li>批量操作</li>
</ul>
<h3 id="9-4-API优化"><a href="#9-4-API优化" class="headerlink" title="9.4 API优化"></a>9.4 API优化</h3><ul>
<li>API缓存优化器</li>
<li>API监控和性能追踪</li>
<li>响应时间装饰器</li>
<li>请求隔离中间件</li>
</ul>
<h2 id="10-安全设计"><a href="#10-安全设计" class="headerlink" title="10. 安全设计"></a>10. 安全设计</h2><h3 id="10-1-认证和授权"><a href="#10-1-认证和授权" class="headerlink" title="10.1 认证和授权"></a>10.1 认证和授权</h3><ul>
<li>用户认证系统</li>
<li>角色和权限管理</li>
<li>认证中间件</li>
<li>权限装饰器</li>
</ul>
<h3 id="10-2-输入验证"><a href="#10-2-输入验证" class="headerlink" title="10.2 输入验证"></a>10.2 输入验证</h3><ul>
<li>API接口参数验证（Pydantic）</li>
<li>SQL注入防护（参数化查询）</li>
<li>XSS防护</li>
<li>文件类型验证</li>
</ul>
<h3 id="10-3-敏感信息管理"><a href="#10-3-敏感信息管理" class="headerlink" title="10.3 敏感信息管理"></a>10.3 敏感信息管理</h3><ul>
<li>配置信息通过环境变量传递</li>
<li>敏感配置不提交到代码仓库</li>
<li>配置文件加入<code>.gitignore</code></li>
<li>API密钥加密存储</li>
</ul>
<h3 id="10-4-请求隔离"><a href="#10-4-请求隔离" class="headerlink" title="10.4 请求隔离"></a>10.4 请求隔离</h3><ul>
<li>请求隔离中间件</li>
<li>请求上下文管理</li>
<li>资源清理机制</li>
</ul>
<h2 id="11-部署架构"><a href="#11-部署架构" class="headerlink" title="11. 部署架构"></a>11. 部署架构</h2><h3 id="11-1-开发环境"><a href="#11-1-开发环境" class="headerlink" title="11.1 开发环境"></a>11.1 开发环境</h3><ul>
<li>使用虚拟环境（venv）</li>
<li>Python 3.12+</li>
<li>本地PostgreSQL数据库（双库）</li>
<li>本地文件存储</li>
</ul>
<h3 id="11-2-Docker部署"><a href="#11-2-Docker部署" class="headerlink" title="11.2 Docker部署"></a>11.2 Docker部署</h3><ul>
<li>Docker Compose编排</li>
<li>PostgreSQL容器（双库）</li>
<li>应用容器</li>
<li>静态文件服务</li>
</ul>
<h3 id="11-3-生产环境"><a href="#11-3-生产环境" class="headerlink" title="11.3 生产环境"></a>11.3 生产环境</h3><ul>
<li>支持独立部署各组件</li>
<li>支持水平扩展</li>
<li>支持负载均衡</li>
<li>支持高可用部署</li>
</ul>
<h2 id="12-核心规范"><a href="#12-核心规范" class="headerlink" title="12. 核心规范"></a>12. 核心规范</h2><h3 id="12-1-版本管理"><a href="#12-1-版本管理" class="headerlink" title="12.1 版本管理"></a>12.1 版本管理</h3><ul>
<li><strong>版本唯一源</strong>：<code>app/__init__.py</code>内的<code>__version__</code></li>
<li><strong>统一引用</strong>：所有引用必须<code>from app import __version__</code></li>
<li><strong>版本同步</strong>：文档、工具脚本与代码版本保持同步</li>
</ul>
<h3 id="12-2-时间管理"><a href="#12-2-时间管理" class="headerlink" title="12.2 时间管理"></a>12.2 时间管理</h3><ul>
<li><strong>统一时间函数</strong>：<code>get_beijing_time_naive()</code></li>
<li><strong>禁止使用</strong>：<code>datetime.now()</code>等本地时间API</li>
<li><strong>时间格式</strong>：统一为ISO格式</li>
</ul>
<h3 id="12-3-路径管理"><a href="#12-3-路径管理" class="headerlink" title="12.3 路径管理"></a>12.3 路径管理</h3><ul>
<li><strong>统一路径计算</strong>：所有路径计算必须通过<code>PathManager</code></li>
<li><strong>数据库存储</strong>：只存储相对路径</li>
<li><strong>禁止硬编码</strong>：禁止硬编码路径</li>
</ul>
<h3 id="12-4-状态管理"><a href="#12-4-状态管理" class="headerlink" title="12.4 状态管理"></a>12.4 状态管理</h3><ul>
<li><strong>统一状态流转</strong>：所有状态更新必须使用<code>status_utils</code></li>
<li><strong>禁止手写</strong>：禁止手写状态流转逻辑</li>
<li><strong>自动审计</strong>：自动记录状态变更审计日志</li>
</ul>
<h3 id="12-5-日志规范"><a href="#12-5-日志规范" class="headerlink" title="12.5 日志规范"></a>12.5 日志规范</h3><ul>
<li><strong>统一日志创建</strong>：仅使用<code>logging.getLogger(__name__)</code></li>
<li><strong>禁止print</strong>：禁止使用<code>print()</code></li>
<li><strong>错误日志</strong>：所有错误日志必须<code>exc_info=True</code></li>
<li><strong>时间格式</strong>：统一为ISO格式</li>
</ul>
<h3 id="12-6-API规范"><a href="#12-6-API规范" class="headerlink" title="12.6 API规范"></a>12.6 API规范</h3><ul>
<li><strong>统一响应模型</strong>：必须使用<code>UnifiedBaseResponse</code>系列</li>
<li><strong>禁止直接返回dict</strong>：禁止直接返回<code>dict</code></li>
<li><strong>必填字段</strong>：<code>response_time_ms</code>、<code>timestamp</code>必填</li>
<li><strong>时间字段</strong>：统一使用ISO格式</li>
</ul>
<h2 id="13-总结"><a href="#13-总结" class="headerlink" title="13. 总结"></a>13. 总结</h2><p>AI NAS采用分层架构设计，各层职责清晰，模块化程度高，易于维护和扩展。系统严格遵循异步优先原则，支持高并发处理，具备良好的性能和可扩展性。</p>
<p>通过双数据库架构，系统实现了核心数据和业务数据的完全隔离，保证了系统的灵活性和可维护性。通过模块化设计，系统可以灵活应对不同的业务场景，从简单的文档管理到复杂的智能对话，都能提供高效的解决方案。</p>
<p>系统严格遵循统一的开发规范，包括版本管理、时间管理、路径管理、状态管理、日志规范和API规范，确保了代码的一致性和可维护性。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://1660479817.github.io/AIDF.github.io/2025/12/30/architecture/" data-id="cmjs96wqn0004ci1w17it3nvq" data-title="AI NAS 系统架构说明文档" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/AIDF.github.io/tags/%E6%9E%B6%E6%9E%84/" rel="tag">架构</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/AIDF.github.io/tags/%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84/" rel="tag">系统架构</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-data_factory-api" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/AIDF.github.io/2025/12/30/data_factory-api/" class="article-date">
  <time class="dt-published" datetime="2025-12-30T07:15:42.000Z" itemprop="datePublished">2025-12-30</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/AIDF.github.io/categories/AI-NAS-%E6%95%B0%E6%8D%AE%E5%B7%A5%E5%9C%BA/">AI NAS - 数据工场</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/AIDF.github.io/2025/12/30/data_factory-api/">数据工场模块API接口文档</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="数据工场模块API接口文档"><a href="#数据工场模块API接口文档" class="headerlink" title="数据工场模块API接口文档"></a>数据工场模块API接口文档</h1><h2 id="1-概述"><a href="#1-概述" class="headerlink" title="1. 概述"></a>1. 概述</h2><p>数据工场模块使用的API接口，提供处理状态监控、队列管理、处理统计等功能。</p>
<h3 id="1-1-基础信息"><a href="#1-1-基础信息" class="headerlink" title="1.1 基础信息"></a>1.1 基础信息</h3><ul>
<li><strong>Base URL</strong>：<code>http://localhost:8000</code></li>
<li><strong>API前缀</strong>：<code>/api/v1/processing</code></li>
<li><strong>Content-Type</strong>：<code>application/json</code></li>
</ul>
<h2 id="2-处理状态API"><a href="#2-处理状态API" class="headerlink" title="2. 处理状态API"></a>2. 处理状态API</h2><h3 id="2-1-获取处理状态"><a href="#2-1-获取处理状态" class="headerlink" title="2.1 获取处理状态"></a>2.1 获取处理状态</h3><p><strong>接口</strong>：<code>GET /api/v1/processing/status</code></p>
<p><strong>说明</strong>：获取整体处理状态统计</p>
<p><strong>权限</strong>：需要用户认证</p>
<p><strong>响应示例</strong>：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;success&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;total_files&quot;</span><span class="punctuation">:</span> <span class="number">100</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;queued&quot;</span><span class="punctuation">:</span> <span class="number">5</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;processing&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;completed&quot;</span><span class="punctuation">:</span> <span class="number">90</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;failed&quot;</span><span class="punctuation">:</span> <span class="number">3</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;timestamp&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2025-10-19T10:00:00&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;response_time_ms&quot;</span><span class="punctuation">:</span> <span class="number">45</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-2-获取处理队列"><a href="#2-2-获取处理队列" class="headerlink" title="2.2 获取处理队列"></a>2.2 获取处理队列</h3><p><strong>接口</strong>：<code>GET /api/v1/processing/queue</code></p>
<p><strong>说明</strong>：获取处理队列详情</p>
<p><strong>响应示例</strong>：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;success&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;queued&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;file_id&quot;</span><span class="punctuation">:</span> <span class="number">123</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;filename&quot;</span><span class="punctuation">:</span> <span class="string">&quot;example.pdf&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;status&quot;</span><span class="punctuation">:</span> <span class="string">&quot;queued&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;queued_at&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2025-10-19T10:00:00&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;processing&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;file_id&quot;</span><span class="punctuation">:</span> <span class="number">124</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;filename&quot;</span><span class="punctuation">:</span> <span class="string">&quot;example2.pdf&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;status&quot;</span><span class="punctuation">:</span> <span class="string">&quot;processing&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;started_at&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2025-10-19T10:05:00&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;progress&quot;</span><span class="punctuation">:</span> <span class="number">50</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;timestamp&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2025-10-19T10:00:00&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;response_time_ms&quot;</span><span class="punctuation">:</span> <span class="number">67</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-3-获取处理统计"><a href="#2-3-获取处理统计" class="headerlink" title="2.3 获取处理统计"></a>2.3 获取处理统计</h3><p><strong>接口</strong>：<code>GET /api/v1/processing/stats</code></p>
<p><strong>说明</strong>：获取处理性能统计</p>
<h3 id="2-4-获取监控快照"><a href="#2-4-获取监控快照" class="headerlink" title="2.4 获取监控快照"></a>2.4 获取监控快照</h3><p><strong>接口</strong>：<code>GET /api/v1/processing/monitor-snapshot</code></p>
<p><strong>说明</strong>：获取当前监控快照数据</p>
<h3 id="2-5-状态流（SSE）"><a href="#2-5-状态流（SSE）" class="headerlink" title="2.5 状态流（SSE）"></a>2.5 状态流（SSE）</h3><p><strong>接口</strong>：<code>GET /api/v1/processing/status-stream</code></p>
<p><strong>说明</strong>：使用Server-Sent Events实时推送处理状态更新</p>
<p><strong>响应格式</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">data: &#123;&quot;type&quot;: &quot;status_update&quot;, &quot;data&quot;: &#123;...&#125;&#125;</span><br><span class="line">data: &#123;&quot;type&quot;: &quot;queue_change&quot;, &quot;data&quot;: &#123;...&#125;&#125;</span><br></pre></td></tr></table></figure>

<h2 id="3-处理详情API"><a href="#3-处理详情API" class="headerlink" title="3. 处理详情API"></a>3. 处理详情API</h2><h3 id="3-1-获取文件处理详情"><a href="#3-1-获取文件处理详情" class="headerlink" title="3.1 获取文件处理详情"></a>3.1 获取文件处理详情</h3><p><strong>接口</strong>：<code>GET /api/v1/processing-detail/files/&#123;file_id&#125;</code></p>
<p><strong>路径参数</strong>：</p>
<ul>
<li><code>file_id</code> (int, 必需)：文件ID</li>
</ul>
<p><strong>响应示例</strong>：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;success&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;file_id&quot;</span><span class="punctuation">:</span> <span class="number">123</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;status&quot;</span><span class="punctuation">:</span> <span class="string">&quot;processing&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;current_stage&quot;</span><span class="punctuation">:</span> <span class="string">&quot;parsing&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;progress&quot;</span><span class="punctuation">:</span> <span class="number">60</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;stages&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;initialization&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;status&quot;</span><span class="punctuation">:</span> <span class="string">&quot;completed&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span> <span class="number">1.2</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;parsing&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;status&quot;</span><span class="punctuation">:</span> <span class="string">&quot;processing&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span> <span class="number">5.6</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;timestamp&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2025-10-19T10:00:00&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;response_time_ms&quot;</span><span class="punctuation">:</span> <span class="number">89</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="4-使用示例"><a href="#4-使用示例" class="headerlink" title="4. 使用示例"></a>4. 使用示例</h2><h3 id="4-1-获取处理状态"><a href="#4-1-获取处理状态" class="headerlink" title="4.1 获取处理状态"></a>4.1 获取处理状态</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">loadProcessingStatus</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;/api/v1/processing/status&#x27;</span>);</span><br><span class="line">  <span class="keyword">const</span> data = <span class="keyword">await</span> response.<span class="title function_">json</span>();</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">if</span> (data.<span class="property">success</span>) &#123;</span><br><span class="line">    <span class="title function_">updateStatusDisplay</span>(data.<span class="property">data</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-2-实时状态流"><a href="#4-2-实时状态流" class="headerlink" title="4.2 实时状态流"></a>4.2 实时状态流</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> eventSource = <span class="keyword">new</span> <span class="title class_">EventSource</span>(<span class="string">&#x27;/api/v1/processing/status-stream&#x27;</span>);</span><br><span class="line">eventSource.<span class="property">onmessage</span> = <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> data = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(event.<span class="property">data</span>);</span><br><span class="line">  <span class="keyword">if</span> (data.<span class="property">type</span> === <span class="string">&#x27;status_update&#x27;</span>) &#123;</span><br><span class="line">    <span class="title function_">updateStatus</span>(data.<span class="property">data</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="5-总结"><a href="#5-总结" class="headerlink" title="5. 总结"></a>5. 总结</h2><p>数据工场模块提供了完整的处理监控API，支持实时状态更新和详细的处理信息查询，为前端提供了强大的监控能力。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://1660479817.github.io/AIDF.github.io/2025/12/30/data_factory-api/" data-id="cmjs96wqo0005ci1wczwe8fhy" data-title="数据工场模块API接口文档" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/AIDF.github.io/tags/API/" rel="tag">API</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/AIDF.github.io/tags/%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3/" rel="tag">接口文档</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/AIDF.github.io/tags/%E6%95%B0%E6%8D%AE%E5%B7%A5%E5%9C%BA/" rel="tag">数据工场</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-data_factory-architecture" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/AIDF.github.io/2025/12/30/data_factory-architecture/" class="article-date">
  <time class="dt-published" datetime="2025-12-30T07:15:42.000Z" itemprop="datePublished">2025-12-30</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/AIDF.github.io/categories/AI-NAS-%E6%95%B0%E6%8D%AE%E5%B7%A5%E5%9C%BA/">AI NAS - 数据工场</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/AIDF.github.io/2025/12/30/data_factory-architecture/">数据工场模块架构说明</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="数据工场模块架构说明"><a href="#数据工场模块架构说明" class="headerlink" title="数据工场模块架构说明"></a>数据工场模块架构说明</h1><h2 id="1-模块概述"><a href="#1-模块概述" class="headerlink" title="1. 模块概述"></a>1. 模块概述</h2><p>数据工场是AI NAS的文档处理监控模块，提供文档处理状态监控、处理队列管理、处理统计等功能。</p>
<h3 id="1-1-功能定位"><a href="#1-1-功能定位" class="headerlink" title="1.1 功能定位"></a>1.1 功能定位</h3><ul>
<li><strong>处理监控</strong>：实时监控文档处理状态</li>
<li><strong>队列管理</strong>：查看和管理处理队列</li>
<li><strong>处理统计</strong>：处理性能统计和分析</li>
<li><strong>异常处理</strong>：处理失败文件的恢复</li>
</ul>
<h3 id="1-2-访问路径"><a href="#1-2-访问路径" class="headerlink" title="1.2 访问路径"></a>1.2 访问路径</h3><ul>
<li><strong>URL</strong>：<code>/static/processing_monitor.html</code></li>
<li><strong>文件位置</strong>：<code>static/processing_monitor.html</code></li>
<li><strong>权限要求</strong>：正式用户（USER）或管理员（ADMIN）</li>
</ul>
<h2 id="2-模块架构"><a href="#2-模块架构" class="headerlink" title="2. 模块架构"></a>2. 模块架构</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">┌─────────────────────────────────────────────────────────┐</span><br><span class="line">│                    前端页面层                              │</span><br><span class="line">│  - processing_monitor.html (主页面)                       │</span><br><span class="line">│  - 处理状态监控组件                                        │</span><br><span class="line">│  - 队列管理组件                                            │</span><br><span class="line">│  - 统计图表组件                                            │</span><br><span class="line">└─────────────────────────────────────────────────────────┘</span><br><span class="line">                            ↓</span><br><span class="line">┌─────────────────────────────────────────────────────────┐</span><br><span class="line">│                    API接口层                              │</span><br><span class="line">│  - GET /api/v1/processing/status (处理状态)             │</span><br><span class="line">│  - GET /api/v1/processing/queue (处理队列)              │</span><br><span class="line">│  - GET /api/v1/processing/stats (处理统计)              │</span><br><span class="line">│  - GET /api/v1/processing/monitor-snapshot (监控快照)  │</span><br><span class="line">│  - GET /api/v1/processing/status-stream (状态流)        │</span><br><span class="line">│  - GET /api/v1/processing-detail/files/&#123;id&#125; (处理详情) │</span><br><span class="line">└─────────────────────────────────────────────────────────┘</span><br><span class="line">                            ↓</span><br><span class="line">┌─────────────────────────────────────────────────────────┐</span><br><span class="line">│                   业务服务层                              │</span><br><span class="line">│  - Processing Service (处理服务)                          │</span><br><span class="line">│  - Background Service (后台服务)                         │</span><br><span class="line">│  - Doc2MD Service (文档转换服务)                         │</span><br><span class="line">└─────────────────────────────────────────────────────────┘</span><br><span class="line">                            ↓</span><br><span class="line">┌─────────────────────────────────────────────────────────┐</span><br><span class="line">│                   数据层                                  │</span><br><span class="line">│  - ai_nas: processing_logs, processing_timing          │</span><br><span class="line">│  - ai_nas: file_meta, processing_checkpoints           │</span><br><span class="line">└─────────────────────────────────────────────────────────┘</span><br></pre></td></tr></table></figure>

<h2 id="3-核心组件"><a href="#3-核心组件" class="headerlink" title="3. 核心组件"></a>3. 核心组件</h2><h3 id="3-1-前端组件"><a href="#3-1-前端组件" class="headerlink" title="3.1 前端组件"></a>3.1 前端组件</h3><h4 id="3-1-1-处理状态监控"><a href="#3-1-1-处理状态监控" class="headerlink" title="3.1.1 处理状态监控"></a>3.1.1 处理状态监控</h4><p><strong>功能</strong>：</p>
<ul>
<li>实时显示处理状态</li>
<li>处理进度展示</li>
<li>处理阶段可视化</li>
<li>AI工作指示器</li>
</ul>
<p><strong>处理阶段</strong>：</p>
<ol>
<li><strong>初始化</strong> (initialization)</li>
<li><strong>文件验证</strong> (file_validation)</li>
<li><strong>预处理&#x2F;分析</strong> (preprocessing&#x2F;analyzer)</li>
<li><strong>解析</strong> (parsing)</li>
<li><strong>合成</strong> (synthesis)</li>
<li><strong>完成</strong> (finalization)</li>
</ol>
<h4 id="3-1-2-队列管理"><a href="#3-1-2-队列管理" class="headerlink" title="3.1.2 队列管理"></a>3.1.2 队列管理</h4><p><strong>功能</strong>：</p>
<ul>
<li>显示排队中的文件</li>
<li>显示处理中的文件</li>
<li>队列操作（暂停、恢复、取消）</li>
</ul>
<h4 id="3-1-3-统计图表"><a href="#3-1-3-统计图表" class="headerlink" title="3.1.3 统计图表"></a>3.1.3 统计图表</h4><p><strong>功能</strong>：</p>
<ul>
<li>处理性能统计</li>
<li>处理时间分析</li>
<li>处理成功率统计</li>
<li>文件类型分布</li>
</ul>
<h3 id="3-2-后端服务"><a href="#3-2-后端服务" class="headerlink" title="3.2 后端服务"></a>3.2 后端服务</h3><h4 id="3-2-1-处理服务"><a href="#3-2-1-处理服务" class="headerlink" title="3.2.1 处理服务"></a>3.2.1 处理服务</h4><p><strong>服务</strong>：<code>app/services/processing/</code></p>
<p><strong>功能</strong>：</p>
<ul>
<li>处理状态管理</li>
<li>处理队列管理</li>
<li>处理统计收集</li>
</ul>
<h4 id="3-2-2-后台服务"><a href="#3-2-2-后台服务" class="headerlink" title="3.2.2 后台服务"></a>3.2.2 后台服务</h4><p><strong>服务</strong>：<code>app/services/background/</code></p>
<p><strong>功能</strong>：</p>
<ul>
<li>任务调度</li>
<li>异步处理</li>
<li>任务监控</li>
</ul>
<h2 id="4-数据流"><a href="#4-数据流" class="headerlink" title="4. 数据流"></a>4. 数据流</h2><h3 id="4-1-状态监控流程"><a href="#4-1-状态监控流程" class="headerlink" title="4.1 状态监控流程"></a>4.1 状态监控流程</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">页面加载</span><br><span class="line">    ↓</span><br><span class="line">请求处理状态API</span><br><span class="line">    GET /api/v1/processing/status</span><br><span class="line">    ↓</span><br><span class="line">显示处理状态</span><br><span class="line">    ├─ 总文件数</span><br><span class="line">    ├─ 处理中文件数</span><br><span class="line">    ├─ 已完成文件数</span><br><span class="line">    └─ 失败文件数</span><br><span class="line">    ↓</span><br><span class="line">定时刷新（每5秒）</span><br></pre></td></tr></table></figure>

<h3 id="4-2-实时状态流"><a href="#4-2-实时状态流" class="headerlink" title="4.2 实时状态流"></a>4.2 实时状态流</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">建立SSE连接</span><br><span class="line">    GET /api/v1/processing/status-stream</span><br><span class="line">    ↓</span><br><span class="line">接收实时状态更新</span><br><span class="line">    ├─ 文件状态变更</span><br><span class="line">    ├─ 处理进度更新</span><br><span class="line">    └─ 队列变化</span><br><span class="line">    ↓</span><br><span class="line">更新前端显示</span><br></pre></td></tr></table></figure>

<h2 id="5-技术实现"><a href="#5-技术实现" class="headerlink" title="5. 技术实现"></a>5. 技术实现</h2><h3 id="5-1-前端技术"><a href="#5-1-前端技术" class="headerlink" title="5.1 前端技术"></a>5.1 前端技术</h3><ul>
<li><strong>HTML5</strong>：页面结构</li>
<li><strong>CSS3</strong>：样式和动画</li>
<li><strong>JavaScript (ES6+)</strong>：交互逻辑</li>
<li><strong>Chart.js</strong>：图表渲染</li>
<li><strong>Server-Sent Events</strong>：实时数据推送</li>
</ul>
<h3 id="5-2-后端技术"><a href="#5-2-后端技术" class="headerlink" title="5.2 后端技术"></a>5.2 后端技术</h3><ul>
<li><strong>FastAPI</strong>：API服务</li>
<li><strong>异步处理</strong>：处理任务异步化</li>
<li><strong>任务队列</strong>：后台任务管理</li>
<li><strong>WebSocket&#x2F;SSE</strong>：实时状态推送</li>
</ul>
<h2 id="6-性能优化"><a href="#6-性能优化" class="headerlink" title="6. 性能优化"></a>6. 性能优化</h2><h3 id="6-1-前端优化"><a href="#6-1-前端优化" class="headerlink" title="6.1 前端优化"></a>6.1 前端优化</h3><ul>
<li><strong>虚拟滚动</strong>：大量数据时使用虚拟滚动</li>
<li><strong>数据缓存</strong>：状态数据缓存</li>
<li><strong>防抖处理</strong>：刷新操作防抖</li>
</ul>
<h3 id="6-2-后端优化"><a href="#6-2-后端优化" class="headerlink" title="6.2 后端优化"></a>6.2 后端优化</h3><ul>
<li><strong>查询优化</strong>：数据库索引优化</li>
<li><strong>批量查询</strong>：批量获取处理状态</li>
<li><strong>缓存机制</strong>：统计结果缓存</li>
</ul>
<h2 id="7-总结"><a href="#7-总结" class="headerlink" title="7. 总结"></a>7. 总结</h2><p>数据工场模块提供了完整的文档处理监控功能，通过实时状态更新和详细的统计信息，为用户提供了清晰的文档处理状态视图。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://1660479817.github.io/AIDF.github.io/2025/12/30/data_factory-architecture/" data-id="cmjs96wqo0006ci1w8jjc2e3o" data-title="数据工场模块架构说明" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/AIDF.github.io/tags/%E6%95%B0%E6%8D%AE%E5%B7%A5%E5%9C%BA/" rel="tag">数据工场</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/AIDF.github.io/tags/%E6%9E%B6%E6%9E%84/" rel="tag">架构</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/AIDF.github.io/tags/%E6%A8%A1%E5%9D%97%E6%9E%B6%E6%9E%84/" rel="tag">模块架构</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-home-api" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/AIDF.github.io/2025/12/30/home-api/" class="article-date">
  <time class="dt-published" datetime="2025-12-30T07:15:42.000Z" itemprop="datePublished">2025-12-30</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/AIDF.github.io/categories/AI-NAS-%E7%B3%BB%E7%BB%9F%E9%A6%96%E9%A1%B5/">AI NAS - 系统首页</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/AIDF.github.io/2025/12/30/home-api/">系统首页模块API接口文档</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="系统首页模块API接口文档"><a href="#系统首页模块API接口文档" class="headerlink" title="系统首页模块API接口文档"></a>系统首页模块API接口文档</h1><h2 id="1-概述"><a href="#1-概述" class="headerlink" title="1. 概述"></a>1. 概述</h2><p>系统首页模块使用的API接口，主要用于获取系统信息和统计数据。</p>
<h3 id="1-1-基础信息"><a href="#1-1-基础信息" class="headerlink" title="1.1 基础信息"></a>1.1 基础信息</h3><ul>
<li><strong>Base URL</strong>：<code>http://localhost:8000</code></li>
<li><strong>API前缀</strong>：<code>/api/v1</code></li>
<li><strong>Content-Type</strong>：<code>application/json</code></li>
</ul>
<h3 id="1-2-统一响应格式"><a href="#1-2-统一响应格式" class="headerlink" title="1.2 统一响应格式"></a>1.2 统一响应格式</h3><p>所有API接口遵循统一的响应格式：</p>
<p><strong>成功响应</strong>：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;success&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;message&quot;</span><span class="punctuation">:</span> <span class="string">&quot;操作成功&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span>...<span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;timestamp&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2025-10-19T10:00:00&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;response_time_ms&quot;</span><span class="punctuation">:</span> <span class="number">123</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="2-系统信息API"><a href="#2-系统信息API" class="headerlink" title="2. 系统信息API"></a>2. 系统信息API</h2><h3 id="2-1-获取系统信息"><a href="#2-1-获取系统信息" class="headerlink" title="2.1 获取系统信息"></a>2.1 获取系统信息</h3><p><strong>接口</strong>：<code>GET /api/v1/system/info</code></p>
<p><strong>说明</strong>：获取系统基本信息，包括版本、IP地址、访问链接等</p>
<p><strong>权限</strong>：所有用户可访问</p>
<p><strong>响应示例</strong>：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;success&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;message&quot;</span><span class="punctuation">:</span> <span class="string">&quot;获取系统信息成功&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;v5.10.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;AI NAS&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;local_ip&quot;</span><span class="punctuation">:</span> <span class="string">&quot;192.168.1.100&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;port&quot;</span><span class="punctuation">:</span> <span class="number">8000</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;local_url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http://localhost:8000&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;network_url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http://192.168.1.100:8000&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;api_docs_url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http://192.168.1.100:8000/docs&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;data_storage_path&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/path/to/data&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;system_status&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;status&quot;</span><span class="punctuation">:</span> <span class="string">&quot;healthy&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;uptime&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2 days 5 hours&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;stats&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;total_files&quot;</span><span class="punctuation">:</span> <span class="number">100</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;total_size&quot;</span><span class="punctuation">:</span> <span class="number">1024000000</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;timestamp&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2025-10-19T10:00:00&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;response_time_ms&quot;</span><span class="punctuation">:</span> <span class="number">45</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p><strong>字段说明</strong>：</p>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>version</td>
<td>string</td>
<td>系统版本号</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>系统名称</td>
</tr>
<tr>
<td>local_ip</td>
<td>string</td>
<td>本机IP地址</td>
</tr>
<tr>
<td>port</td>
<td>int</td>
<td>服务端口</td>
</tr>
<tr>
<td>local_url</td>
<td>string</td>
<td>本地访问URL</td>
</tr>
<tr>
<td>network_url</td>
<td>string</td>
<td>网络访问URL</td>
</tr>
<tr>
<td>api_docs_url</td>
<td>string</td>
<td>API文档URL</td>
</tr>
<tr>
<td>data_storage_path</td>
<td>string</td>
<td>数据存储路径</td>
</tr>
<tr>
<td>system_status</td>
<td>object</td>
<td>系统状态信息</td>
</tr>
<tr>
<td>stats</td>
<td>object</td>
<td>系统统计数据</td>
</tr>
</tbody></table>
<h2 id="3-系统统计API"><a href="#3-系统统计API" class="headerlink" title="3. 系统统计API"></a>3. 系统统计API</h2><h3 id="3-1-获取系统摘要"><a href="#3-1-获取系统摘要" class="headerlink" title="3.1 获取系统摘要"></a>3.1 获取系统摘要</h3><p><strong>接口</strong>：<code>GET /api/v1/stats/summary</code></p>
<p><strong>说明</strong>：获取系统整体统计摘要信息</p>
<p><strong>权限</strong>：所有用户可访问</p>
<p><strong>响应示例</strong>：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;success&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;total_files&quot;</span><span class="punctuation">:</span> <span class="number">100</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;total_size&quot;</span><span class="punctuation">:</span> <span class="number">1024000000</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;completed_files&quot;</span><span class="punctuation">:</span> <span class="number">90</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;failed_files&quot;</span><span class="punctuation">:</span> <span class="number">3</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;processing_files&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;queued_files&quot;</span><span class="punctuation">:</span> <span class="number">5</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;timestamp&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2025-10-19T10:00:00&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;response_time_ms&quot;</span><span class="punctuation">:</span> <span class="number">123</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p><strong>字段说明</strong>：</p>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>total_files</td>
<td>int</td>
<td>总文件数</td>
</tr>
<tr>
<td>total_size</td>
<td>int</td>
<td>总文件大小（字节）</td>
</tr>
<tr>
<td>completed_files</td>
<td>int</td>
<td>已完成文件数</td>
</tr>
<tr>
<td>failed_files</td>
<td>int</td>
<td>失败文件数</td>
</tr>
<tr>
<td>processing_files</td>
<td>int</td>
<td>处理中文件数</td>
</tr>
<tr>
<td>queued_files</td>
<td>int</td>
<td>排队中文件数</td>
</tr>
</tbody></table>
<h3 id="3-2-获取仪表板数据"><a href="#3-2-获取仪表板数据" class="headerlink" title="3.2 获取仪表板数据"></a>3.2 获取仪表板数据</h3><p><strong>接口</strong>：<code>GET /api/v1/stats/dashboard</code></p>
<p><strong>说明</strong>：获取仪表板详细数据，包括趋势分析、分类统计等</p>
<p><strong>权限</strong>：所有用户可访问</p>
<p><strong>响应示例</strong>：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;success&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;overview&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;total_files&quot;</span><span class="punctuation">:</span> <span class="number">100</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;total_size&quot;</span><span class="punctuation">:</span> <span class="number">1024000000</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;file_types&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;pdf&quot;</span><span class="punctuation">:</span> <span class="number">50</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;docx&quot;</span><span class="punctuation">:</span> <span class="number">30</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;xlsx&quot;</span><span class="punctuation">:</span> <span class="number">20</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;trends&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;upload_trend&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span>...<span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;processing_trend&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span>...<span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;categories&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span>...<span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;timestamp&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2025-10-19T10:00:00&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;response_time_ms&quot;</span><span class="punctuation">:</span> <span class="number">234</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p><strong>字段说明</strong>：</p>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>overview</td>
<td>object</td>
<td>概览数据</td>
</tr>
<tr>
<td>trends</td>
<td>object</td>
<td>趋势数据</td>
</tr>
<tr>
<td>categories</td>
<td>array</td>
<td>分类数据</td>
</tr>
</tbody></table>
<h2 id="4-使用示例"><a href="#4-使用示例" class="headerlink" title="4. 使用示例"></a>4. 使用示例</h2><h3 id="4-1-获取系统信息"><a href="#4-1-获取系统信息" class="headerlink" title="4.1 获取系统信息"></a>4.1 获取系统信息</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使用fetch API</span></span><br><span class="line"><span class="title function_">fetch</span>(<span class="string">&#x27;/api/v1/system/info&#x27;</span>)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> response.<span class="title function_">json</span>())</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (data.<span class="property">success</span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;系统版本:&#x27;</span>, data.<span class="property">data</span>.<span class="property">version</span>);</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;访问地址:&#x27;</span>, data.<span class="property">data</span>.<span class="property">network_url</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;获取系统信息失败:&#x27;</span>, error);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>

<h3 id="4-2-获取系统统计"><a href="#4-2-获取系统统计" class="headerlink" title="4.2 获取系统统计"></a>4.2 获取系统统计</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使用async/await</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">loadSystemStats</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;/api/v1/stats/summary&#x27;</span>);</span><br><span class="line">    <span class="keyword">const</span> data = <span class="keyword">await</span> response.<span class="title function_">json</span>();</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (data.<span class="property">success</span>) &#123;</span><br><span class="line">      <span class="title function_">updateStatsDisplay</span>(data.<span class="property">data</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;获取统计信息失败:&#x27;</span>, error);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">updateStatsDisplay</span>(<span class="params">stats</span>) &#123;</span><br><span class="line">  <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;total-files&#x27;</span>).<span class="property">textContent</span> = stats.<span class="property">total_files</span>;</span><br><span class="line">  <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;completed-files&#x27;</span>).<span class="property">textContent</span> = stats.<span class="property">completed_files</span>;</span><br><span class="line">  <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;processing-files&#x27;</span>).<span class="property">textContent</span> = stats.<span class="property">processing_files</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-3-并行请求多个API"><a href="#4-3-并行请求多个API" class="headerlink" title="4.3 并行请求多个API"></a>4.3 并行请求多个API</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 并行请求系统信息和统计数据</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">loadHomePageData</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> [systemInfo, stats] = <span class="keyword">await</span> <span class="title class_">Promise</span>.<span class="title function_">all</span>([</span><br><span class="line">      <span class="title function_">fetch</span>(<span class="string">&#x27;/api/v1/system/info&#x27;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">r</span> =&gt;</span> r.<span class="title function_">json</span>()),</span><br><span class="line">      <span class="title function_">fetch</span>(<span class="string">&#x27;/api/v1/stats/summary&#x27;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">r</span> =&gt;</span> r.<span class="title function_">json</span>())</span><br><span class="line">    ]);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (systemInfo.<span class="property">success</span>) &#123;</span><br><span class="line">      <span class="title function_">displaySystemInfo</span>(systemInfo.<span class="property">data</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (stats.<span class="property">success</span>) &#123;</span><br><span class="line">      <span class="title function_">displayStats</span>(stats.<span class="property">data</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;加载数据失败:&#x27;</span>, error);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="5-错误处理"><a href="#5-错误处理" class="headerlink" title="5. 错误处理"></a>5. 错误处理</h2><h3 id="5-1-错误响应格式"><a href="#5-1-错误响应格式" class="headerlink" title="5.1 错误响应格式"></a>5.1 错误响应格式</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;success&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;error&quot;</span><span class="punctuation">:</span> <span class="string">&quot;错误信息&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;error_code&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ERROR_CODE&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;timestamp&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2025-10-19T10:00:00&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;response_time_ms&quot;</span><span class="punctuation">:</span> <span class="number">123</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="5-2-常见错误码"><a href="#5-2-常见错误码" class="headerlink" title="5.2 常见错误码"></a>5.2 常见错误码</h3><ul>
<li><code>SYSTEM_ERROR</code>：系统内部错误</li>
<li><code>DATABASE_ERROR</code>：数据库错误</li>
<li><code>PERMISSION_DENIED</code>：权限不足</li>
</ul>
<h2 id="6-性能优化建议"><a href="#6-性能优化建议" class="headerlink" title="6. 性能优化建议"></a>6. 性能优化建议</h2><h3 id="6-1-缓存策略"><a href="#6-1-缓存策略" class="headerlink" title="6.1 缓存策略"></a>6.1 缓存策略</h3><ul>
<li>系统信息可以缓存5分钟</li>
<li>统计数据可以缓存30秒</li>
<li>使用浏览器本地存储缓存</li>
</ul>
<h3 id="6-2-请求优化"><a href="#6-2-请求优化" class="headerlink" title="6.2 请求优化"></a>6.2 请求优化</h3><ul>
<li>使用并行请求减少等待时间</li>
<li>实现请求去重，避免重复请求</li>
<li>使用防抖处理频繁请求</li>
</ul>
<h2 id="7-总结"><a href="#7-总结" class="headerlink" title="7. 总结"></a>7. 总结</h2><p>系统首页模块的API接口设计简洁，主要提供系统信息和统计数据。接口响应快速，支持缓存优化，为首页提供了良好的性能表现。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://1660479817.github.io/AIDF.github.io/2025/12/30/home-api/" data-id="cmjs96wqq0009ci1w1bu9coa9" data-title="系统首页模块API接口文档" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/AIDF.github.io/tags/API/" rel="tag">API</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/AIDF.github.io/tags/%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3/" rel="tag">接口文档</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/AIDF.github.io/tags/%E7%B3%BB%E7%BB%9F%E9%A6%96%E9%A1%B5/" rel="tag">系统首页</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-home-architecture" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/AIDF.github.io/2025/12/30/home-architecture/" class="article-date">
  <time class="dt-published" datetime="2025-12-30T07:15:42.000Z" itemprop="datePublished">2025-12-30</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/AIDF.github.io/categories/AI-NAS-%E7%B3%BB%E7%BB%9F%E9%A6%96%E9%A1%B5/">AI NAS - 系统首页</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/AIDF.github.io/2025/12/30/home-architecture/">系统首页模块架构说明</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="系统首页模块架构说明"><a href="#系统首页模块架构说明" class="headerlink" title="系统首页模块架构说明"></a>系统首页模块架构说明</h1><h2 id="1-模块概述"><a href="#1-模块概述" class="headerlink" title="1. 模块概述"></a>1. 模块概述</h2><p>系统首页是AI NAS的入口页面，提供系统概览、快速导航和核心功能入口。</p>
<h3 id="1-1-功能定位"><a href="#1-1-功能定位" class="headerlink" title="1.1 功能定位"></a>1.1 功能定位</h3><ul>
<li><strong>系统入口</strong>：用户访问系统的第一个页面</li>
<li><strong>功能导航</strong>：快速访问各个核心功能模块</li>
<li><strong>系统概览</strong>：展示系统统计信息和状态</li>
<li><strong>快速操作</strong>：提供常用功能的快速入口</li>
</ul>
<h3 id="1-2-访问路径"><a href="#1-2-访问路径" class="headerlink" title="1.2 访问路径"></a>1.2 访问路径</h3><ul>
<li><strong>URL</strong>：<code>/</code></li>
<li><strong>文件位置</strong>：<code>static/home.html</code></li>
<li><strong>权限要求</strong>：所有用户（包括游客）可访问</li>
</ul>
<h2 id="2-模块架构"><a href="#2-模块架构" class="headerlink" title="2. 模块架构"></a>2. 模块架构</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">┌─────────────────────────────────────────────────────────┐</span><br><span class="line">│                    前端页面层                              │</span><br><span class="line">│  - home.html (静态页面)                                   │</span><br><span class="line">│  - 导航栏组件 (navbar.html)                              │</span><br><span class="line">│  - JavaScript交互逻辑                                     │</span><br><span class="line">└─────────────────────────────────────────────────────────┘</span><br><span class="line">                            ↓</span><br><span class="line">┌─────────────────────────────────────────────────────────┐</span><br><span class="line">│                    API接口层                              │</span><br><span class="line">│  - GET /api/v1/system/info (系统信息)                    │</span><br><span class="line">│  - GET /api/v1/stats/summary (系统统计)                   │</span><br><span class="line">│  - GET /api/v1/stats/dashboard (仪表板数据)              │</span><br><span class="line">└─────────────────────────────────────────────────────────┘</span><br><span class="line">                            ↓</span><br><span class="line">┌─────────────────────────────────────────────────────────┐</span><br><span class="line">│                   业务服务层                              │</span><br><span class="line">│  - System Service (系统服务)                             │</span><br><span class="line">│  - Stats Service (统计服务)                              │</span><br><span class="line">└─────────────────────────────────────────────────────────┘</span><br><span class="line">                            ↓</span><br><span class="line">┌─────────────────────────────────────────────────────────┐</span><br><span class="line">│                   数据层                                  │</span><br><span class="line">│  - ai_nas: system_logs, processing_logs                  │</span><br><span class="line">│  - ai_nas_app: users (用户统计)                          │</span><br><span class="line">└─────────────────────────────────────────────────────────┘</span><br></pre></td></tr></table></figure>

<h2 id="3-核心组件"><a href="#3-核心组件" class="headerlink" title="3. 核心组件"></a>3. 核心组件</h2><h3 id="3-1-前端组件"><a href="#3-1-前端组件" class="headerlink" title="3.1 前端组件"></a>3.1 前端组件</h3><h4 id="3-1-1-Hero区域"><a href="#3-1-1-Hero区域" class="headerlink" title="3.1.1 Hero区域"></a>3.1.1 Hero区域</h4><p><strong>功能</strong>：</p>
<ul>
<li>展示系统Logo和标题</li>
<li>显示系统描述和口号</li>
<li>提供快速操作按钮（文档中心、AI助手）</li>
</ul>
<p><strong>实现</strong>：</p>
<ul>
<li>HTML结构：<code>hero-section</code></li>
<li>CSS样式：渐变背景、动画效果</li>
<li>JavaScript：动态加载系统信息</li>
</ul>
<h4 id="3-1-2-功能卡片区域"><a href="#3-1-2-功能卡片区域" class="headerlink" title="3.1.2 功能卡片区域"></a>3.1.2 功能卡片区域</h4><p><strong>功能</strong>：</p>
<ul>
<li>展示核心功能模块卡片</li>
<li>提供快速导航入口</li>
<li>显示功能描述和图标</li>
</ul>
<p><strong>核心功能卡片</strong>：</p>
<ol>
<li><strong>文档中心</strong>：文档搜索、浏览、管理</li>
<li><strong>AI助手中心</strong>：智能对话、企业查询等AI应用</li>
<li><strong>数据工场</strong>：AI文档处理流水线</li>
<li><strong>数据仓库看板</strong>：文档统计、趋势分析</li>
</ol>
<h4 id="3-1-3-系统统计区域"><a href="#3-1-3-系统统计区域" class="headerlink" title="3.1.3 系统统计区域"></a>3.1.3 系统统计区域</h4><p><strong>功能</strong>：</p>
<ul>
<li>展示系统统计数据</li>
<li>显示文档数量、处理状态等</li>
<li>实时更新系统状态</li>
</ul>
<p><strong>统计数据</strong>：</p>
<ul>
<li>总文档数</li>
<li>处理中文档数</li>
<li>已完成文档数</li>
<li>失败文档数</li>
<li>系统版本信息</li>
</ul>
<h3 id="3-2-后端API"><a href="#3-2-后端API" class="headerlink" title="3.2 后端API"></a>3.2 后端API</h3><h4 id="3-2-1-系统信息API"><a href="#3-2-1-系统信息API" class="headerlink" title="3.2.1 系统信息API"></a>3.2.1 系统信息API</h4><p><strong>接口</strong>：<code>GET /api/v1/system/info</code></p>
<p><strong>功能</strong>：</p>
<ul>
<li>获取系统基本信息</li>
<li>返回系统版本、IP地址、端口等</li>
<li>提供访问链接</li>
</ul>
<p><strong>响应数据</strong>：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;success&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;v5.10.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;AI NAS&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;local_ip&quot;</span><span class="punctuation">:</span> <span class="string">&quot;192.168.1.100&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;port&quot;</span><span class="punctuation">:</span> <span class="number">8000</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;local_url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http://localhost:8000&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;network_url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http://192.168.1.100:8000&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;api_docs_url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http://192.168.1.100:8000/docs&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;data_storage_path&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/path/to/data&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;system_status&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span>...<span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;stats&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span>...<span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h4 id="3-2-2-系统统计API"><a href="#3-2-2-系统统计API" class="headerlink" title="3.2.2 系统统计API"></a>3.2.2 系统统计API</h4><p><strong>接口</strong>：<code>GET /api/v1/stats/summary</code></p>
<p><strong>功能</strong>：</p>
<ul>
<li>获取系统整体统计信息</li>
<li>返回文档数量、处理状态统计</li>
<li>提供系统健康度指标</li>
</ul>
<p><strong>响应数据</strong>：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;success&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;total_files&quot;</span><span class="punctuation">:</span> <span class="number">100</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;total_size&quot;</span><span class="punctuation">:</span> <span class="number">1024000000</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;completed_files&quot;</span><span class="punctuation">:</span> <span class="number">90</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;failed_files&quot;</span><span class="punctuation">:</span> <span class="number">3</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;processing_files&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;queued_files&quot;</span><span class="punctuation">:</span> <span class="number">5</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h4 id="3-2-3-仪表板数据API"><a href="#3-2-3-仪表板数据API" class="headerlink" title="3.2.3 仪表板数据API"></a>3.2.3 仪表板数据API</h4><p><strong>接口</strong>：<code>GET /api/v1/stats/dashboard</code></p>
<p><strong>功能</strong>：</p>
<ul>
<li>获取仪表板详细数据</li>
<li>返回趋势分析、分类统计等</li>
<li>提供可视化数据支持</li>
</ul>
<h2 id="4-数据流"><a href="#4-数据流" class="headerlink" title="4. 数据流"></a>4. 数据流</h2><h3 id="4-1-页面加载流程"><a href="#4-1-页面加载流程" class="headerlink" title="4.1 页面加载流程"></a>4.1 页面加载流程</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">用户访问首页 (/)</span><br><span class="line">    ↓</span><br><span class="line">加载静态HTML (home.html)</span><br><span class="line">    ↓</span><br><span class="line">初始化JavaScript</span><br><span class="line">    ↓</span><br><span class="line">并行请求API</span><br><span class="line">    ├─ GET /api/v1/system/info</span><br><span class="line">    ├─ GET /api/v1/stats/summary</span><br><span class="line">    └─ GET /api/v1/stats/dashboard</span><br><span class="line">    ↓</span><br><span class="line">渲染页面内容</span><br><span class="line">    ├─ Hero区域</span><br><span class="line">    ├─ 功能卡片区域</span><br><span class="line">    └─ 系统统计区域</span><br><span class="line">    ↓</span><br><span class="line">页面展示完成</span><br></pre></td></tr></table></figure>

<h3 id="4-2-数据更新流程"><a href="#4-2-数据更新流程" class="headerlink" title="4.2 数据更新流程"></a>4.2 数据更新流程</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">定时器触发 (每30秒)</span><br><span class="line">    ↓</span><br><span class="line">请求系统统计API</span><br><span class="line">    ↓</span><br><span class="line">更新统计数据</span><br><span class="line">    ↓</span><br><span class="line">刷新统计区域显示</span><br></pre></td></tr></table></figure>

<h2 id="5-技术实现"><a href="#5-技术实现" class="headerlink" title="5. 技术实现"></a>5. 技术实现</h2><h3 id="5-1-前端技术"><a href="#5-1-前端技术" class="headerlink" title="5.1 前端技术"></a>5.1 前端技术</h3><ul>
<li><strong>HTML5</strong>：页面结构</li>
<li><strong>CSS3</strong>：样式和动画（渐变、过渡、浮动动画）</li>
<li><strong>JavaScript</strong>：交互逻辑和API调用</li>
<li><strong>Bootstrap</strong>：响应式布局</li>
<li><strong>Font Awesome</strong>：图标库</li>
</ul>
<h3 id="5-2-后端技术"><a href="#5-2-后端技术" class="headerlink" title="5.2 后端技术"></a>5.2 后端技术</h3><ul>
<li><strong>FastAPI</strong>：API服务</li>
<li><strong>SQLAlchemy</strong>：数据库查询</li>
<li><strong>异步处理</strong>：API异步响应</li>
</ul>
<h3 id="5-3-性能优化"><a href="#5-3-性能优化" class="headerlink" title="5.3 性能优化"></a>5.3 性能优化</h3><ul>
<li><strong>静态资源缓存</strong>：CSS、JS文件缓存</li>
<li><strong>API请求合并</strong>：并行请求多个API</li>
<li><strong>懒加载</strong>：统计区域按需加载</li>
<li><strong>响应式设计</strong>：适配不同屏幕尺寸</li>
</ul>
<h2 id="6-扩展性"><a href="#6-扩展性" class="headerlink" title="6. 扩展性"></a>6. 扩展性</h2><h3 id="6-1-功能扩展"><a href="#6-1-功能扩展" class="headerlink" title="6.1 功能扩展"></a>6.1 功能扩展</h3><ul>
<li>支持自定义功能卡片</li>
<li>支持动态配置导航链接</li>
<li>支持主题切换</li>
</ul>
<h3 id="6-2-数据扩展"><a href="#6-2-数据扩展" class="headerlink" title="6.2 数据扩展"></a>6.2 数据扩展</h3><ul>
<li>支持更多统计维度</li>
<li>支持自定义仪表板</li>
<li>支持实时数据推送</li>
</ul>
<h2 id="7-安全设计"><a href="#7-安全设计" class="headerlink" title="7. 安全设计"></a>7. 安全设计</h2><h3 id="7-1-访问控制"><a href="#7-1-访问控制" class="headerlink" title="7.1 访问控制"></a>7.1 访问控制</h3><ul>
<li>首页对所有用户开放（包括游客）</li>
<li>功能卡片根据权限显示&#x2F;隐藏</li>
<li>API接口根据用户角色返回不同数据</li>
</ul>
<h3 id="7-2-数据安全"><a href="#7-2-数据安全" class="headerlink" title="7.2 数据安全"></a>7.2 数据安全</h3><ul>
<li>敏感信息不暴露在首页</li>
<li>统计数据聚合显示，不暴露详细信息</li>
<li>API接口有权限验证</li>
</ul>
<h2 id="8-总结"><a href="#8-总结" class="headerlink" title="8. 总结"></a>8. 总结</h2><p>系统首页作为AI NAS的入口页面，提供了清晰的导航和系统概览功能。通过模块化的设计和异步API调用，实现了良好的用户体验和性能表现。页面设计简洁美观，功能布局合理，为用户提供了便捷的系统访问入口。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://1660479817.github.io/AIDF.github.io/2025/12/30/home-architecture/" data-id="cmjs96wqr000aci1w2miv7isx" data-title="系统首页模块架构说明" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/AIDF.github.io/tags/%E6%9E%B6%E6%9E%84/" rel="tag">架构</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/AIDF.github.io/tags/%E6%A8%A1%E5%9D%97%E6%9E%B6%E6%9E%84/" rel="tag">模块架构</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/AIDF.github.io/tags/%E7%B3%BB%E7%BB%9F%E9%A6%96%E9%A1%B5/" rel="tag">系统首页</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-management-api" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/AIDF.github.io/2025/12/30/management-api/" class="article-date">
  <time class="dt-published" datetime="2025-12-30T07:15:42.000Z" itemprop="datePublished">2025-12-30</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/AIDF.github.io/categories/AI-NAS-%E7%AE%A1%E7%90%86%E4%B8%AD%E5%BF%83/">AI NAS - 管理中心</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/AIDF.github.io/2025/12/30/management-api/">管理中心模块API接口文档</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="管理中心模块API接口文档"><a href="#管理中心模块API接口文档" class="headerlink" title="管理中心模块API接口文档"></a>管理中心模块API接口文档</h1><h2 id="1-概述"><a href="#1-概述" class="headerlink" title="1. 概述"></a>1. 概述</h2><p>管理中心模块使用的API接口，提供用户管理、权限管理、系统设置、系统监控等功能。</p>
<h3 id="1-1-基础信息"><a href="#1-1-基础信息" class="headerlink" title="1.1 基础信息"></a>1.1 基础信息</h3><ul>
<li><strong>Base URL</strong>：<code>http://localhost:8000</code></li>
<li><strong>API前缀</strong>：<code>/api/v1</code></li>
<li><strong>Content-Type</strong>：<code>application/json</code></li>
<li><strong>权限要求</strong>：管理员（ADMIN）</li>
</ul>
<h2 id="2-用户管理API"><a href="#2-用户管理API" class="headerlink" title="2. 用户管理API"></a>2. 用户管理API</h2><h3 id="2-1-获取用户列表"><a href="#2-1-获取用户列表" class="headerlink" title="2.1 获取用户列表"></a>2.1 获取用户列表</h3><p><strong>接口</strong>：<code>GET /api/v1/user-management/users</code></p>
<p><strong>参数</strong>：</p>
<ul>
<li><code>page</code> (int, 可选)：页码，默认1</li>
<li><code>page_size</code> (int, 可选)：每页数量，默认20</li>
<li><code>search</code> (string, 可选)：搜索关键词</li>
<li><code>role</code> (string, 可选)：角色过滤</li>
<li><code>is_active</code> (bool, 可选)：是否激活过滤</li>
</ul>
<h3 id="2-2-创建用户"><a href="#2-2-创建用户" class="headerlink" title="2.2 创建用户"></a>2.2 创建用户</h3><p><strong>接口</strong>：<code>POST /api/v1/user-management/users</code></p>
<p><strong>请求体</strong>：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;username&quot;</span><span class="punctuation">:</span> <span class="string">&quot;user123&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;email&quot;</span><span class="punctuation">:</span> <span class="string">&quot;user@example.com&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;password&quot;</span><span class="punctuation">:</span> <span class="string">&quot;password123&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;display_name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;显示名称&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;role&quot;</span><span class="punctuation">:</span> <span class="string">&quot;user&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-3-更新用户"><a href="#2-3-更新用户" class="headerlink" title="2.3 更新用户"></a>2.3 更新用户</h3><p><strong>接口</strong>：<code>PUT /api/v1/user-management/users/&#123;user_id&#125;</code></p>
<h3 id="2-4-删除用户"><a href="#2-4-删除用户" class="headerlink" title="2.4 删除用户"></a>2.4 删除用户</h3><p><strong>接口</strong>：<code>DELETE /api/v1/user-management/users/&#123;user_id&#125;</code></p>
<h3 id="2-5-批准用户"><a href="#2-5-批准用户" class="headerlink" title="2.5 批准用户"></a>2.5 批准用户</h3><p><strong>接口</strong>：<code>POST /api/v1/user-management/users/&#123;user_id&#125;/approve</code></p>
<h3 id="2-6-重置密码"><a href="#2-6-重置密码" class="headerlink" title="2.6 重置密码"></a>2.6 重置密码</h3><p><strong>接口</strong>：<code>POST /api/v1/user-management/users/&#123;user_id&#125;/reset-password</code></p>
<p><strong>请求体</strong>：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;new_password&quot;</span><span class="punctuation">:</span> <span class="string">&quot;new_password123&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="3-权限管理API"><a href="#3-权限管理API" class="headerlink" title="3. 权限管理API"></a>3. 权限管理API</h2><h3 id="3-1-获取权限列表"><a href="#3-1-获取权限列表" class="headerlink" title="3.1 获取权限列表"></a>3.1 获取权限列表</h3><p><strong>接口</strong>：<code>GET /api/v1/permission-management/permissions</code></p>
<h3 id="3-2-分配用户权限"><a href="#3-2-分配用户权限" class="headerlink" title="3.2 分配用户权限"></a>3.2 分配用户权限</h3><p><strong>接口</strong>：<code>POST /api/v1/permission-management/users/&#123;user_id&#125;/permissions</code></p>
<p><strong>请求体</strong>：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;permission_ids&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;permission_id1&quot;</span><span class="punctuation">,</span> <span class="string">&quot;permission_id2&quot;</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="4-系统设置API"><a href="#4-系统设置API" class="headerlink" title="4. 系统设置API"></a>4. 系统设置API</h2><h3 id="4-1-获取系统配置"><a href="#4-1-获取系统配置" class="headerlink" title="4.1 获取系统配置"></a>4.1 获取系统配置</h3><p><strong>接口</strong>：<code>GET /api/v1/config/</code></p>
<h3 id="4-2-更新系统配置"><a href="#4-2-更新系统配置" class="headerlink" title="4.2 更新系统配置"></a>4.2 更新系统配置</h3><p><strong>接口</strong>：<code>PUT /api/v1/config/</code></p>
<h2 id="5-系统监控API"><a href="#5-系统监控API" class="headerlink" title="5. 系统监控API"></a>5. 系统监控API</h2><h3 id="5-1-健康检查"><a href="#5-1-健康检查" class="headerlink" title="5.1 健康检查"></a>5.1 健康检查</h3><p><strong>接口</strong>：<code>GET /api/v1/health/check</code></p>
<h3 id="5-2-系统信息"><a href="#5-2-系统信息" class="headerlink" title="5.2 系统信息"></a>5.2 系统信息</h3><p><strong>接口</strong>：<code>GET /api/v1/system/info</code></p>
<h2 id="6-数据统计API"><a href="#6-数据统计API" class="headerlink" title="6. 数据统计API"></a>6. 数据统计API</h2><h3 id="6-1-获取仪表板数据"><a href="#6-1-获取仪表板数据" class="headerlink" title="6.1 获取仪表板数据"></a>6.1 获取仪表板数据</h3><p><strong>接口</strong>：<code>GET /api/v1/stats/dashboard</code></p>
<h2 id="7-总结"><a href="#7-总结" class="headerlink" title="7. 总结"></a>7. 总结</h2><p>管理中心模块提供了完整的系统管理API，支持用户、权限、系统配置的全面管理，为管理员提供了强大的系统管理能力。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://1660479817.github.io/AIDF.github.io/2025/12/30/management-api/" data-id="cmjs96wqs000eci1w2j8bh46k" data-title="管理中心模块API接口文档" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/AIDF.github.io/tags/API/" rel="tag">API</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/AIDF.github.io/tags/%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3/" rel="tag">接口文档</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/AIDF.github.io/tags/%E7%AE%A1%E7%90%86%E4%B8%AD%E5%BF%83/" rel="tag">管理中心</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-management-architecture" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/AIDF.github.io/2025/12/30/management-architecture/" class="article-date">
  <time class="dt-published" datetime="2025-12-30T07:15:42.000Z" itemprop="datePublished">2025-12-30</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/AIDF.github.io/categories/AI-NAS-%E7%AE%A1%E7%90%86%E4%B8%AD%E5%BF%83/">AI NAS - 管理中心</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/AIDF.github.io/2025/12/30/management-architecture/">管理中心模块架构说明</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="管理中心模块架构说明"><a href="#管理中心模块架构说明" class="headerlink" title="管理中心模块架构说明"></a>管理中心模块架构说明</h1><h2 id="1-模块概述"><a href="#1-模块概述" class="headerlink" title="1. 模块概述"></a>1. 模块概述</h2><p>管理中心是AI NAS的系统管理模块，提供用户管理、权限管理、系统设置、系统监控等功能。</p>
<h3 id="1-1-功能定位"><a href="#1-1-功能定位" class="headerlink" title="1.1 功能定位"></a>1.1 功能定位</h3><ul>
<li><strong>用户管理</strong>：用户创建、编辑、删除、审核</li>
<li><strong>权限管理</strong>：权限分配和管理</li>
<li><strong>系统设置</strong>：系统配置管理</li>
<li><strong>系统监控</strong>：系统健康检查和监控</li>
<li><strong>数据仓库</strong>：数据统计和分析</li>
</ul>
<h3 id="1-2-访问路径"><a href="#1-2-访问路径" class="headerlink" title="1.2 访问路径"></a>1.2 访问路径</h3><ul>
<li><strong>用户管理</strong>：<code>/static/user_management.html</code></li>
<li><strong>系统设置</strong>：<code>/static/settings.html</code></li>
<li><strong>Agent配置</strong>：<code>/static/settings.html?tab=agent-config</code></li>
<li><strong>系统监控</strong>：<code>/static/system_health.html</code></li>
<li><strong>数据仓库</strong>：<code>/static/stats_dashboard.html</code></li>
<li><strong>权限要求</strong>：管理员（ADMIN）</li>
</ul>
<h2 id="2-模块架构"><a href="#2-模块架构" class="headerlink" title="2. 模块架构"></a>2. 模块架构</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">┌─────────────────────────────────────────────────────────┐</span><br><span class="line">│                    前端页面层                              │</span><br><span class="line">│  - user_management.html (用户管理)                       │</span><br><span class="line">│  - settings.html (系统设置)                              │</span><br><span class="line">│  - system_health.html (系统监控)                         │</span><br><span class="line">│  - stats_dashboard.html (数据仓库)                       │</span><br><span class="line">└─────────────────────────────────────────────────────────┘</span><br><span class="line">                            ↓</span><br><span class="line">┌─────────────────────────────────────────────────────────┐</span><br><span class="line">│                    API接口层                              │</span><br><span class="line">│  - GET /api/v1/user-management/users (用户列表)         │</span><br><span class="line">│  - POST /api/v1/user-management/users (创建用户)        │</span><br><span class="line">│  - GET /api/v1/permission-management/permissions (权限) │</span><br><span class="line">│  - GET /api/v1/system/info (系统信息)                   │</span><br><span class="line">│  - GET /api/v1/health/check (健康检查)                  │</span><br><span class="line">│  - GET /api/v1/stats/dashboard (统计数据)               │</span><br><span class="line">│  - GET /api/v1/agent-config/modules (Agent配置)        │</span><br><span class="line">└─────────────────────────────────────────────────────────┘</span><br><span class="line">                            ↓</span><br><span class="line">┌─────────────────────────────────────────────────────────┐</span><br><span class="line">│                   业务服务层                              │</span><br><span class="line">│  - Auth Service (认证服务)                               │</span><br><span class="line">│  - User Management Service (用户管理服务)                │</span><br><span class="line">│  - Permission Service (权限服务)                         │</span><br><span class="line">│  - System Service (系统服务)                             │</span><br><span class="line">│  - Health Service (健康检查服务)                         │</span><br><span class="line">└─────────────────────────────────────────────────────────┘</span><br><span class="line">                            ↓</span><br><span class="line">┌─────────────────────────────────────────────────────────┐</span><br><span class="line">│                   数据层                                  │</span><br><span class="line">│  - ai_nas_app: users, roles, permissions               │</span><br><span class="line">│  - ai_nas: system_logs, processing_logs                 │</span><br><span class="line">└─────────────────────────────────────────────────────────┘</span><br></pre></td></tr></table></figure>

<h2 id="3-核心组件"><a href="#3-核心组件" class="headerlink" title="3. 核心组件"></a>3. 核心组件</h2><h3 id="3-1-用户管理"><a href="#3-1-用户管理" class="headerlink" title="3.1 用户管理"></a>3.1 用户管理</h3><p><strong>功能</strong>：</p>
<ul>
<li>用户列表展示</li>
<li>用户创建和编辑</li>
<li>用户审核（批准&#x2F;拒绝）</li>
<li>密码重置</li>
<li>用户统计</li>
</ul>
<h3 id="3-2-权限管理"><a href="#3-2-权限管理" class="headerlink" title="3.2 权限管理"></a>3.2 权限管理</h3><p><strong>功能</strong>：</p>
<ul>
<li>权限列表管理</li>
<li>用户权限分配</li>
<li>角色权限配置</li>
<li>权限统计</li>
</ul>
<h3 id="3-3-系统设置"><a href="#3-3-系统设置" class="headerlink" title="3.3 系统设置"></a>3.3 系统设置</h3><p><strong>功能</strong>：</p>
<ul>
<li>系统配置管理</li>
<li>LLM配置</li>
<li>VLM配置</li>
<li>Embedding配置</li>
<li>Agent配置</li>
</ul>
<h3 id="3-4-系统监控"><a href="#3-4-系统监控" class="headerlink" title="3.4 系统监控"></a>3.4 系统监控</h3><p><strong>功能</strong>：</p>
<ul>
<li>系统健康检查</li>
<li>性能监控</li>
<li>错误日志查看</li>
<li>系统状态展示</li>
</ul>
<h3 id="3-5-数据仓库"><a href="#3-5-数据仓库" class="headerlink" title="3.5 数据仓库"></a>3.5 数据仓库</h3><p><strong>功能</strong>：</p>
<ul>
<li>文档统计</li>
<li>趋势分析</li>
<li>词云可视化</li>
<li>数据导出</li>
</ul>
<h2 id="4-总结"><a href="#4-总结" class="headerlink" title="4. 总结"></a>4. 总结</h2><p>管理中心模块提供了完整的系统管理功能，通过统一的API接口和清晰的功能划分，为管理员提供了便捷的系统管理工具。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://1660479817.github.io/AIDF.github.io/2025/12/30/management-architecture/" data-id="cmjs96wqs000gci1waou80ozn" data-title="管理中心模块架构说明" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/AIDF.github.io/tags/%E6%9E%B6%E6%9E%84/" rel="tag">架构</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/AIDF.github.io/tags/%E6%A8%A1%E5%9D%97%E6%9E%B6%E6%9E%84/" rel="tag">模块架构</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/AIDF.github.io/tags/%E7%AE%A1%E7%90%86%E4%B8%AD%E5%BF%83/" rel="tag">管理中心</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-project_center-api" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/AIDF.github.io/2025/12/30/project_center-api/" class="article-date">
  <time class="dt-published" datetime="2025-12-30T07:15:42.000Z" itemprop="datePublished">2025-12-30</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/AIDF.github.io/categories/AI-NAS-%E9%A1%B9%E7%9B%AE%E4%B8%AD%E5%BF%83/">AI NAS - 项目中心</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/AIDF.github.io/2025/12/30/project_center-api/">项目中心模块API接口文档</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="项目中心模块API接口文档"><a href="#项目中心模块API接口文档" class="headerlink" title="项目中心模块API接口文档"></a>项目中心模块API接口文档</h1><h2 id="1-概述"><a href="#1-概述" class="headerlink" title="1. 概述"></a>1. 概述</h2><p>项目中心模块使用的API接口，提供项目管理、成员管理、记录管理、文档关联等功能。</p>
<h3 id="1-1-基础信息"><a href="#1-1-基础信息" class="headerlink" title="1.1 基础信息"></a>1.1 基础信息</h3><ul>
<li><strong>Base URL</strong>：<code>http://localhost:8000</code></li>
<li><strong>API前缀</strong>：<code>/api/v1/project-flow</code></li>
<li><strong>Content-Type</strong>：<code>application/json</code></li>
</ul>
<h2 id="2-项目管理API"><a href="#2-项目管理API" class="headerlink" title="2. 项目管理API"></a>2. 项目管理API</h2><h3 id="2-1-获取项目列表"><a href="#2-1-获取项目列表" class="headerlink" title="2.1 获取项目列表"></a>2.1 获取项目列表</h3><p><strong>接口</strong>：<code>GET /api/v1/project-flow/projects</code></p>
<p><strong>说明</strong>：获取项目列表，支持分页和筛选</p>
<p><strong>权限</strong>：需要用户认证</p>
<p><strong>参数</strong>：</p>
<ul>
<li><code>page</code> (int, 可选)：页码，默认1</li>
<li><code>page_size</code> (int, 可选)：每页数量，默认20</li>
<li><code>search</code> (string, 可选)：搜索关键词</li>
<li><code>status</code> (string, 可选)：状态过滤</li>
</ul>
<p><strong>响应示例</strong>：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;success&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;items&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;uuid&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;project_name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;项目名称&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;project_code&quot;</span><span class="punctuation">:</span> <span class="string">&quot;PROJECT-001&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;项目描述&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;status&quot;</span><span class="punctuation">:</span> <span class="string">&quot;active&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;creator_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;uuid&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;created_at&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2025-10-19T10:00:00&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;member_count&quot;</span><span class="punctuation">:</span> <span class="number">5</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;document_count&quot;</span><span class="punctuation">:</span> <span class="number">10</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;record_count&quot;</span><span class="punctuation">:</span> <span class="number">20</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;total&quot;</span><span class="punctuation">:</span> <span class="number">50</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;page&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;page_size&quot;</span><span class="punctuation">:</span> <span class="number">20</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;timestamp&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2025-10-19T10:00:00&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;response_time_ms&quot;</span><span class="punctuation">:</span> <span class="number">123</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-2-创建项目"><a href="#2-2-创建项目" class="headerlink" title="2.2 创建项目"></a>2.2 创建项目</h3><p><strong>接口</strong>：<code>POST /api/v1/project-flow/projects</code></p>
<p><strong>请求体</strong>：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;project_name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;项目名称&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;project_code&quot;</span><span class="punctuation">:</span> <span class="string">&quot;PROJECT-001&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;项目描述&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;file_ids&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">,</span> <span class="number">2</span><span class="punctuation">,</span> <span class="number">3</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p><strong>响应示例</strong>：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;success&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;uuid&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;project_name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;项目名称&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;project_code&quot;</span><span class="punctuation">:</span> <span class="string">&quot;PROJECT-001&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;status&quot;</span><span class="punctuation">:</span> <span class="string">&quot;active&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;created_at&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2025-10-19T10:00:00&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;timestamp&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2025-10-19T10:00:00&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;response_time_ms&quot;</span><span class="punctuation">:</span> <span class="number">234</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-3-获取项目详情"><a href="#2-3-获取项目详情" class="headerlink" title="2.3 获取项目详情"></a>2.3 获取项目详情</h3><p><strong>接口</strong>：<code>GET /api/v1/project-flow/projects/&#123;id&#125;</code></p>
<p><strong>路径参数</strong>：</p>
<ul>
<li><code>id</code> (string, 必需)：项目ID</li>
</ul>
<h3 id="2-4-更新项目"><a href="#2-4-更新项目" class="headerlink" title="2.4 更新项目"></a>2.4 更新项目</h3><p><strong>接口</strong>：<code>PUT /api/v1/project-flow/projects/&#123;id&#125;</code></p>
<p><strong>路径参数</strong>：</p>
<ul>
<li><code>id</code> (string, 必需)：项目ID</li>
</ul>
<p><strong>请求体</strong>：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;project_name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;更新后的项目名称&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;更新后的描述&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-5-删除项目"><a href="#2-5-删除项目" class="headerlink" title="2.5 删除项目"></a>2.5 删除项目</h3><p><strong>接口</strong>：<code>DELETE /api/v1/project-flow/projects/&#123;id&#125;</code></p>
<p><strong>路径参数</strong>：</p>
<ul>
<li><code>id</code> (string, 必需)：项目ID</li>
</ul>
<p><strong>权限</strong>：仅OWNER可删除</p>
<h2 id="3-成员管理API"><a href="#3-成员管理API" class="headerlink" title="3. 成员管理API"></a>3. 成员管理API</h2><h3 id="3-1-获取项目成员"><a href="#3-1-获取项目成员" class="headerlink" title="3.1 获取项目成员"></a>3.1 获取项目成员</h3><p><strong>接口</strong>：<code>GET /api/v1/project-flow/projects/&#123;id&#125;/members</code></p>
<p><strong>路径参数</strong>：</p>
<ul>
<li><code>id</code> (string, 必需)：项目ID</li>
</ul>
<p><strong>响应示例</strong>：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;success&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;items&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;uuid&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;user_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;uuid&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;username&quot;</span><span class="punctuation">:</span> <span class="string">&quot;user123&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;role&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ADMIN&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;joined_at&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2025-10-19T10:00:00&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;timestamp&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2025-10-19T10:00:00&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;response_time_ms&quot;</span><span class="punctuation">:</span> <span class="number">67</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="3-2-添加成员"><a href="#3-2-添加成员" class="headerlink" title="3.2 添加成员"></a>3.2 添加成员</h3><p><strong>接口</strong>：<code>POST /api/v1/project-flow/projects/&#123;id&#125;/members</code></p>
<p><strong>路径参数</strong>：</p>
<ul>
<li><code>id</code> (string, 必需)：项目ID</li>
</ul>
<p><strong>请求体</strong>：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;user_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;uuid&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;role&quot;</span><span class="punctuation">:</span> <span class="string">&quot;MEMBER&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="3-3-更新成员角色"><a href="#3-3-更新成员角色" class="headerlink" title="3.3 更新成员角色"></a>3.3 更新成员角色</h3><p><strong>接口</strong>：<code>PUT /api/v1/project-flow/projects/&#123;id&#125;/members/&#123;member_id&#125;</code></p>
<p><strong>路径参数</strong>：</p>
<ul>
<li><code>id</code> (string, 必需)：项目ID</li>
<li><code>member_id</code> (string, 必需)：成员ID</li>
</ul>
<p><strong>请求体</strong>：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;role&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ADMIN&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="3-4-移除成员"><a href="#3-4-移除成员" class="headerlink" title="3.4 移除成员"></a>3.4 移除成员</h3><p><strong>接口</strong>：<code>DELETE /api/v1/project-flow/projects/&#123;id&#125;/members/&#123;member_id&#125;</code></p>
<p><strong>路径参数</strong>：</p>
<ul>
<li><code>id</code> (string, 必需)：项目ID</li>
<li><code>member_id</code> (string, 必需)：成员ID</li>
</ul>
<h2 id="4-记录管理API"><a href="#4-记录管理API" class="headerlink" title="4. 记录管理API"></a>4. 记录管理API</h2><h3 id="4-1-获取项目记录"><a href="#4-1-获取项目记录" class="headerlink" title="4.1 获取项目记录"></a>4.1 获取项目记录</h3><p><strong>接口</strong>：<code>GET /api/v1/project-flow/projects/&#123;id&#125;/records</code></p>
<p><strong>路径参数</strong>：</p>
<ul>
<li><code>id</code> (string, 必需)：项目ID</li>
</ul>
<p><strong>参数</strong>：</p>
<ul>
<li><code>page</code> (int, 可选)：页码，默认1</li>
<li><code>page_size</code> (int, 可选)：每页数量，默认20</li>
<li><code>record_type</code> (string, 可选)：记录类型过滤</li>
</ul>
<h3 id="4-2-创建记录"><a href="#4-2-创建记录" class="headerlink" title="4.2 创建记录"></a>4.2 创建记录</h3><p><strong>接口</strong>：<code>POST /api/v1/project-flow/projects/&#123;id&#125;/records</code></p>
<p><strong>路径参数</strong>：</p>
<ul>
<li><code>id</code> (string, 必需)：项目ID</li>
</ul>
<p><strong>请求体</strong>：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;record_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;milestone&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;记录标题&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;content&quot;</span><span class="punctuation">:</span> <span class="string">&quot;记录内容&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;stage&quot;</span><span class="punctuation">:</span> <span class="string">&quot;planning&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="4-3-更新记录"><a href="#4-3-更新记录" class="headerlink" title="4.3 更新记录"></a>4.3 更新记录</h3><p><strong>接口</strong>：<code>PUT /api/v1/project-flow/projects/&#123;id&#125;/records/&#123;record_id&#125;</code></p>
<p><strong>路径参数</strong>：</p>
<ul>
<li><code>id</code> (string, 必需)：项目ID</li>
<li><code>record_id</code> (string, 必需)：记录ID</li>
</ul>
<h3 id="4-4-删除记录"><a href="#4-4-删除记录" class="headerlink" title="4.4 删除记录"></a>4.4 删除记录</h3><p><strong>接口</strong>：<code>DELETE /api/v1/project-flow/projects/&#123;id&#125;/records/&#123;record_id&#125;</code></p>
<p><strong>路径参数</strong>：</p>
<ul>
<li><code>id</code> (string, 必需)：项目ID</li>
<li><code>record_id</code> (string, 必需)：记录ID</li>
</ul>
<h2 id="5-文档管理API"><a href="#5-文档管理API" class="headerlink" title="5. 文档管理API"></a>5. 文档管理API</h2><h3 id="5-1-获取项目文档"><a href="#5-1-获取项目文档" class="headerlink" title="5.1 获取项目文档"></a>5.1 获取项目文档</h3><p><strong>接口</strong>：<code>GET /api/v1/project-flow/projects/&#123;id&#125;/documents</code></p>
<p><strong>路径参数</strong>：</p>
<ul>
<li><code>id</code> (string, 必需)：项目ID</li>
</ul>
<p><strong>参数</strong>：</p>
<ul>
<li><code>page</code> (int, 可选)：页码，默认1</li>
<li><code>page_size</code> (int, 可选)：每页数量，默认20</li>
</ul>
<h3 id="5-2-关联文档"><a href="#5-2-关联文档" class="headerlink" title="5.2 关联文档"></a>5.2 关联文档</h3><p><strong>接口</strong>：<code>POST /api/v1/project-flow/projects/&#123;id&#125;/documents</code></p>
<p><strong>路径参数</strong>：</p>
<ul>
<li><code>id</code> (string, 必需)：项目ID</li>
</ul>
<p><strong>请求体</strong>：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;file_ids&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">,</span> <span class="number">2</span><span class="punctuation">,</span> <span class="number">3</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="5-3-取消关联文档"><a href="#5-3-取消关联文档" class="headerlink" title="5.3 取消关联文档"></a>5.3 取消关联文档</h3><p><strong>接口</strong>：<code>DELETE /api/v1/project-flow/projects/&#123;id&#125;/documents/&#123;document_id&#125;</code></p>
<p><strong>路径参数</strong>：</p>
<ul>
<li><code>id</code> (string, 必需)：项目ID</li>
<li><code>document_id</code> (string, 必需)：文档关联ID</li>
</ul>
<h2 id="6-使用示例"><a href="#6-使用示例" class="headerlink" title="6. 使用示例"></a>6. 使用示例</h2><h3 id="6-1-创建项目"><a href="#6-1-创建项目" class="headerlink" title="6.1 创建项目"></a>6.1 创建项目</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">createProject</span>(<span class="params">projectData</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;/api/v1/project-flow/projects&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">    <span class="attr">headers</span>: &#123;</span><br><span class="line">      <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;Authorization&#x27;</span>: <span class="string">`Bearer <span class="subst">$&#123;getAuthToken()&#125;</span>`</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">body</span>: <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(projectData)</span><br><span class="line">  &#125;);</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">const</span> data = <span class="keyword">await</span> response.<span class="title function_">json</span>();</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">if</span> (data.<span class="property">success</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;项目创建成功，ID:&#x27;</span>, data.<span class="property">data</span>.<span class="property">id</span>);</span><br><span class="line">    <span class="keyword">return</span> data.<span class="property">data</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="7-总结"><a href="#7-总结" class="headerlink" title="7. 总结"></a>7. 总结</h2><p>项目中心模块提供了完整的项目管理API，支持项目、成员、记录、文档的全面管理，为前端提供了灵活的项目协作能力。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://1660479817.github.io/AIDF.github.io/2025/12/30/project_center-api/" data-id="cmjs96wqt000lci1wawys5zuo" data-title="项目中心模块API接口文档" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/AIDF.github.io/tags/API/" rel="tag">API</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/AIDF.github.io/tags/%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3/" rel="tag">接口文档</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/AIDF.github.io/tags/%E9%A1%B9%E7%9B%AE%E4%B8%AD%E5%BF%83/" rel="tag">项目中心</a></li></ul>

    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/AIDF.github.io/page/2/">2</a><a class="extend next" rel="next" href="/AIDF.github.io/page/2/">下一页 &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/AIDF.github.io/categories/AI-NAS/">AI NAS</a></li><li class="category-list-item"><a class="category-list-link" href="/AIDF.github.io/categories/AI-NAS-Smart-Chat/">AI NAS - Smart Chat</a></li><li class="category-list-item"><a class="category-list-link" href="/AIDF.github.io/categories/AI-NAS-%E6%95%B0%E6%8D%AE%E5%B7%A5%E5%9C%BA/">AI NAS - 数据工场</a></li><li class="category-list-item"><a class="category-list-link" href="/AIDF.github.io/categories/AI-NAS-%E6%96%87%E6%A1%A3%E4%B8%AD%E5%BF%83/">AI NAS - 文档中心</a></li><li class="category-list-item"><a class="category-list-link" href="/AIDF.github.io/categories/AI-NAS-%E7%AE%A1%E7%90%86%E4%B8%AD%E5%BF%83/">AI NAS - 管理中心</a></li><li class="category-list-item"><a class="category-list-link" href="/AIDF.github.io/categories/AI-NAS-%E7%B3%BB%E7%BB%9F%E9%A6%96%E9%A1%B5/">AI NAS - 系统首页</a></li><li class="category-list-item"><a class="category-list-link" href="/AIDF.github.io/categories/AI-NAS-%E9%A1%B9%E7%9B%AE%E4%B8%AD%E5%BF%83/">AI NAS - 项目中心</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/AIDF.github.io/tags/API/" rel="tag">API</a></li><li class="tag-list-item"><a class="tag-list-link" href="/AIDF.github.io/tags/Smart-Chat/" rel="tag">Smart Chat</a></li><li class="tag-list-item"><a class="tag-list-link" href="/AIDF.github.io/tags/%E6%80%BB%E8%A7%88/" rel="tag">总览</a></li><li class="tag-list-item"><a class="tag-list-link" href="/AIDF.github.io/tags/%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3/" rel="tag">接口文档</a></li><li class="tag-list-item"><a class="tag-list-link" href="/AIDF.github.io/tags/%E6%95%B0%E6%8D%AE%E5%B7%A5%E5%9C%BA/" rel="tag">数据工场</a></li><li class="tag-list-item"><a class="tag-list-link" href="/AIDF.github.io/tags/%E6%96%87%E6%A1%A3%E4%B8%AD%E5%BF%83/" rel="tag">文档中心</a></li><li class="tag-list-item"><a class="tag-list-link" href="/AIDF.github.io/tags/%E6%9E%B6%E6%9E%84/" rel="tag">架构</a></li><li class="tag-list-item"><a class="tag-list-link" href="/AIDF.github.io/tags/%E6%A8%A1%E5%9D%97%E6%9E%B6%E6%9E%84/" rel="tag">模块架构</a></li><li class="tag-list-item"><a class="tag-list-link" href="/AIDF.github.io/tags/%E7%AE%A1%E7%90%86%E4%B8%AD%E5%BF%83/" rel="tag">管理中心</a></li><li class="tag-list-item"><a class="tag-list-link" href="/AIDF.github.io/tags/%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84/" rel="tag">系统架构</a></li><li class="tag-list-item"><a class="tag-list-link" href="/AIDF.github.io/tags/%E7%B3%BB%E7%BB%9F%E9%A6%96%E9%A1%B5/" rel="tag">系统首页</a></li><li class="tag-list-item"><a class="tag-list-link" href="/AIDF.github.io/tags/%E9%A1%B9%E7%9B%AE%E4%B8%AD%E5%BF%83/" rel="tag">项目中心</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/AIDF.github.io/tags/API/" style="font-size: 20px;">API</a> <a href="/AIDF.github.io/tags/Smart-Chat/" style="font-size: 12.5px;">Smart Chat</a> <a href="/AIDF.github.io/tags/%E6%80%BB%E8%A7%88/" style="font-size: 10px;">总览</a> <a href="/AIDF.github.io/tags/%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3/" style="font-size: 20px;">接口文档</a> <a href="/AIDF.github.io/tags/%E6%95%B0%E6%8D%AE%E5%B7%A5%E5%9C%BA/" style="font-size: 12.5px;">数据工场</a> <a href="/AIDF.github.io/tags/%E6%96%87%E6%A1%A3%E4%B8%AD%E5%BF%83/" style="font-size: 15px;">文档中心</a> <a href="/AIDF.github.io/tags/%E6%9E%B6%E6%9E%84/" style="font-size: 20px;">架构</a> <a href="/AIDF.github.io/tags/%E6%A8%A1%E5%9D%97%E6%9E%B6%E6%9E%84/" style="font-size: 17.5px;">模块架构</a> <a href="/AIDF.github.io/tags/%E7%AE%A1%E7%90%86%E4%B8%AD%E5%BF%83/" style="font-size: 12.5px;">管理中心</a> <a href="/AIDF.github.io/tags/%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84/" style="font-size: 10px;">系统架构</a> <a href="/AIDF.github.io/tags/%E7%B3%BB%E7%BB%9F%E9%A6%96%E9%A1%B5/" style="font-size: 12.5px;">系统首页</a> <a href="/AIDF.github.io/tags/%E9%A1%B9%E7%9B%AE%E4%B8%AD%E5%BF%83/" style="font-size: 12.5px;">项目中心</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/AIDF.github.io/archives/2025/12/">十二月 2025</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/AIDF.github.io/2025/12/30/README/">AI NAS 文档中心</a>
          </li>
        
          <li>
            <a href="/AIDF.github.io/2025/12/30/api/">API接口说明文档</a>
          </li>
        
          <li>
            <a href="/AIDF.github.io/2025/12/30/architecture/">AI NAS 系统架构说明文档</a>
          </li>
        
          <li>
            <a href="/AIDF.github.io/2025/12/30/data_factory-api/">数据工场模块API接口文档</a>
          </li>
        
          <li>
            <a href="/AIDF.github.io/2025/12/30/data_factory-architecture/">数据工场模块架构说明</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2025 AI NAS Team<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/AIDF.github.io/" class="mobile-nav-link">Home</a>
  
    <a href="/AIDF.github.io/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/AIDF.github.io/js/jquery-3.6.4.min.js"></script>



  
<script src="/AIDF.github.io/fancybox/jquery.fancybox.min.js"></script>




<script src="/AIDF.github.io/js/script.js"></script>





  </div>
</body>
</html>